/* Wikiwand - Minified Early JS */


function Analytics(){var a=window.location.search.indexOf("debug_analytics=1")>-1;Analytics.prototype.gaInitialize=function(){if(!(document.location.search.indexOf("publisher=newTabWiki")>-1)){!function(a,b,c,d,e,f,g){a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=1,f.src=d,g.parentNode.insertBefore(f,g)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-49207730-1",{cookieDomain:"none"}),ga("create","UA-49207730-5",{cookieDomain:"none",name:"ABtesting"}),ga("require","displayfeatures");var a=-1!==document.cookie.indexOf("wikiwand.extension.installed");if(a===!0&&(ga("set","campaignMedium","wikiwand-extension"),ga("set","campaignSource","")),!("undefined"!=typeof serverData&&serverData.agent&&serverData.agent.iOSWebView||"undefined"!=typeof precache_from_extension&&1==precache_from_extension||"undefined"!=typeof serverData&&serverData.config&&"popup"==serverData.config.source)){ga("send","pageview");try{var b=document.cookie.split("userID=")[1],b=b.split(";")[0];if(console.log("user id ",b),8!=b.length)return;ga("create","UA-49207730-12",{cookieDomain:"none",userId:b,name:"retention"}),a===!0&&(ga("set","campaignMedium","wikiwand-extension"),ga("set","campaignSource","")),ga("retention.send","pageview")}catch(c){console.log("no user id")}}}},Analytics.prototype.gaEvent=function(a,b,c,d){if("undefined"!=typeof ga)if("development"===serverData.config.environment){var e="["+a+"] "+b;c&&(e+=" ("+c+")"),d&&(e+=" = "+d),ga("send","event",a,b,c,d)}else ga("send","event",a,b,c,d);else window.setTimeout(function(){analytics.gaEvent(a,b,c,d)},500)},Analytics.prototype.gaSetDimension=function(a,b){return"undefined"==typeof ga?void window.setTimeout(function(){analytics.gaSetDimension(a,b)},500):void ga("set","dimension"+a,b)},Analytics.prototype.gaPageView=function(a){serverData&&serverData.agent&&serverData.agent.iOSWebView||("undefined"!=typeof ga?ga("send","pageview",a):window.setTimeout(function(){analytics.gaPageView(a)},500))},Analytics.prototype.gaVirtualPageView=function(b){serverData&&serverData.agent&&serverData.agent.iOSWebView||("undefined"!=typeof ga?(a&&console.warn("→→→→→→→→→→ GOOGLE ANALYTICS: "+b),ga("ABtesting.send","pageview",b)):window.setTimeout(function(){analytics.gaVirtualPageView(b)},500))}}function isLocalStorageNameSupported(){try{var a="test",b=window.localStorage;return b.setItem(a,"1"),b.removeItem(a),!0}catch(c){return location.href="/support/need-cookies",!1}}function initializeGoogleMaps(){"function"==typeof $("body").scope().initMap?$("body").scope().initMap():setTimeout(initializeGoogleMaps,300)}function infoWindowMouseIn(){var a=$("#map_wrapper").scope();infoWindowLatch2=!0,a.testCloseInfoWindow()}function infoWindowMouseOut(){var a=$("#map_wrapper").scope();infoWindowLatch2=!1,a.testCloseInfoWindow()}function loadGoogleMaps(){maps_script?$("body").scope().map?$("body").scope().map.showMap=!0:setTimeout(loadGoogleMaps,300):(maps_script=document.createElement("script"),maps_script.type="text/javascript",maps_script.src="https://maps.googleapis.com/maps/api/js?v=3.exp&callback=initializeGoogleMaps",document.body&&document.body.appendChild(maps_script))}function getObjectKeys(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b}function getWatchers(a){function b(a){var d=c(a.data().$isolateScope),e=c(a.data().$scope),f=e.concat(d);return angular.forEach(a.children(),function(a){f=f.concat(b(angular.element(a)))}),f}function c(a){return a?a.$$watchers||[]:[]}a=angular.element(a||document.documentElement);return b(a)}function sw(){return getWatchers().length}$.escapeRE=function(a){return a.replace(/([\\{}()|.?*+\-\^$\[\]])/g,"\\$1")};var mediaWiki={msg:function(){},language:{months:{keys:{names:["january","february","march","april","may_long","june","july","august","september","october","november","december"],genitive:["january-gen","february-gen","march-gen","april-gen","may-gen","june-gen","july-gen","august-gen","september-gen","october-gen","november-gen","december-gen"],abbrev:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"]},names:["January","February","March","April","May","June","July","August","September","October","November","December"],genitive:["January","February","March","April","May","June","July","August","September","October","November","December"],abbrev:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},config:{get:function(a){switch(a){case"wgSeparatorTransformTable":var b=articleData.langCodeUrl;return"fr"==b||"es"==b||"de"==b||"ru"==b||"pl"==b||"pt"==b||"nl"==b||"it"==b||"ar"==b||"hu"==b||"fi"==b?[",	."," 	,"]:["",""];case"wgDigitTransformTable":return["",""];case"wgDefaultDateFormat":return"dmy";case"wgContentLanguage":return articleData.langCodeUrl;case"tableSorterCollation":return null;default:return""}}}};!function(a,b){"use strict";var c="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,d=function(){for(var a,c,d=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],e=0,f=d.length,g={};f>e;e++)if(a=d[e],a&&a[1]in b){for(e=0,c=a.length;c>e;e++)g[d[0][e]]=a[e];return g}return!1}(),e={request:function(a){var e=d.requestFullscreen;a=a||b.documentElement,/5\.1[\.\d]* Safari/.test(navigator.userAgent)?a[e]():a[e](c&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){b[d.exitFullscreen]()},toggle:function(a){this.isFullscreen?this.exit():this.request(a)},onchange:function(){},onerror:function(){},raw:d};return d?(Object.defineProperties(e,{isFullscreen:{get:function(){return!!b[d.fullscreenElement]}},element:{enumerable:!0,get:function(){return b[d.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return!!b[d.fullscreenEnabled]}}}),b.addEventListener(d.fullscreenchange,function(a){e.onchange.call(e,a)}),b.addEventListener(d.fullscreenerror,function(a){e.onerror.call(e,a)}),void(a.screenfull=e)):void(a.screenfull=!1)}(window,document),function(a,b){function c(a){var b,c=y.length;for(b=0;c>b;b++)if(y[b].id.toLowerCase()===a.toLowerCase())return y[b];return!1}function d(b){var c=a(b),e=c.data("sortValue");return null!==e&&void 0!==e?String(e):b?"img"===b.tagName.toLowerCase()?c.attr("alt")||"":a.map(a.makeArray(b.childNodes),function(b){return 1===b.nodeType?d(b):a.text(b)}).join(""):c.text()}function e(b,c,e){for(var f,g=y.length,h=1,i=0,j=0,k=c.length>4?5:c.length;g>h;)if(f=c[i]&&c[i].cells[e]?a.trim(d(c[i].cells[e])):"",""!==f)if(y[h].is(f,b)){if(j++,i++,j>=k)return y[h]}else h++,i=0,j=0;else i++,i>c.length&&(i=0,h++);return y[0]}function f(a,b){var d,f,g,h,i,j=a.tBodies[0].rows,k=[];if(j[0])for(f=j[0].cells,g=f.length,h=0;g>h;h++)i=!1,d=b.eq(h).data("sortType"),void 0!==d&&(i=c(d)),i===!1&&(i=e(a,j,h)),k.push(i);return k}function g(b){var c,e,f,g,h=b.tBodies[0]&&b.tBodies[0].rows.length||0,i=b.tBodies[0].rows[0]&&b.tBodies[0].rows[0].cells.length||0,j=a(b).data("tablesorter").config,k=j.parsers,l={row:[],normalized:[]};for(c=0;h>c;++c)if(f=a(b.tBodies[0].rows[c]),g=[],f.hasClass(j.cssChildRow))l.row[l.row.length-1]=l.row[l.row.length-1].add(f);else{for(l.row.push(f),e=0;i>e;++e)g.push(k[e].format(d(f[0].cells[e]),b,f[0].cells[e]));g.push(l.normalized.length),l.normalized.push(g),g=null}return l}function h(b,c){var d,e,f,g,h=c.row,i=c.normalized,j=i.length,k=i[0].length-1,l=document.createDocumentFragment();for(d=0;j>d;d++)for(e=i[d][k],f=h[e].length,g=0;f>g;g++)l.appendChild(h[e][g]);b.tBodies[0].appendChild(l),a(b).trigger("sortEnd.tablesorter")}function i(b){var c,d,e,f,g=b.find("> tbody > tr");if(b.get(0).tHead||(c=a("<thead>"),g.each(function(){return a(this).children("td").length?!1:void c.append(this)}),b.find(" > tbody:first").before(c)),!b.get(0).tFoot){for(d=a("<tfoot>"),f=g.length,e=f-1;e>=0&&!a(g[e]).children("td").length;e--)d.prepend(a(g[e]));b.append(d)}}function j(b,c){var d,e,f,g,h,i,j,k,l=a(b).data("tablesorter").config,n=0,o=0,p=a([]),q=a("thead:eq(0) > tr",b);return q.length<=1?p=q.children("th"):(k=[],q.each(function(b,c){a.each(c.cells,function(a,c){var d,e;for(g=Number(c.rowSpan),h=Number(c.colSpan);k[b]&&void 0!==k[b][a];)++a;for(e=a;a+h>e;++e)for(d=b;b+g>d;++d)k[d]||(k[d]=[]),k[d][e]=c})}),a.each(k,function(b,c){i=a(m(c)).filter("th").length,i>=n&&(n=i,j=b)}),p=a(m(k[j])).filter("th")),p.each(function(b){for(f=a(this),d=[],e=0;e<this.colSpan;e++)l.columnToHeader[o+e]=b,d.push(o+e);l.headerToColumns[b]=d,o+=this.colSpan,f.data({headerIndex:b,order:0,count:0}),f.hasClass(l.unsortableClass)&&f.data("sortDisabled",!0),f.data("sortDisabled")||f.addClass(l.cssHeader).prop("tabIndex",0).attr({role:"columnheader button",title:c[1]}),l.headerList[b]=this}),p}function k(b,c,d){a.each(d,function(d,e){a.each(e,function(e,f){var g=b[d],h=a(g);l(f,c)?a.each(c,function(a,b){return b[0]===e?(h.data({order:b[1],count:b[1]+1}),!1):void 0}):h.data({order:0,count:0})})})}function l(a,b){var c,d=b.length;for(c=0;d>c;c++)if(b[c][0]===a)return!0;return!1}function m(b){var c=[];return a.each(b,function(b,d){void 0!==d&&-1===a.inArray(d,c)&&c.push(d)}),c}function n(a,b,c,d,e,f){b.removeClass(d[0]).removeClass(d[1]).attr("title",e[1]);for(var g=0;g<c.length;g++)b.eq(f[c[g][0]]).addClass(d[c[g][1]]).attr("title",e[c[g][1]])}function o(a,b){return b>a?-1:a>b?1:0}function p(a,b){return a>b?-1:b>a?1:0}function q(a,b,c){var d,e=[],f=b.length;for(d=0;f>d;d++)e[d]=b[d][1]?p:o;return c.normalized.sort(function(a,c){var d,g,h;for(d=0;f>d;d++)if(g=b[d][0],h=e[d].call(this,a[g],c[g]),0!==h)return h;return o.call(this,a[a.length-1],c[c.length-1])}),c}function r(){var c,d,e,f,g="0123456789,.".split(""),h=b.config.get("wgSeparatorTransformTable"),i=b.config.get("wgDigitTransformTable");if(null===h||""===h[0]&&""===i[2])x.transformTable=!1;else for(x.transformTable={},c=h[0].split("	").concat(i[0].split("	")),d=h[1].split("	").concat(i[1].split("	")),e=0;e<c.length;e++)x.transformTable[d[e]]=c[e],g.push(a.escapeRE(d[e]));f="["+g.join("",g)+"]",x.numberRegex=new RegExp("^([-+−]?[0-9][0-9,]*(\\.[0-9,]*)?(E[-+−]?[0-9][0-9,]*)?|[-+−]?"+f+"+[\\s\\xa0]*%?)$","i")}function s(){var c,d,e=[];for(x.monthNames={},c=0;12>c;c++)d=b.language.months.names[c].toLowerCase(),x.monthNames[d]=c+1,e.push(a.escapeRE(d)),d=b.language.months.genitive[c].toLowerCase(),x.monthNames[d]=c+1,e.push(a.escapeRE(d)),d=b.language.months.abbrev[c].toLowerCase().replace(".",""),x.monthNames[d]=c+1,e.push(a.escapeRE(d));e=e.join("|"),x.dateRegex[0]=new RegExp(/^\s*(\d{1,2})[\,\.\-\/'\s]{1,2}(\d{1,2})[\,\.\-\/'\s]{1,2}(\d{2,4})\s*?/i),x.dateRegex[1]=new RegExp("^\\s*(\\d{1,2})[\\,\\.\\-\\/'\\s]+("+e+")[\\,\\.\\-\\/'\\s]+(\\d{2,4})\\s*$","i"),x.dateRegex[2]=new RegExp("^\\s*("+e+")[\\,\\.\\-\\/'\\s]+(\\d{1,2})[\\,\\.\\-\\/'\\s]+(\\d{2,4})\\s*$","i")}function t(b){function c(){var b,c,d;o=o.sort(function(e,f){return b=a.data(e,"tablesorter"),c=a.data(f,"tablesorter"),d=b.realCellIndex-c.realCellIndex,d||(d=b.realRowIndex-c.realRowIndex),d}),a.each(o,function(){a.data(this,"tablesorter").needResort=!1})}function d(){return a.data(this,"tablesorter").realCellIndex>=f}function e(){a.data(this,"tablesorter").realCellIndex+=h,this.rowSpan>1&&(a.data(this,"tablesorter").needResort=!0)}var f,g,h,i,j,k,l,m,n,o=b.find("> tbody > tr > [rowspan]").get();if(o.length)for(b.find("> tbody > tr").each(function(){var b,c=0,d=this.cells.length;for(b=0;d>b;b++)a(this.cells[b]).data("tablesorter",{realCellIndex:c,realRowIndex:this.rowIndex}),c+=this.cells[b].colSpan}),c();o.length;)for(a.data(o[0],"tablesorter").needResort&&c(),i=o.shift(),j=a.data(i,"tablesorter"),g=i.rowSpan,h=i.colSpan,f=j.realCellIndex,i.rowSpan=1,n=a(i).parent().nextAll(),k=0;g-1>k;k++)l=a(n[k].cells).filter(d),m=a(i).clone(),m.data("tablesorter",{realCellIndex:f,realRowIndex:j.realRowIndex+k,needResort:!0}),l.length?(l.each(e),l.first().before(m)):n.eq(k).append(m)}function u(){if(x.collationTable=b.config.get("tableSorterCollation"),x.collationRegex=null,x.collationTable){var a,c=[];for(a in x.collationTable)x.collationTable.hasOwnProperty(a)&&c.push(a);c.length&&(x.collationRegex=new RegExp("["+c.join("")+"]","ig"))}}function v(){x.rgx||(x.rgx={IPAddress:[new RegExp(/^\d{1,3}[\.]\d{1,3}[\.]\d{1,3}[\.]\d{1,3}$/)],currency:[new RegExp(/(^[£$€¥]|[£$€¥]$)/),new RegExp(/[£$€¥]/g)],url:[new RegExp(/^(https?|ftp|file):\/\/$/),new RegExp(/(https?|ftp|file):\/\//)],isoDate:[new RegExp(/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/)],usLongDate:[new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/)],time:[new RegExp(/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/)]})}function w(b){var c=[];return a.each(b,function(b,d){a.each(d,function(a,b){var d="desc"===b?1:0;c.push([parseInt(a,10),d])})}),c}var x,y=[];a.tablesorter={defaultOptions:{cssHeader:"headerSort",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssChildRow:"expand-child",sortMultiSortKey:"shiftKey",unsortableClass:"unsortable",parsers:{},cancelSelection:!0,sortList:[],headerList:[],headerToColumns:[],columnToHeader:[]},dateRegex:[],monthNames:{},construct:function(c,d){return c.each(function(c,e){function m(){B=!1,u();var b,c=A.find("> tbody > tr.sortbottom");c.length&&(b=A.children("tfoot"),b.length?b.eq(0).prepend(c):A.append(a("<tfoot>").append(c))),t(A),x.parsers=f(e,o)}var o,p,x,y,z,A=a(e),B=!0;e.tBodies&&(e.tHead||(i(A),e.tHead))&&(A.addClass("jquery-tablesorter"),x=a.extend({},a.tablesorter.defaultOptions,d),a.data(e,"tablesorter",{config:x}),y=[x.cssDesc,x.cssAsc],z=[b.msg("sort-descending"),b.msg("sort-ascending")],o=j(e,z),r(),s(),v(),o.not("."+x.unsortableClass).on("keypress click",function(b){var c,d,f,i,j,r,s,t,u;if("click"===b.type&&"a"===b.target.nodeName.toLowerCase())return!0;if("keypress"===b.type&&13!==b.which)return!0;if(B&&m(),p=g(e),r=A[0].tBodies[0]&&A[0].tBodies[0].rows.length||0,!e.sortDisabled&&r>0){if(c=this,d=a(c),d.data({order:d.data("count")%2,count:d.data("count")+1}),c=this,f=x.headerToColumns[d.data("headerIndex")],i=a.map(f,function(a){return[[a,d.data("order")]]}),j=f[0],b[x.sortMultiSortKey])if(l(j,x.sortList))for(s=0;s<x.sortList.length;s++)t=x.sortList[s],u=x.headerList[t[0]],l(t[0],i)&&(a(u).data("count",t[1]+1),t[1]=a(u).data("count")%2);else x.sortList=x.sortList.concat(i);else x.sortList=i;return k(o,x.sortList,x.headerToColumns),n(A[0],o,x.sortList,y,z,x.columnToHeader),h(A[0],q(A[0],x.sortList,p)),!1}}).mousedown(function(){return x.cancelSelection?(this.onselectstart=function(){return!1},!1):void 0}),A.data("tablesorter").sort=function(a){B&&m(),void 0===a?a=x.sortList:a.length>0&&(a=w(a)),k(o,a,x.headerToColumns),p=g(e),n(e,o,a,y,z,x.columnToHeader),h(e,q(e,a,p))},x.sortList.length>0&&(m(),x.sortList=w(x.sortList),A.data("tablesorter").sort()))})},addParser:function(a){var b,c=y.length,d=!0;for(b=0;c>b;b++)y[b].id.toLowerCase()===a.id.toLowerCase()&&(d=!1);d&&y.push(a)},formatDigit:function(a){var b,c,d,e;if(x.transformTable!==!1){for(b="",d=0;d<a.length;d++)c=a.charAt(d),b+=c in x.transformTable?x.transformTable[c]:c;a=b}return e=parseFloat(a.replace(/[, ]/g,"").replace("−","-")),isNaN(e)?0:e},formatFloat:function(a){var b=parseFloat(a);return isNaN(b)?0:b},formatInt:function(a){var b=parseInt(a,10);return isNaN(b)?0:b},clearTableBody:function(b){a(b.tBodies[0]).empty()}},x=a.tablesorter,a.fn.tablesorter=function(a){return x.construct(this,a)},x.addParser({id:"text",is:function(){return!0},format:function(b){if(b=a.trim(b.toLowerCase()),x.collationRegex){var c=x.collationTable;b=b.replace(x.collationRegex,function(a){var b=c[a]?c[a]:c[a.toUpperCase()];return b.toLowerCase()})}return b},type:"text"}),x.addParser({id:"IPAddress",is:function(a){return x.rgx.IPAddress[0].test(a)},format:function(b){var c,d,e=b.split("."),f="",g=e.length;for(c=0;g>c;c++)d=e[c],f+=1===d.length?"00"+d:2===d.length?"0"+d:d;return a.tablesorter.formatFloat(f)},type:"numeric"}),x.addParser({id:"currency",is:function(a){return x.rgx.currency[0].test(a)},format:function(b){return a.tablesorter.formatDigit(b.replace(x.rgx.currency[1],""))},type:"numeric"}),x.addParser({id:"url",is:function(a){return x.rgx.url[0].test(a)},format:function(b){return a.trim(b.replace(x.rgx.url[1],""))},type:"text"}),x.addParser({id:"isoDate",is:function(a){return x.rgx.isoDate[0].test(a)},format:function(b){return a.tablesorter.formatFloat(""!==b?new Date(b.replace(new RegExp(/-/g),"/")).getTime():"0")},type:"numeric"}),x.addParser({id:"usLongDate",is:function(a){return x.rgx.usLongDate[0].test(a)},format:function(b){return a.tablesorter.formatFloat(new Date(b).getTime())},type:"numeric"}),x.addParser({id:"date",is:function(a){return x.dateRegex[0].test(a)||x.dateRegex[1].test(a)||x.dateRegex[2].test(a)},format:function(c){var d,e;if(c=a.trim(c.toLowerCase()),null!==(d=c.match(x.dateRegex[0])))if("mdy"===b.config.get("wgDefaultDateFormat")||"en"===b.config.get("wgContentLanguage"))c=[d[3],d[1],d[2]];else{if("dmy"!==b.config.get("wgDefaultDateFormat"))return"99999999";c=[d[3],d[2],d[1]]}else if(null!==(d=c.match(x.dateRegex[1])))c=[d[3],""+x.monthNames[d[2]],d[1]];else{if(null===(d=c.match(x.dateRegex[2])))return"99999999";c=[d[3],""+x.monthNames[d[1]],d[2]]}for(1===c[1].length&&(c[1]="0"+c[1]),1===c[2].length&&(c[2]="0"+c[2]),(e=parseInt(c[0],10))<100&&(c[0]=30>e?2e3+e:1900+e);c[0].length<4;)c[0]="0"+c[0];return parseInt(c.join(""),10)},type:"numeric"}),x.addParser({id:"time",is:function(a){return x.rgx.time[0].test(a)},format:function(b){return a.tablesorter.formatFloat(new Date("2000/01/01 "+b).getTime())},type:"numeric"}),x.addParser({id:"number",is:function(b){return a.tablesorter.numberRegex.test(a.trim(b))},format:function(b){return a.tablesorter.formatDigit(b)},type:"numeric"})}(jQuery,mediaWiki),!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(){var a=document.getElementsByTagName("script"),b=a[a.length-1].src.split("?")[0];return b.split("/").length>0?b.split("/").slice(0,-1).join("/")+"/":""}function c(a,b,c){for(var d=0;d<b.length;d++)c(a,b[d])}var d=!1,e=!1,f=0,g=2e3,h=0,i=a,j=["ms","moz","webkit","o"],k=window.requestAnimationFrame||!1,l=window.cancelAnimationFrame||!1;if(!k)for(var m in j){var n=j[m];k||(k=window[n+"RequestAnimationFrame"]),l||(l=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"])}var o=window.MutationObserver||window.WebKitMutationObserver||!1,p={zindex:"auto",cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"5px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:60,mousescrollstep:24,touchbehavior:!1,hwacceleration:!0,usetransition:!0,boxzoom:!1,dblclickzoom:!0,gesturezoom:!0,grabcursorenabled:!0,autohidemode:!0,background:"",iframeautoresize:!0,cursorminheight:32,preservenativescrolling:!0,railoffset:!1,railhoffset:!1,bouncescroll:!0,spacebarenabled:!0,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:!0,horizrailenabled:!0,railalign:"right",railvalign:"bottom",enabletranslate3d:!0,enablemousewheel:!0,enablekeyboard:!0,smoothscroll:!0,sensitiverail:!0,enablemouselockapi:!0,cursorfixedheight:!1,directionlockdeadzone:6,hidecursordelay:400,nativeparentscrolling:!0,enablescrollonselection:!0,overflowx:!0,overflowy:!0,cursordragspeed:.3,rtlmode:"auto",cursordragontouch:!1,oneaxismousemode:"auto",scriptpath:b()},q=!1,r=function(){function a(){var a=["-moz-grab","-webkit-grab","grab"];(c.ischrome&&!c.ischrome22||c.isie)&&(a=[]);for(var d=0;d<a.length;d++){var e=a[d];if(b.style.cursor=e,b.style.cursor==e)return e}return"url(//mail.google.com/mail/images/2/openhand.cur),n-resize"}if(q)return q;var b=document.createElement("DIV"),c={};c.haspointerlock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,c.isopera="opera"in window,c.isopera12=c.isopera&&"getUserMedia"in navigator,c.isoperamini="[object OperaMini]"===Object.prototype.toString.call(window.operamini),c.isie="all"in document&&"attachEvent"in b&&!c.isopera,c.isieold=c.isie&&!("msInterpolationMode"in b.style),c.isie7=!(!c.isie||c.isieold||"documentMode"in document&&7!=document.documentMode),c.isie8=c.isie&&"documentMode"in document&&8==document.documentMode,c.isie9=c.isie&&"performance"in window&&document.documentMode>=9,c.isie10=c.isie&&"performance"in window&&document.documentMode>=10,c.isie9mobile=/iemobile.9/i.test(navigator.userAgent),c.isie9mobile&&(c.isie9=!1),c.isie7mobile=!c.isie9mobile&&c.isie7&&/iemobile/i.test(navigator.userAgent),c.ismozilla="MozAppearance"in b.style,c.iswebkit="WebkitAppearance"in b.style,c.ischrome="chrome"in window,c.ischrome22=c.ischrome&&c.haspointerlock,c.ischrome26=c.ischrome&&"transition"in b.style,c.cantouch="ontouchstart"in document.documentElement||"ontouchstart"in window,c.hasmstouch=window.navigator.msPointerEnabled||!1,c.ismac=/^mac$/i.test(navigator.platform),c.isios=c.cantouch&&/iphone|ipad|ipod/i.test(navigator.platform),c.isios4=c.isios&&!("seal"in Object),c.isandroid=/android/i.test(navigator.userAgent),c.trstyle=!1,c.hastransform=!1,c.hastranslate3d=!1,c.transitionstyle=!1,c.hastransition=!1,c.transitionend=!1;for(var d=["transform","msTransform","webkitTransform","MozTransform","OTransform"],e=0;e<d.length;e++)if(void 0!==b.style[d[e]]){c.trstyle=d[e];break}c.hastransform=0!=c.trstyle,c.hastransform&&(b.style[c.trstyle]="translate3d(1px,2px,3px)",c.hastranslate3d=/translate3d/.test(b.style[c.trstyle])),c.transitionstyle=!1,c.prefixstyle="",c.transitionend=!1;for(var d=["transition","webkitTransition","MozTransition","OTransition","OTransition","msTransition","KhtmlTransition"],f=["","-webkit-","-moz-","-o-","-o","-ms-","-khtml-"],g=["transitionend","webkitTransitionEnd","transitionend","otransitionend","oTransitionEnd","msTransitionEnd","KhtmlTransitionEnd"],e=0;e<d.length;e++)if(d[e]in b.style){c.transitionstyle=d[e],c.prefixstyle=f[e],c.transitionend=g[e];break}return c.ischrome26&&(c.prefixstyle=f[1]),c.hastransition=c.transitionstyle,c.cursorgrabvalue=a(),c.hasmousecapture="setCapture"in b,c.hasMutationObserver=o!==!1,b=null,q=c,c},s=function(a,b){function c(){var a=s.doc.css(v.trstyle);return a&&"matrix"==a.substr(0,6)?a.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/):!1}function j(){var a=s.win;if("zIndex"in a)return a.zIndex();for(;a.length>0;){if(9==a[0].nodeType)return!1;var b=a.css("zIndex");if(!isNaN(b)&&0!=b)return parseInt(b);a=a.parent()}return!1}function m(a,b,c){var d=a.css(b),e=parseFloat(d);if(isNaN(e)){e=y[d]||0;var f=3==e?c?s.win.outerHeight()-s.win.innerHeight():s.win.outerWidth()-s.win.innerWidth():1;return s.isie8&&e&&(e+=1),f?e:0}return e}function n(a,b,c,d){s._bind(a,b,function(d){var d=d?d:window.event,e={original:d,target:d.target||d.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==d.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){return d.preventDefault?d.preventDefault():d.returnValue=!1,!1},stopImmediatePropagation:function(){d.stopImmediatePropagation?d.stopImmediatePropagation():d.cancelBubble=!0}};return"mousewheel"==b?(e.deltaY=-1/40*d.wheelDelta,d.wheelDeltaX&&(e.deltaX=-1/40*d.wheelDeltaX)):e.deltaY=d.detail,c.call(a,e)},d)}function q(a,b,c){var d,e;if(0==a.deltaMode?(d=-Math.floor(a.deltaX*(s.opt.mousescrollstep/54)),e=-Math.floor(a.deltaY*(s.opt.mousescrollstep/54))):1==a.deltaMode&&(d=-Math.floor(a.deltaX*s.opt.mousescrollstep),e=-Math.floor(a.deltaY*s.opt.mousescrollstep)),b&&s.opt.oneaxismousemode&&0==d&&e&&(d=e,e=0),d&&(s.scrollmom&&s.scrollmom.stop(),s.lastdeltax+=d,s.debounced("mousewheelx",function(){var a=s.lastdeltax;s.lastdeltax=0,s.rail.drag||s.doScrollLeftBy(a)},15)),e){if(s.opt.nativeparentscrolling&&c&&!s.ispage&&!s.zoomactive)if(0>e){if(s.getScrollTop()>=s.page.maxh)return!0}else if(s.getScrollTop()<=0)return!0;s.scrollmom&&s.scrollmom.stop(),s.lastdeltay+=e,s.debounced("mousewheely",function(){var a=s.lastdeltay;s.lastdeltay=0,s.rail.drag||s.doScrollBy(a)},15)}return a.stopImmediatePropagation(),a.preventDefault()}var s=this;if(this.version="3.5.6",this.name="nicescroll",this.me=b,this.opt={doc:i("body"),win:!1},i.extend(this.opt,p),this.opt.snapbackspeed=80,a)for(var u in s.opt)void 0!==a[u]&&(s.opt[u]=a[u]);this.doc=s.opt.doc,this.iddoc=this.doc&&this.doc[0]?this.doc[0].id||"":"",this.ispage=/^BODY|HTML/.test(s.opt.win?s.opt.win[0].nodeName:this.doc[0].nodeName),this.haswrapper=s.opt.win!==!1,this.win=s.opt.win||(this.ispage?i(window):this.doc),this.docscroll=this.ispage&&!this.haswrapper?i(window):this.win,this.body=i("body"),this.viewport=!1,this.isfixed=!1,this.iframe=!1,this.isiframe="IFRAME"==this.doc[0].nodeName&&"IFRAME"==this.win[0].nodeName,this.istextarea="TEXTAREA"==this.win[0].nodeName,this.forcescreen=!1,this.canshowonmouseevent="scroll"!=s.opt.autohidemode,this.onmousedown=!1,this.onmouseup=!1,this.onmousemove=!1,this.onmousewheel=!1,this.onkeypress=!1,this.ongesturezoom=!1,this.onclick=!1,this.onscrollstart=!1,this.onscrollend=!1,this.onscrollcancel=!1,this.onzoomin=!1,this.onzoomout=!1,this.view=!1,this.page=!1,this.scroll={x:0,y:0},this.scrollratio={x:0,y:0},this.cursorheight=20,this.scrollvaluemax=0,this.isrtlmode="auto"==this.opt.rtlmode?"rtl"==(this.win[0]==window?this.body:this.win).css("direction"):this.opt.rtlmode===!0,this.scrollrunning=!1,this.scrollmom=!1,this.observer=!1,this.observerremover=!1;do this.id="ascrail"+g++;while(document.getElementById(this.id));this.rail=!1,this.cursor=!1,this.cursorfreezed=!1,this.selectiondrag=!1,this.zoom=!1,this.zoomactive=!1,this.hasfocus=!1,this.hasmousefocus=!1,this.visibility=!0,this.locked=!1,this.hidden=!1,this.cursoractive=!0,this.wheelprevented=!1,this.overflowx=s.opt.overflowx,this.overflowy=s.opt.overflowy,this.nativescrollingarea=!1,this.checkarea=0,this.events=[],this.saved={},this.delaylist={},this.synclist={},this.lastdeltax=0,this.lastdeltay=0,this.detected=r();var v=i.extend({},this.detected);this.canhwscroll=v.hastransform&&s.opt.hwacceleration,this.ishwscroll=this.canhwscroll&&s.haswrapper,this.istouchcapable=!1,v.cantouch&&v.iswebkit&&!v.isios&&!v.isandroid&&(this.istouchcapable=!0,v.cantouch=!1),v.cantouch&&v.ismozilla&&!v.isios&&!v.isandroid&&(this.istouchcapable=!0,v.cantouch=!1),s.opt.enablemouselockapi||(v.hasmousecapture=!1,v.haspointerlock=!1),this.delayed=function(a,b,c,d){var e=s.delaylist[a],f=(new Date).getTime();return!d&&e&&e.tt?!1:(e&&e.tt&&clearTimeout(e.tt),void(e&&e.last+c>f&&!e.tt?s.delaylist[a]={last:f+c,tt:setTimeout(function(){s&&(s.delaylist[a].tt=0,b.call())},c)}:e&&e.tt||(s.delaylist[a]={last:f,tt:0},setTimeout(function(){b.call()},0))))},this.debounced=function(a,b,c){var d=s.delaylist[a];(new Date).getTime(),s.delaylist[a]=b,d||setTimeout(function(){var b=s.delaylist[a];s.delaylist[a]=!1,b.call()},c)};var w=!1;if(this.synched=function(a,b){function c(){w||(k(function(){w=!1;for(a in s.synclist){var b=s.synclist[a];b&&b.call(s),s.synclist[a]=!1}}),w=!0)}return s.synclist[a]=b,c(),a},this.unsynched=function(a){s.synclist[a]&&(s.synclist[a]=!1)},this.css=function(a,b){for(var c in b)s.saved.css.push([a,c,a.css(c)]),a.css(c,b[c])},this.scrollTop=function(a){return void 0===a?s.getScrollTop():s.setScrollTop(a)},this.scrollLeft=function(a){return void 0===a?s.getScrollLeft():s.setScrollLeft(a)},BezierClass=function(a,b,c,d,e,f,g){this.st=a,this.ed=b,this.spd=c,this.p1=d||0,this.p2=e||1,this.p3=f||0,this.p4=g||1,this.ts=(new Date).getTime(),this.df=this.ed-this.st},BezierClass.prototype={B2:function(a){return 3*a*a*(1-a)},B3:function(a){return 3*a*(1-a)*(1-a)},B4:function(a){return(1-a)*(1-a)*(1-a)},getNow:function(){var a=(new Date).getTime(),b=1-(a-this.ts)/this.spd,c=this.B2(b)+this.B3(b)+this.B4(b);return 0>b?this.ed:this.st+Math.round(this.df*c)},update:function(a,b){return this.st=this.getNow(),this.ed=a,this.spd=b,this.ts=(new Date).getTime(),this.df=this.ed-this.st,this}},this.ishwscroll){this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"},v.hastranslate3d&&v.isios&&this.doc.css("-webkit-backface-visibility","hidden"),this.getScrollTop=function(a){if(!a){var b=c();if(b)return 16==b.length?-b[13]:-b[5];if(s.timerscroll&&s.timerscroll.bz)return s.timerscroll.bz.getNow()}return s.doc.translate.y},this.getScrollLeft=function(a){if(!a){var b=c();if(b)return 16==b.length?-b[12]:-b[4];if(s.timerscroll&&s.timerscroll.bh)return s.timerscroll.bh.getNow()}return s.doc.translate.x},this.notifyScrollEvent=document.createEvent?function(a){var b=document.createEvent("UIEvents");b.initUIEvent("scroll",!1,!0,window,1),a.dispatchEvent(b)}:document.fireEvent?function(a){var b=document.createEventObject();a.fireEvent("onscroll"),b.cancelBubble=!0}:function(){};var x=this.isrtlmode?1:-1;v.hastranslate3d&&s.opt.enabletranslate3d?(this.setScrollTop=function(a,b){s.doc.translate.y=a,s.doc.translate.ty=-1*a+"px",s.doc.css(v.trstyle,"translate3d("+s.doc.translate.tx+","+s.doc.translate.ty+",0px)"),b||s.notifyScrollEvent(s.win[0])},this.setScrollLeft=function(a,b){s.doc.translate.x=a,s.doc.translate.tx=a*x+"px",s.doc.css(v.trstyle,"translate3d("+s.doc.translate.tx+","+s.doc.translate.ty+",0px)"),b||s.notifyScrollEvent(s.win[0])}):(this.setScrollTop=function(a,b){s.doc.translate.y=a,s.doc.translate.ty=-1*a+"px",s.doc.css(v.trstyle,"translate("+s.doc.translate.tx+","+s.doc.translate.ty+")"),b||s.notifyScrollEvent(s.win[0])},this.setScrollLeft=function(a,b){s.doc.translate.x=a,s.doc.translate.tx=a*x+"px",s.doc.css(v.trstyle,"translate("+s.doc.translate.tx+","+s.doc.translate.ty+")"),b||s.notifyScrollEvent(s.win[0])})}else this.getScrollTop=function(){return s.docscroll.scrollTop()},this.setScrollTop=function(a){return s.docscroll.scrollTop(a)},this.getScrollLeft=function(){return s.detected.ismozilla&&s.isrtlmode?Math.abs(s.docscroll.scrollLeft()):s.docscroll.scrollLeft()},this.setScrollLeft=function(a){return s.docscroll.scrollLeft(s.detected.ismozilla&&s.isrtlmode?-a:a)};this.getTarget=function(a){return a?a.target?a.target:a.srcElement?a.srcElement:!1:!1},this.hasParent=function(a,b){if(!a)return!1;for(var c=a.target||a.srcElement||a||!1;c&&c.id!=b;)c=c.parentNode||!1;return c!==!1};var y={thin:1,medium:3,thick:5};this.getOffset=function(){if(s.isfixed)return{top:parseFloat(s.win.css("top")),left:parseFloat(s.win.css("left"))};if(!s.viewport)return s.win.offset();var a=s.win.offset(),b=s.viewport.offset();return{top:a.top-b.top+s.viewport.scrollTop(),left:a.left-b.left+s.viewport.scrollLeft()}},this.updateScrollBar=function(a){if(s.ishwscroll)s.rail.css({height:s.win.innerHeight()}),s.railh&&s.railh.css({width:s.win.innerWidth()});else{var b=s.getOffset(),c={top:b.top,left:b.left};c.top+=m(s.win,"border-top-width",!0),(s.win.outerWidth()-s.win.innerWidth())/2,c.left+=s.rail.align?s.win.outerWidth()-m(s.win,"border-right-width")-s.rail.width:m(s.win,"border-left-width");var d=s.opt.railoffset;if(d&&(d.top&&(c.top+=d.top),s.rail.align&&d.left&&(c.left+=d.left)),s.locked||s.rail.css({top:c.top,left:c.left,height:a?a.h:s.win.innerHeight()}),s.zoom&&s.zoom.css({top:c.top+1,left:1==s.rail.align?c.left-20:c.left+s.rail.width+4}),s.railh&&!s.locked){var c={top:b.top,left:b.left},d=s.opt.railhoffset;d&&(d.top&&(c.top+=d.top),d.left&&(c.left+=d.left));var e=s.railh.align?c.top+m(s.win,"border-top-width",!0)+s.win.innerHeight()-s.railh.height:c.top+m(s.win,"border-top-width",!0),f=c.left+m(s.win,"border-left-width");s.railh.css({top:e,left:f,width:s.railh.width})}}},this.doRailClick=function(a,b,c){var d,e,f,g;
s.locked||(s.cancelEvent(a),b?(d=c?s.doScrollLeft:s.doScrollTop,f=c?(a.pageX-s.railh.offset().left-s.cursorwidth/2)*s.scrollratio.x:(a.pageY-s.rail.offset().top-s.cursorheight/2)*s.scrollratio.y,d(f)):(d=c?s.doScrollLeftBy:s.doScrollBy,f=c?s.scroll.x:s.scroll.y,g=c?a.pageX-s.railh.offset().left:a.pageY-s.rail.offset().top,e=c?s.view.w:s.view.h,d(f>=g?e:-e)))},s.hasanimationframe=k,s.hascancelanimationframe=l,s.hasanimationframe?s.hascancelanimationframe||(l=function(){s.cancelAnimationFrame=!0}):(k=function(a){return setTimeout(a,15-Math.floor(+new Date/1e3)%16)},l=clearInterval),this.init=function(){function a(b){if(s.selectiondrag){if(b){var c=s.win.outerHeight(),d=b.pageY-s.selectiondrag.top;d>0&&c>d&&(d=0),d>=c&&(d-=c),s.selectiondrag.df=d}if(0!=s.selectiondrag.df){var e=2*-Math.floor(s.selectiondrag.df/6);s.doScrollBy(e),s.debounced("doselectionscroll",function(){a()},50)}}}function b(){s.iframexd=!1;try{var a="contentDocument"in this?this.contentDocument:this.contentWindow.document;a.domain}catch(b){s.iframexd=!0,a=!1}if(s.iframexd)return"console"in window&&console.log("NiceScroll error: policy restriced iframe"),!0;if(s.forcescreen=!0,s.isiframe&&(s.iframe={doc:i(a),html:s.doc.contents().find("html")[0],body:s.doc.contents().find("body")[0]},s.getContentSize=function(){return{w:Math.max(s.iframe.html.scrollWidth,s.iframe.body.scrollWidth),h:Math.max(s.iframe.html.scrollHeight,s.iframe.body.scrollHeight)}},s.docscroll=i(s.iframe.body)),!v.isios&&s.opt.iframeautoresize&&!s.isiframe){s.win.scrollTop(0),s.doc.height("");var c=Math.max(a.getElementsByTagName("html")[0].scrollHeight,a.body.scrollHeight);s.doc.height(c)}s.lazyResize(30),v.isie7&&s.css(i(s.iframe.html),{"overflow-y":"hidden"}),s.css(i(s.iframe.body),{"overflow-y":"hidden"}),v.isios&&s.haswrapper&&s.css(i(a.body),{"-webkit-transform":"translate3d(0,0,0)"}),"contentWindow"in this?s.bind(this.contentWindow,"scroll",s.onscroll):s.bind(a,"scroll",s.onscroll),s.opt.enablemousewheel&&s.bind(a,"mousewheel",s.onmousewheel),s.opt.enablekeyboard&&s.bind(a,v.isopera?"keypress":"keydown",s.onkeypress),(v.cantouch||s.opt.touchbehavior)&&(s.bind(a,"mousedown",s.ontouchstart),s.bind(a,"mousemove",function(a){s.ontouchmove(a,!0)}),s.opt.grabcursorenabled&&v.cursorgrabvalue&&s.css(i(a.body),{cursor:v.cursorgrabvalue})),s.bind(a,"mouseup",s.ontouchend),s.zoom&&(s.opt.dblclickzoom&&s.bind(a,"dblclick",s.doZoom),s.ongesturezoom&&s.bind(a,"gestureend",s.ongesturezoom))}if(s.saved.css=[],v.isie7mobile)return!0;if(v.isoperamini)return!0;if(v.hasmstouch&&s.css(s.ispage?i("html"):s.win,{"-ms-touch-action":"none"}),s.zindex="auto",s.zindex=s.ispage||"auto"!=s.opt.zindex?s.opt.zindex:j()||"auto",s.ispage||"auto"==s.zindex||s.zindex>h&&(h=s.zindex),s.isie&&0==s.zindex&&"auto"==s.opt.zindex&&(s.zindex="auto"),!s.ispage||!v.cantouch&&!v.isieold&&!v.isie9mobile){var c=s.docscroll;s.ispage&&(c=s.haswrapper?s.win:s.doc),v.isie9mobile||s.css(c,{"overflow-y":"hidden"}),s.ispage&&v.isie7&&("BODY"==s.doc[0].nodeName?s.css(i("html"),{"overflow-y":"hidden"}):"HTML"==s.doc[0].nodeName&&s.css(i("body"),{"overflow-y":"hidden"})),!v.isios||s.ispage||s.haswrapper||s.css(i("body"),{"-webkit-overflow-scrolling":"touch"});var g=i(document.createElement("div"));g.css({position:"relative",top:0,"float":"right",width:s.opt.cursorwidth,height:"0px","background-color":s.opt.cursorcolor,border:s.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":s.opt.cursorborderradius,"-moz-border-radius":s.opt.cursorborderradius,"border-radius":s.opt.cursorborderradius}),g.hborder=parseFloat(g.outerHeight()-g.innerHeight()),s.cursor=g;var k=i(document.createElement("div"));k.attr("id",s.id),k.addClass("nicescroll-rails");var l,m,n=["left","right"];for(var p in n)m=n[p],l=s.opt.railpadding[m],l?k.css("padding-"+m,l+"px"):s.opt.railpadding[m]=0;k.append(g),k.width=Math.max(parseFloat(s.opt.cursorwidth),g.outerWidth())+s.opt.railpadding.left+s.opt.railpadding.right,k.css({width:k.width+"px",zIndex:s.zindex,background:s.opt.background,cursor:"default"}),k.visibility=!0,k.scrollable=!0,k.align="left"==s.opt.railalign?0:1,s.rail=k,s.rail.drag=!1;var q=!1;if(!s.opt.boxzoom||s.ispage||v.isieold||(q=document.createElement("div"),s.bind(q,"click",s.doZoom),s.zoom=i(q),s.zoom.css({cursor:"pointer","z-index":s.zindex,backgroundImage:"url("+s.opt.scriptpath+"zoomico.png)",height:18,width:18,backgroundPosition:"0px 0px"}),s.opt.dblclickzoom&&s.bind(s.win,"dblclick",s.doZoom),v.cantouch&&s.opt.gesturezoom&&(s.ongesturezoom=function(a){return a.scale>1.5&&s.doZoomIn(a),a.scale<.8&&s.doZoomOut(a),s.cancelEvent(a)},s.bind(s.win,"gestureend",s.ongesturezoom))),s.railh=!1,s.opt.horizrailenabled){s.css(c,{"overflow-x":"hidden"});var g=i(document.createElement("div"));g.css({position:"absolute",top:0,height:s.opt.cursorwidth,width:"0px","background-color":s.opt.cursorcolor,border:s.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":s.opt.cursorborderradius,"-moz-border-radius":s.opt.cursorborderradius,"border-radius":s.opt.cursorborderradius}),g.wborder=parseFloat(g.outerWidth()-g.innerWidth()),s.cursorh=g;var r=i(document.createElement("div"));r.attr("id",s.id+"-hr"),r.addClass("nicescroll-rails"),r.height=Math.max(parseFloat(s.opt.cursorwidth),g.outerHeight()),r.css({height:r.height+"px",zIndex:s.zindex,background:s.opt.background}),r.append(g),r.visibility=!0,r.scrollable=!0,r.align="top"==s.opt.railvalign?0:1,s.railh=r,s.railh.drag=!1}if(s.ispage)k.css({position:"fixed",top:"0px",height:"100%"}),k.css(k.align?{right:"0px"}:{left:"0px"}),s.body.append(k),s.railh&&(r.css({position:"fixed",left:"0px",width:"100%"}),r.css(r.align?{bottom:"0px"}:{top:"0px"}),s.body.append(r));else{if(s.ishwscroll){"static"==s.win.css("position")&&s.css(s.win,{position:"relative"});var u="HTML"==s.win[0].nodeName?s.body:s.win;s.zoom&&(s.zoom.css({position:"absolute",top:1,right:0,"margin-right":k.width+4}),u.append(s.zoom)),k.css({position:"absolute",top:0}),k.css(k.align?{right:0}:{left:0}),u.append(k),r&&(r.css({position:"absolute",left:0,bottom:0}),r.css(r.align?{bottom:0}:{top:0}),u.append(r))}else{s.isfixed="fixed"==s.win.css("position");var w=s.isfixed?"fixed":"absolute";s.isfixed||(s.viewport=s.getViewport(s.win[0])),s.viewport&&(s.body=s.viewport,0==/fixed|relative|absolute/.test(s.viewport.css("position"))&&s.css(s.viewport,{position:"relative"})),k.css({position:w}),s.zoom&&s.zoom.css({position:w}),s.updateScrollBar(),s.body.append(k),s.zoom&&s.body.append(s.zoom),s.railh&&(r.css({position:w}),s.body.append(r))}v.isios&&s.css(s.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"}),v.isie&&s.opt.disableoutline&&s.win.attr("hideFocus","true"),v.iswebkit&&s.opt.disableoutline&&s.win.css({outline:"none"})}if(s.opt.autohidemode===!1?(s.autohidedom=!1,s.rail.css({opacity:s.opt.cursoropacitymax}),s.railh&&s.railh.css({opacity:s.opt.cursoropacitymax})):s.opt.autohidemode===!0||"leave"===s.opt.autohidemode?(s.autohidedom=i().add(s.rail),v.isie8&&(s.autohidedom=s.autohidedom.add(s.cursor)),s.railh&&(s.autohidedom=s.autohidedom.add(s.railh)),s.railh&&v.isie8&&(s.autohidedom=s.autohidedom.add(s.cursorh))):"scroll"==s.opt.autohidemode?(s.autohidedom=i().add(s.rail),s.railh&&(s.autohidedom=s.autohidedom.add(s.railh))):"cursor"==s.opt.autohidemode?(s.autohidedom=i().add(s.cursor),s.railh&&(s.autohidedom=s.autohidedom.add(s.cursorh))):"hidden"==s.opt.autohidemode&&(s.autohidedom=!1,s.hide(),s.locked=!1),v.isie9mobile){s.scrollmom=new t(s),s.onmangotouch=function(){var a=s.getScrollTop(),b=s.getScrollLeft();if(a==s.scrollmom.lastscrolly&&b==s.scrollmom.lastscrollx)return!0;var c=a-s.mangotouch.sy,d=b-s.mangotouch.sx,e=Math.round(Math.sqrt(Math.pow(d,2)+Math.pow(c,2)));if(0!=e){var f=0>c?-1:1,g=0>d?-1:1,h=+new Date;if(s.mangotouch.lazy&&clearTimeout(s.mangotouch.lazy),h-s.mangotouch.tm>80||s.mangotouch.dry!=f||s.mangotouch.drx!=g)s.scrollmom.stop(),s.scrollmom.reset(b,a),s.mangotouch.sy=a,s.mangotouch.ly=a,s.mangotouch.sx=b,s.mangotouch.lx=b,s.mangotouch.dry=f,s.mangotouch.drx=g,s.mangotouch.tm=h;else{s.scrollmom.stop(),s.scrollmom.update(s.mangotouch.sx-d,s.mangotouch.sy-c),h-s.mangotouch.tm,s.mangotouch.tm=h;var i=Math.max(Math.abs(s.mangotouch.ly-a),Math.abs(s.mangotouch.lx-b));s.mangotouch.ly=a,s.mangotouch.lx=b,i>2&&(s.mangotouch.lazy=setTimeout(function(){s.mangotouch.lazy=!1,s.mangotouch.dry=0,s.mangotouch.drx=0,s.mangotouch.tm=0,s.scrollmom.doMomentum(30)},100))}}};var x=s.getScrollTop(),y=s.getScrollLeft();s.mangotouch={sy:x,ly:x,dry:0,sx:y,lx:y,drx:0,lazy:!1,tm:0},s.bind(s.docscroll,"scroll",s.onmangotouch)}else{if(v.cantouch||s.istouchcapable||s.opt.touchbehavior||v.hasmstouch){s.scrollmom=new t(s),s.ontouchstart=function(a){if(a.pointerType&&2!=a.pointerType&&"touch"!=a.pointerType)return!1;if(s.hasmoving=!1,!s.locked){if(v.hasmstouch)for(var b=a.target?a.target:!1;b;){var c=i(b).getNiceScroll();if(c.length>0&&c[0].me==s.me)break;if(c.length>0)return!1;if("DIV"==b.nodeName&&b.id==s.id)break;b=b.parentNode?b.parentNode:!1}s.cancelScroll();var b=s.getTarget(a);if(b){var d=/INPUT/i.test(b.nodeName)&&/range/i.test(b.type);if(d)return s.stopPropagation(a)}if(!("clientX"in a)&&"changedTouches"in a&&(a.clientX=a.changedTouches[0].clientX,a.clientY=a.changedTouches[0].clientY),s.forcescreen){var e=a,a={original:a.original?a.original:a};a.clientX=e.screenX,a.clientY=e.screenY}if(s.rail.drag={x:a.clientX,y:a.clientY,sx:s.scroll.x,sy:s.scroll.y,st:s.getScrollTop(),sl:s.getScrollLeft(),pt:2,dl:!1},s.ispage||!s.opt.directionlockdeadzone)s.rail.drag.dl="f";else{var f={w:i(window).width(),h:i(window).height()},g={w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},h=Math.max(0,g.h-f.h),j=Math.max(0,g.w-f.w);s.rail.drag.ck=!s.rail.scrollable&&s.railh.scrollable?h>0?"v":!1:s.rail.scrollable&&!s.railh.scrollable&&j>0?"h":!1,s.rail.drag.ck||(s.rail.drag.dl="f")}if(s.opt.touchbehavior&&s.isiframe&&v.isie){var k=s.win.position();s.rail.drag.x+=k.left,s.rail.drag.y+=k.top}if(s.hasmoving=!1,s.lastmouseup=!1,s.scrollmom.reset(a.clientX,a.clientY),!v.cantouch&&!this.istouchcapable&&!v.hasmstouch){var l=b?/INPUT|SELECT|TEXTAREA/i.test(b.nodeName):!1;if(!l)return!s.ispage&&v.hasmousecapture&&b.setCapture(),s.opt.touchbehavior?(b.onclick&&!b._onclick&&(b._onclick=b.onclick,b.onclick=function(a){return s.hasmoving?!1:void b._onclick.call(this,a)}),s.cancelEvent(a)):s.stopPropagation(a);/SUBMIT|CANCEL|BUTTON/i.test(i(b).attr("type"))&&(pc={tg:b,click:!1},s.preventclick=pc)}}},s.ontouchend=function(a){return a.pointerType&&2!=a.pointerType&&"touch"!=a.pointerType?!1:s.rail.drag&&2==s.rail.drag.pt&&(s.scrollmom.doMomentum(),s.rail.drag=!1,s.hasmoving&&(s.lastmouseup=!0,s.hideCursor(),v.hasmousecapture&&document.releaseCapture(),!v.cantouch))?s.cancelEvent(a):void 0};var z=s.opt.touchbehavior&&s.isiframe&&!v.hasmousecapture;s.ontouchmove=function(a,b){if(a.pointerType&&2!=a.pointerType&&"touch"!=a.pointerType)return!1;if(s.rail.drag&&2==s.rail.drag.pt){if(v.cantouch&&void 0===a.original)return!0;s.hasmoving=!0,s.preventclick&&!s.preventclick.click&&(s.preventclick.click=s.preventclick.tg.onclick||!1,s.preventclick.tg.onclick=s.onpreventclick);var c=i.extend({original:a},a);if(a=c,"changedTouches"in a&&(a.clientX=a.changedTouches[0].clientX,a.clientY=a.changedTouches[0].clientY),s.forcescreen){var d=a,a={original:a.original?a.original:a};a.clientX=d.screenX,a.clientY=d.screenY}var e=ofy=0;if(z&&!b){var f=s.win.position();e=-f.left,ofy=-f.top}var g=a.clientY+ofy,h=g-s.rail.drag.y,j=a.clientX+e,k=j-s.rail.drag.x,l=s.rail.drag.st-h;if(s.ishwscroll&&s.opt.bouncescroll?0>l?l=Math.round(l/2):l>s.page.maxh&&(l=s.page.maxh+Math.round((l-s.page.maxh)/2)):(0>l&&(l=0,g=0),l>s.page.maxh&&(l=s.page.maxh,g=0)),s.railh&&s.railh.scrollable){var m=s.isrtlmode?k-s.rail.drag.sl:s.rail.drag.sl-k;s.ishwscroll&&s.opt.bouncescroll?0>m?m=Math.round(m/2):m>s.page.maxw&&(m=s.page.maxw+Math.round((m-s.page.maxw)/2)):(0>m&&(m=0,j=0),m>s.page.maxw&&(m=s.page.maxw,j=0))}var n=!1;if(s.rail.drag.dl)n=!0,"v"==s.rail.drag.dl?m=s.rail.drag.sl:"h"==s.rail.drag.dl&&(l=s.rail.drag.st);else{var o=Math.abs(h),p=Math.abs(k),q=s.opt.directionlockdeadzone;if("v"==s.rail.drag.ck){if(o>q&&.3*o>=p)return s.rail.drag=!1,!0;p>q&&(s.rail.drag.dl="f",i("body").scrollTop(i("body").scrollTop()))}else if("h"==s.rail.drag.ck){if(p>q&&.3*p>=o)return s.rail.drag=!1,!0;o>q&&(s.rail.drag.dl="f",i("body").scrollLeft(i("body").scrollLeft()))}}if(s.synched("touchmove",function(){s.rail.drag&&2==s.rail.drag.pt&&(s.prepareTransition&&s.prepareTransition(0),s.rail.scrollable&&s.setScrollTop(l),s.scrollmom.update(j,g),s.railh&&s.railh.scrollable?(s.setScrollLeft(m),s.showCursor(l,m)):s.showCursor(l),v.isie10&&document.selection.clear())}),v.ischrome&&s.istouchcapable&&(n=!1),n)return s.cancelEvent(a)}}}s.onmousedown=function(a,b){if(!s.rail.drag||1==s.rail.drag.pt){if(s.locked)return s.cancelEvent(a);s.cancelScroll(),s.rail.drag={x:a.clientX,y:a.clientY,sx:s.scroll.x,sy:s.scroll.y,pt:1,hr:!!b};var c=s.getTarget(a);return!s.ispage&&v.hasmousecapture&&c.setCapture(),s.isiframe&&!v.hasmousecapture&&(s.saved.csspointerevents=s.doc.css("pointer-events"),s.css(s.doc,{"pointer-events":"none"})),s.hasmoving=!1,s.cancelEvent(a)}},s.onmouseup=function(a){if(s.rail.drag){if(v.hasmousecapture&&document.releaseCapture(),s.isiframe&&!v.hasmousecapture&&s.doc.css("pointer-events",s.saved.csspointerevents),1!=s.rail.drag.pt)return;return s.rail.drag=!1,s.hasmoving&&s.triggerScrollEnd(),s.cancelEvent(a)}},s.onmousemove=function(a){if(s.rail.drag){if(1!=s.rail.drag.pt)return;if(v.ischrome&&0==a.which)return s.onmouseup(a);if(s.cursorfreezed=!0,s.hasmoving=!0,s.rail.drag.hr){s.scroll.x=s.rail.drag.sx+(a.clientX-s.rail.drag.x),s.scroll.x<0&&(s.scroll.x=0);var b=s.scrollvaluemaxw;s.scroll.x>b&&(s.scroll.x=b)}else{s.scroll.y=s.rail.drag.sy+(a.clientY-s.rail.drag.y),s.scroll.y<0&&(s.scroll.y=0);var c=s.scrollvaluemax;s.scroll.y>c&&(s.scroll.y=c)}return s.synched("mousemove",function(){s.rail.drag&&1==s.rail.drag.pt&&(s.showCursor(),s.rail.drag.hr?s.doScrollLeft(Math.round(s.scroll.x*s.scrollratio.x),s.opt.cursordragspeed):s.doScrollTop(Math.round(s.scroll.y*s.scrollratio.y),s.opt.cursordragspeed))}),s.cancelEvent(a)}},v.cantouch||s.opt.touchbehavior?(s.onpreventclick=function(a){return s.preventclick?(s.preventclick.tg.onclick=s.preventclick.click,s.preventclick=!1,s.cancelEvent(a)):void 0},s.bind(s.win,"mousedown",s.ontouchstart),s.onclick=v.isios?!1:function(a){return s.lastmouseup?(s.lastmouseup=!1,s.cancelEvent(a)):!0},s.opt.grabcursorenabled&&v.cursorgrabvalue&&(s.css(s.ispage?s.doc:s.win,{cursor:v.cursorgrabvalue}),s.css(s.rail,{cursor:v.cursorgrabvalue}))):(s.hasTextSelected="getSelection"in document?function(){return document.getSelection().rangeCount>0}:"selection"in document?function(){return"None"!=document.selection.type}:function(){return!1},s.onselectionstart=function(){s.ispage||(s.selectiondrag=s.win.offset())},s.onselectionend=function(){s.selectiondrag=!1},s.onselectiondrag=function(b){s.selectiondrag&&s.hasTextSelected()&&s.debounced("selectionscroll",function(){a(b)},250)}),v.hasmstouch&&(s.css(s.rail,{"-ms-touch-action":"none"}),s.css(s.cursor,{"-ms-touch-action":"none"}),s.bind(s.win,"MSPointerDown",s.ontouchstart),s.bind(document,"MSPointerUp",s.ontouchend),s.bind(document,"MSPointerMove",s.ontouchmove),s.bind(s.cursor,"MSGestureHold",function(a){a.preventDefault()}),s.bind(s.cursor,"contextmenu",function(a){a.preventDefault()})),this.istouchcapable&&(s.bind(s.win,"touchstart",s.ontouchstart),s.bind(document,"touchend",s.ontouchend),s.bind(document,"touchcancel",s.ontouchend),s.bind(document,"touchmove",s.ontouchmove)),s.bind(s.cursor,"mousedown",s.onmousedown),s.bind(s.cursor,"mouseup",s.onmouseup),s.railh&&(s.bind(s.cursorh,"mousedown",function(a){s.onmousedown(a,!0)}),s.bind(s.cursorh,"mouseup",s.onmouseup)),(s.opt.cursordragontouch||!v.cantouch&&!s.opt.touchbehavior)&&(s.rail.css({cursor:"default"}),s.railh&&s.railh.css({cursor:"default"}),s.jqbind(s.rail,"mouseenter",function(){return s.win.is(":visible")?(s.canshowonmouseevent&&s.showCursor(),void(s.rail.active=!0)):!1}),s.jqbind(s.rail,"mouseleave",function(){s.rail.active=!1,s.rail.drag||s.hideCursor()}),s.opt.sensitiverail&&(s.bind(s.rail,"click",function(a){s.doRailClick(a,!1,!1)}),s.bind(s.rail,"dblclick",function(a){s.doRailClick(a,!0,!1)}),s.bind(s.cursor,"click",function(a){s.cancelEvent(a)}),s.bind(s.cursor,"dblclick",function(a){s.cancelEvent(a)})),s.railh&&(s.jqbind(s.railh,"mouseenter",function(){return s.win.is(":visible")?(s.canshowonmouseevent&&s.showCursor(),void(s.rail.active=!0)):!1}),s.jqbind(s.railh,"mouseleave",function(){s.rail.active=!1,s.rail.drag||s.hideCursor()}),s.opt.sensitiverail&&(s.bind(s.railh,"click",function(a){s.doRailClick(a,!1,!0)}),s.bind(s.railh,"dblclick",function(a){s.doRailClick(a,!0,!0)}),s.bind(s.cursorh,"click",function(a){s.cancelEvent(a)}),s.bind(s.cursorh,"dblclick",function(a){s.cancelEvent(a)})))),v.cantouch||s.opt.touchbehavior?(s.bind(v.hasmousecapture?s.win:document,"mouseup",s.ontouchend),s.bind(document,"mousemove",s.ontouchmove),s.onclick&&s.bind(document,"click",s.onclick),s.opt.cursordragontouch&&(s.bind(s.cursor,"mousedown",s.onmousedown),s.bind(s.cursor,"mousemove",s.onmousemove),s.cursorh&&s.bind(s.cursorh,"mousedown",function(a){s.onmousedown(a,!0)}),s.cursorh&&s.bind(s.cursorh,"mousemove",s.onmousemove))):(s.bind(v.hasmousecapture?s.win:document,"mouseup",s.onmouseup),s.bind(document,"mousemove",s.onmousemove),s.onclick&&s.bind(document,"click",s.onclick),!s.ispage&&s.opt.enablescrollonselection&&(s.bind(s.win[0],"mousedown",s.onselectionstart),s.bind(document,"mouseup",s.onselectionend),s.bind(s.cursor,"mouseup",s.onselectionend),s.cursorh&&s.bind(s.cursorh,"mouseup",s.onselectionend),s.bind(document,"mousemove",s.onselectiondrag)),s.zoom&&(s.jqbind(s.zoom,"mouseenter",function(){s.canshowonmouseevent&&s.showCursor(),s.rail.active=!0}),s.jqbind(s.zoom,"mouseleave",function(){s.rail.active=!1,s.rail.drag||s.hideCursor()}))),s.opt.enablemousewheel&&(s.isiframe||s.bind(v.isie&&s.ispage?document:s.win,"mousewheel",s.onmousewheel),s.bind(s.rail,"mousewheel",s.onmousewheel),s.railh&&s.bind(s.railh,"mousewheel",s.onmousewheelhr)),s.ispage||v.cantouch||/HTML|^BODY/.test(s.win[0].nodeName)||(s.win.attr("tabindex")||s.win.attr({tabindex:f++}),s.jqbind(s.win,"focus",function(a){d=s.getTarget(a).id||!0,s.hasfocus=!0,s.canshowonmouseevent&&s.noticeCursor()}),s.jqbind(s.win,"blur",function(){d=!1,s.hasfocus=!1}),s.jqbind(s.win,"mouseenter",function(a){e=s.getTarget(a).id||!0,s.hasmousefocus=!0,s.canshowonmouseevent&&s.noticeCursor()}),s.jqbind(s.win,"mouseleave",function(){e=!1,s.hasmousefocus=!1,s.rail.drag||s.hideCursor()}))}if(s.onkeypress=function(a){if(s.locked&&0==s.page.maxh)return!0;a=a?a:window.e;var b=s.getTarget(a);if(b&&/INPUT|TEXTAREA|SELECT|OPTION/.test(b.nodeName)){var c=b.getAttribute("type")||b.type||!1;if(!c||!/submit|button|cancel/i.tp)return!0}if(i(b).attr("contenteditable"))return!0;if(s.hasfocus||s.hasmousefocus&&!d||s.ispage&&!d&&!e){var f=a.keyCode;if(s.locked&&27!=f)return s.cancelEvent(a);var g=a.ctrlKey||!1,h=a.shiftKey||!1,j=!1;switch(f){case 38:case 63233:s.doScrollBy(72),j=!0;break;case 40:case 63235:s.doScrollBy(-72),j=!0;break;case 37:case 63232:s.railh&&(g?s.doScrollLeft(0):s.doScrollLeftBy(72),j=!0);break;case 39:case 63234:s.railh&&(g?s.doScrollLeft(s.page.maxw):s.doScrollLeftBy(-72),j=!0);break;case 33:case 63276:s.doScrollBy(s.view.h),j=!0;break;case 34:case 63277:s.doScrollBy(-s.view.h),j=!0;break;case 36:case 63273:s.railh&&g?s.doScrollPos(0,0):s.doScrollTo(0),j=!0;break;case 35:case 63275:s.railh&&g?s.doScrollPos(s.page.maxw,s.page.maxh):s.doScrollTo(s.page.maxh),j=!0;break;case 32:s.opt.spacebarenabled&&(s.doScrollBy(h?s.view.h:-s.view.h),j=!0);break;case 27:s.zoomactive&&(s.doZoom(),j=!0)}if(j)return s.cancelEvent(a)}},s.opt.enablekeyboard&&s.bind(document,v.isopera&&!v.isopera12?"keypress":"keydown",s.onkeypress),s.bind(document,"keydown",function(a){var b=a.ctrlKey||!1;b&&(s.wheelprevented=!0)}),s.bind(document,"keyup",function(a){var b=a.ctrlKey||!1;b||(s.wheelprevented=!1)}),s.bind(window,"resize",s.lazyResize),s.bind(window,"orientationchange",s.lazyResize),s.bind(window,"load",s.lazyResize),v.ischrome&&!s.ispage&&!s.haswrapper){var A=s.win.attr("style"),B=parseFloat(s.win.css("width"))+1;s.win.css("width",B),s.synched("chromefix",function(){s.win.attr("style",A)})}s.onAttributeChange=function(){s.lazyResize(250)},s.ispage||s.haswrapper||(o!==!1?(s.observer=new o(function(a){a.forEach(s.onAttributeChange)}),s.observer.observe(s.win[0],{childList:!0,characterData:!1,attributes:!0,subtree:!1}),s.observerremover=new o(function(a){a.forEach(function(a){if(a.removedNodes.length>0)for(var b in a.removedNodes)if(a.removedNodes[b]==s.win[0])return s.remove()})}),s.observerremover.observe(s.win[0].parentNode,{childList:!0,characterData:!1,attributes:!1,subtree:!1})):(s.bind(s.win,v.isie&&!v.isie9?"propertychange":"DOMAttrModified",s.onAttributeChange),v.isie9&&s.win[0].attachEvent("onpropertychange",s.onAttributeChange),s.bind(s.win,"DOMNodeRemoved",function(a){a.target==s.win[0]&&s.remove()}))),!s.ispage&&s.opt.boxzoom&&s.bind(window,"resize",s.resizeZoom),s.istextarea&&s.bind(s.win,"mouseup",s.lazyResize),s.lazyResize(30)}"IFRAME"==this.doc[0].nodeName&&(this.doc[0].readyState&&"complete"==this.doc[0].readyState&&setTimeout(function(){b.call(s.doc[0],!1)},500),s.bind(this.doc,"load",b))},this.showCursor=function(a,b){s.cursortimeout&&(clearTimeout(s.cursortimeout),s.cursortimeout=0),s.rail&&(s.autohidedom&&(s.autohidedom.stop().css({opacity:s.opt.cursoropacitymax}),s.cursoractive=!0),s.rail.drag&&1==s.rail.drag.pt||(void 0!==a&&a!==!1&&(s.scroll.y=Math.round(1*a/s.scrollratio.y)),void 0!==b&&(s.scroll.x=Math.round(1*b/s.scrollratio.x))),s.cursor.css({height:s.cursorheight,top:s.scroll.y}),s.cursorh&&(s.cursorh.css(!s.rail.align&&s.rail.visibility?{width:s.cursorwidth,left:s.scroll.x+s.rail.width}:{width:s.cursorwidth,left:s.scroll.x}),s.cursoractive=!0),s.zoom&&s.zoom.stop().css({opacity:s.opt.cursoropacitymax}))},this.hideCursor=function(a){s.cursortimeout||s.rail&&s.autohidedom&&(s.hasmousefocus&&"leave"==s.opt.autohidemode||(s.cursortimeout=setTimeout(function(){s.rail.active&&s.showonmouseevent||(s.autohidedom.stop().animate({opacity:s.opt.cursoropacitymin}),s.zoom&&s.zoom.stop().animate({opacity:s.opt.cursoropacitymin}),s.cursoractive=!1),s.cursortimeout=0},a||s.opt.hidecursordelay)))},this.noticeCursor=function(a,b,c){s.showCursor(b,c),s.rail.active||s.hideCursor(a)},this.getContentSize=s.ispage?function(){return{w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}}:s.haswrapper?function(){return{w:s.doc.outerWidth()+parseInt(s.win.css("paddingLeft"))+parseInt(s.win.css("paddingRight")),h:s.doc.outerHeight()+parseInt(s.win.css("paddingTop"))+parseInt(s.win.css("paddingBottom"))}}:function(){return{w:s.docscroll[0].scrollWidth,h:s.docscroll[0].scrollHeight}},this.onResize=function(a,b){if(!s||!s.win)return!1;if(!s.haswrapper&&!s.ispage){if("none"==s.win.css("display"))return s.visibility&&s.hideRail().hideRailHr(),!1;s.hidden||s.visibility||s.showRail().showRailHr()}var c=s.page.maxh,d=s.page.maxw,e={h:s.view.h,w:s.view.w};if(s.view={w:s.ispage?s.win.width():parseInt(s.win[0].clientWidth),h:s.ispage?s.win.height():parseInt(s.win[0].clientHeight)},s.page=b?b:s.getContentSize(),s.page.maxh=Math.max(0,s.page.h-s.view.h),s.page.maxw=Math.max(0,s.page.w-s.view.w),s.page.maxh==c&&s.page.maxw==d&&s.view.w==e.w){if(s.ispage)return s;var f=s.win.offset();if(s.lastposition){var g=s.lastposition;if(g.top==f.top&&g.left==f.left)return s}s.lastposition=f}if(0==s.page.maxh?(s.hideRail(),s.scrollvaluemax=0,s.scroll.y=0,s.scrollratio.y=0,s.cursorheight=0,s.setScrollTop(0),s.rail.scrollable=!1):s.rail.scrollable=!0,0==s.page.maxw?(s.hideRailHr(),s.scrollvaluemaxw=0,s.scroll.x=0,s.scrollratio.x=0,s.cursorwidth=0,s.setScrollLeft(0),s.railh.scrollable=!1):s.railh.scrollable=!0,s.locked=0==s.page.maxh&&0==s.page.maxw,s.locked)return s.ispage||s.updateScrollBar(s.view),!1;s.hidden||s.visibility?s.hidden||s.railh.visibility||s.showRailHr():s.showRail().showRailHr(),s.istextarea&&s.win.css("resize")&&"none"!=s.win.css("resize")&&(s.view.h-=20),s.cursorheight=Math.min(s.view.h,Math.round(s.view.h*(s.view.h/s.page.h))),s.cursorheight=s.opt.cursorfixedheight?s.opt.cursorfixedheight:Math.max(s.opt.cursorminheight,s.cursorheight),s.cursorwidth=Math.min(s.view.w,Math.round(s.view.w*(s.view.w/s.page.w))),s.cursorwidth=s.opt.cursorfixedheight?s.opt.cursorfixedheight:Math.max(s.opt.cursorminheight,s.cursorwidth),s.scrollvaluemax=s.view.h-s.cursorheight-s.cursor.hborder,s.railh&&(s.railh.width=s.page.maxh>0?s.view.w-s.rail.width:s.view.w,s.scrollvaluemaxw=s.railh.width-s.cursorwidth-s.cursorh.wborder),s.ispage||s.updateScrollBar(s.view),s.scrollratio={x:s.page.maxw/s.scrollvaluemaxw,y:s.page.maxh/s.scrollvaluemax};var h=s.getScrollTop();return h>s.page.maxh?s.doScrollTop(s.page.maxh):(s.scroll.y=Math.round(s.getScrollTop()*(1/s.scrollratio.y)),s.scroll.x=Math.round(s.getScrollLeft()*(1/s.scrollratio.x)),s.cursoractive&&s.noticeCursor()),s.scroll.y&&0==s.getScrollTop()&&s.doScrollTo(Math.floor(s.scroll.y*s.scrollratio.y)),s},this.resize=s.onResize,this.lazyResize=function(a){return a=isNaN(a)?30:a,s.delayed("resize",s.resize,a),s},this._bind=function(a,b,c,d){s.events.push({e:a,n:b,f:c,b:d,q:!1}),a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c},this.jqbind=function(a,b,c){s.events.push({e:a,n:b,f:c,q:!0}),i(a).bind(b,c)},this.bind=function(a,b,c,d){var e="jquery"in a?a[0]:a;if("mousewheel"==b)if("onwheel"in document||document.documentMode>=9)s._bind(e,"wheel",c,d||!1);else{var f=void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";n(e,f,c,d||!1),"DOMMouseScroll"==f&&n(e,"MozMousePixelScroll",c,d||!1)}else if(e.addEventListener){if(v.cantouch&&/mouseup|mousedown|mousemove/.test(b)){var g="mousedown"==b?"touchstart":"mouseup"==b?"touchend":"touchmove";s._bind(e,g,function(a){if(a.touches){if(a.touches.length<2){var b=a.touches.length?a.touches[0]:a;b.original=a,c.call(this,b)}}else if(a.changedTouches){var b=a.changedTouches[0];b.original=a,c.call(this,b)}},d||!1)}s._bind(e,b,c,d||!1),v.cantouch&&"mouseup"==b&&s._bind(e,"touchcancel",c,d||!1)}else s._bind(e,b,function(a){return a=a||window.event||!1,a&&a.srcElement&&(a.target=a.srcElement),"pageY"in a||(a.pageX=a.clientX+document.documentElement.scrollLeft,a.pageY=a.clientY+document.documentElement.scrollTop),c.call(e,a)===!1||d===!1?s.cancelEvent(a):!0})},this._unbind=function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d):a.detachEvent?a.detachEvent("on"+b,c):a["on"+b]=!1},this.unbindAll=function(){for(var a=0;a<s.events.length;a++){var b=s.events[a];b.q?b.e.unbind(b.n,b.f):s._unbind(b.e,b.n,b.f,b.b)}},this.cancelEvent=function(a){var a=a.original?a.original:a?a:window.event||!1;return a?(a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.preventManipulation&&a.preventManipulation(),a.cancelBubble=!0,a.cancel=!0,a.returnValue=!1,!1):!1},this.stopPropagation=function(a){var a=a.original?a.original:a?a:window.event||!1;return a?a.stopPropagation?a.stopPropagation():(a.cancelBubble&&(a.cancelBubble=!0),!1):!1},this.showRail=function(){return 0==s.page.maxh||!s.ispage&&"none"==s.win.css("display")||(s.visibility=!0,s.rail.visibility=!0,s.rail.css("display","block")),s},this.showRailHr=function(){return s.railh?(0==s.page.maxw||!s.ispage&&"none"==s.win.css("display")||(s.railh.visibility=!0,s.railh.css("display","block")),s):s},this.hideRail=function(){return s.visibility=!1,s.rail.visibility=!1,s.rail.css("display","none"),s},this.hideRailHr=function(){return s.railh?(s.railh.visibility=!1,s.railh.css("display","none"),s):s},this.show=function(){return s.hidden=!1,s.locked=!1,s.showRail().showRailHr()},this.hide=function(){return s.hidden=!0,s.locked=!0,s.hideRail().hideRailHr()},this.toggle=function(){return s.hidden?s.show():s.hide()},this.remove=function(){s.stop(),s.cursortimeout&&clearTimeout(s.cursortimeout),s.doZoomOut(),s.unbindAll(),v.isie9&&s.win[0].detachEvent("onpropertychange",s.onAttributeChange),s.observer!==!1&&s.observer.disconnect(),s.observerremover!==!1&&s.observerremover.disconnect(),s.events=null,s.cursor&&s.cursor.remove(),s.cursorh&&s.cursorh.remove(),s.rail&&s.rail.remove(),s.railh&&s.railh.remove(),s.zoom&&s.zoom.remove();for(var a=0;a<s.saved.css.length;a++){var b=s.saved.css[a];b[0].css(b[1],void 0===b[2]?"":b[2])}s.saved=!1,s.me.data("__nicescroll","");var c=i.nicescroll;c.each(function(a){if(this&&this.id===s.id){delete c[a];for(var b=++a;b<c.length;b++,a++)c[a]=c[b];c.length--,c.length&&delete c[c.length]}});for(var d in s)s[d]=null,delete s[d];s=null},this.scrollstart=function(a){return this.onscrollstart=a,s},this.scrollend=function(a){return this.onscrollend=a,s},this.scrollcancel=function(a){return this.onscrollcancel=a,s},this.zoomin=function(a){return this.onzoomin=a,s},this.zoomout=function(a){return this.onzoomout=a,s},this.isScrollable=function(a){var b=a.target?a.target:a;if("OPTION"==b.nodeName)return!0;for(;b&&1==b.nodeType&&!/^BODY|HTML/.test(b.nodeName);){var c=i(b),d=c.css("overflowY")||c.css("overflowX")||c.css("overflow")||"";if(/scroll|auto/.test(d))return b.clientHeight!=b.scrollHeight;b=b.parentNode?b.parentNode:!1}return!1},this.getViewport=function(a){for(var b=a&&a.parentNode?a.parentNode:!1;b&&1==b.nodeType&&!/^BODY|HTML/.test(b.nodeName);){var c=i(b);if(/fixed|absolute/.test(c.css("position")))return c;var d=c.css("overflowY")||c.css("overflowX")||c.css("overflow")||"";if(/scroll|auto/.test(d)&&b.clientHeight!=b.scrollHeight)return c;if(c.getNiceScroll().length>0)return c;b=b.parentNode?b.parentNode:!1}return b?i(b):!1},this.triggerScrollEnd=function(){if(s.onscrollend){var a=s.getScrollLeft(),b=s.getScrollTop(),c={type:"scrollend",current:{x:a,y:b},end:{x:a,y:b}};s.onscrollend.call(s,c)}},this.onmousewheel=function(a){if(!s.wheelprevented){if(s.locked)return s.debounced("checkunlock",s.resize,250),!0;if(s.rail.drag)return s.cancelEvent(a);if("auto"==s.opt.oneaxismousemode&&0!=a.deltaX&&(s.opt.oneaxismousemode=!1),s.opt.oneaxismousemode&&0==a.deltaX&&!s.rail.scrollable)return s.railh&&s.railh.scrollable?s.onmousewheelhr(a):!0;var b=+new Date,c=!1;if(s.opt.preservenativescrolling&&s.checkarea+600<b&&(s.nativescrollingarea=s.isScrollable(a),c=!0),s.checkarea=b,s.nativescrollingarea)return!0;var d=q(a,!1,c);return d&&(s.checkarea=0),d}},this.onmousewheelhr=function(a){if(!s.wheelprevented){if(s.locked||!s.railh.scrollable)return!0;if(s.rail.drag)return s.cancelEvent(a);var b=+new Date,c=!1;return s.opt.preservenativescrolling&&s.checkarea+600<b&&(s.nativescrollingarea=s.isScrollable(a),c=!0),s.checkarea=b,s.nativescrollingarea?!0:s.locked?s.cancelEvent(a):q(a,!0,c)}},this.stop=function(){return s.cancelScroll(),s.scrollmon&&s.scrollmon.stop(),s.cursorfreezed=!1,s.scroll.y=Math.round(s.getScrollTop()*(1/s.scrollratio.y)),s.noticeCursor(),s},this.getTransitionSpeed=function(a){var b=Math.round(10*s.opt.scrollspeed),c=Math.min(b,Math.round(a/20*s.opt.scrollspeed));return c>20?c:0},s.opt.smoothscroll?s.ishwscroll&&v.hastransition&&s.opt.usetransition?(this.prepareTransition=function(a,b){var c=b?a>20?a:0:s.getTransitionSpeed(a),d=c?v.prefixstyle+"transform "+c+"ms ease-out":"";return s.lasttransitionstyle&&s.lasttransitionstyle==d||(s.lasttransitionstyle=d,s.doc.css(v.transitionstyle,d)),c},this.doScrollLeft=function(a,b){var c=s.scrollrunning?s.newscrolly:s.getScrollTop();s.doScrollPos(a,c,b)},this.doScrollTop=function(a,b){var c=s.scrollrunning?s.newscrollx:s.getScrollLeft();s.doScrollPos(c,a,b)},this.doScrollPos=function(a,b,c){var d=s.getScrollTop(),e=s.getScrollLeft();
return((s.newscrolly-d)*(b-d)<0||(s.newscrollx-e)*(a-e)<0)&&s.cancelScroll(),0==s.opt.bouncescroll&&(0>b?b=0:b>s.page.maxh&&(b=s.page.maxh),0>a?a=0:a>s.page.maxw&&(a=s.page.maxw)),s.scrollrunning&&a==s.newscrollx&&b==s.newscrolly?!1:(s.newscrolly=b,s.newscrollx=a,s.newscrollspeed=c||!1,s.timer?!1:void(s.timer=setTimeout(function(){var c=s.getScrollTop(),d=s.getScrollLeft(),e={};e.x=a-d,e.y=b-c,e.px=d,e.py=c;var f=Math.round(Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))),g=s.newscrollspeed&&s.newscrollspeed>1?s.newscrollspeed:s.getTransitionSpeed(f);if(s.newscrollspeed&&s.newscrollspeed<=1&&(g*=s.newscrollspeed),s.prepareTransition(g,!0),s.timerscroll&&s.timerscroll.tm&&clearInterval(s.timerscroll.tm),g>0){if(!s.scrollrunning&&s.onscrollstart){var h={type:"scrollstart",current:{x:d,y:c},request:{x:a,y:b},end:{x:s.newscrollx,y:s.newscrolly},speed:g};s.onscrollstart.call(s,h)}v.transitionend?s.scrollendtrapped||(s.scrollendtrapped=!0,s.bind(s.doc,v.transitionend,s.onScrollTransitionEnd,!1)):(s.scrollendtrapped&&clearTimeout(s.scrollendtrapped),s.scrollendtrapped=setTimeout(s.onScrollTransitionEnd,g));var i=c,j=d;s.timerscroll={bz:new BezierClass(i,s.newscrolly,g,0,0,.58,1),bh:new BezierClass(j,s.newscrollx,g,0,0,.58,1)},s.cursorfreezed||(s.timerscroll.tm=setInterval(function(){s.showCursor(s.getScrollTop(),s.getScrollLeft())},60))}s.synched("doScroll-set",function(){s.timer=0,s.scrollendtrapped&&(s.scrollrunning=!0),s.setScrollTop(s.newscrolly),s.setScrollLeft(s.newscrollx),s.scrollendtrapped||s.onScrollTransitionEnd()})},50)))},this.cancelScroll=function(){if(!s.scrollendtrapped)return!0;var a=s.getScrollTop(),b=s.getScrollLeft();return s.scrollrunning=!1,v.transitionend||clearTimeout(v.transitionend),s.scrollendtrapped=!1,s._unbind(s.doc,v.transitionend,s.onScrollTransitionEnd),s.prepareTransition(0),s.setScrollTop(a),s.railh&&s.setScrollLeft(b),s.timerscroll&&s.timerscroll.tm&&clearInterval(s.timerscroll.tm),s.timerscroll=!1,s.cursorfreezed=!1,s.showCursor(a,b),s},this.onScrollTransitionEnd=function(){s.scrollendtrapped&&s._unbind(s.doc,v.transitionend,s.onScrollTransitionEnd),s.scrollendtrapped=!1,s.prepareTransition(0),s.timerscroll&&s.timerscroll.tm&&clearInterval(s.timerscroll.tm),s.timerscroll=!1;var a=s.getScrollTop(),b=s.getScrollLeft();return s.setScrollTop(a),s.railh&&s.setScrollLeft(b),s.noticeCursor(!1,a,b),s.cursorfreezed=!1,0>a?a=0:a>s.page.maxh&&(a=s.page.maxh),0>b?b=0:b>s.page.maxw&&(b=s.page.maxw),a!=s.newscrolly||b!=s.newscrollx?s.doScrollPos(b,a,s.opt.snapbackspeed):(s.onscrollend&&s.scrollrunning&&s.triggerScrollEnd(),void(s.scrollrunning=!1))}):(this.doScrollLeft=function(a,b){var c=s.scrollrunning?s.newscrolly:s.getScrollTop();s.doScrollPos(a,c,b)},this.doScrollTop=function(a,b){var c=s.scrollrunning?s.newscrollx:s.getScrollLeft();s.doScrollPos(c,a,b)},this.doScrollPos=function(a,b,c){function d(){if(s.cancelAnimationFrame)return!0;if(s.scrollrunning=!0,m=1-m)return s.timer=k(d)||1;var a=0,b=sy=s.getScrollTop();if(s.dst.ay){b=s.bzscroll?s.dst.py+s.bzscroll.getNow()*s.dst.ay:s.newscrolly;var c=b-sy;(0>c&&b<s.newscrolly||c>0&&b>s.newscrolly)&&(b=s.newscrolly),s.setScrollTop(b),b==s.newscrolly&&(a=1)}else a=1;var e=sx=s.getScrollLeft();if(s.dst.ax){e=s.bzscroll?s.dst.px+s.bzscroll.getNow()*s.dst.ax:s.newscrollx;var c=e-sx;(0>c&&e<s.newscrollx||c>0&&e>s.newscrollx)&&(e=s.newscrollx),s.setScrollLeft(e),e==s.newscrollx&&(a+=1)}else a+=1;2==a?(s.timer=0,s.cursorfreezed=!1,s.bzscroll=!1,s.scrollrunning=!1,0>b?b=0:b>s.page.maxh&&(b=s.page.maxh),0>e?e=0:e>s.page.maxw&&(e=s.page.maxw),e!=s.newscrollx||b!=s.newscrolly?s.doScrollPos(e,b):s.onscrollend&&s.triggerScrollEnd()):s.timer=k(d)||1}var b=void 0===b||b===!1?s.getScrollTop(!0):b;if(s.timer&&s.newscrolly==b&&s.newscrollx==a)return!0;s.timer&&l(s.timer),s.timer=0;var e=s.getScrollTop(),f=s.getScrollLeft();((s.newscrolly-e)*(b-e)<0||(s.newscrollx-f)*(a-f)<0)&&s.cancelScroll(),s.newscrolly=b,s.newscrollx=a,s.bouncescroll&&s.rail.visibility||(s.newscrolly<0?s.newscrolly=0:s.newscrolly>s.page.maxh&&(s.newscrolly=s.page.maxh)),s.bouncescroll&&s.railh.visibility||(s.newscrollx<0?s.newscrollx=0:s.newscrollx>s.page.maxw&&(s.newscrollx=s.page.maxw)),s.dst={},s.dst.x=a-f,s.dst.y=b-e,s.dst.px=f,s.dst.py=e;var g=Math.round(Math.sqrt(Math.pow(s.dst.x,2)+Math.pow(s.dst.y,2)));s.dst.ax=s.dst.x/g,s.dst.ay=s.dst.y/g;var h=0,i=g;0==s.dst.x?(h=e,i=b,s.dst.ay=1,s.dst.py=0):0==s.dst.y&&(h=f,i=a,s.dst.ax=1,s.dst.px=0);var j=s.getTransitionSpeed(g);if(c&&1>=c&&(j*=c),s.bzscroll=j>0?s.bzscroll?s.bzscroll.update(i,j):new BezierClass(h,i,j,0,1,0,1):!1,!s.timer){(e==s.page.maxh&&b>=s.page.maxh||f==s.page.maxw&&a>=s.page.maxw)&&s.checkContentSize();var m=1;if(s.cancelAnimationFrame=!1,s.timer=1,s.onscrollstart&&!s.scrollrunning){var n={type:"scrollstart",current:{x:f,y:e},request:{x:a,y:b},end:{x:s.newscrollx,y:s.newscrolly},speed:j};s.onscrollstart.call(s,n)}d(),(e==s.page.maxh&&b>=e||f==s.page.maxw&&a>=f)&&s.checkContentSize(),s.noticeCursor()}},this.cancelScroll=function(){return s.timer&&l(s.timer),s.timer=0,s.bzscroll=!1,s.scrollrunning=!1,s}):(this.doScrollLeft=function(a,b){var c=s.getScrollTop();s.doScrollPos(a,c,b)},this.doScrollTop=function(a,b){var c=s.getScrollLeft();s.doScrollPos(c,a,b)},this.doScrollPos=function(a,b){var c=a>s.page.maxw?s.page.maxw:a;0>c&&(c=0);var d=b>s.page.maxh?s.page.maxh:b;0>d&&(d=0),s.synched("scroll",function(){s.setScrollTop(d),s.setScrollLeft(c)})},this.cancelScroll=function(){}),this.doScrollBy=function(a,b){var c=0;if(b)c=Math.floor((s.scroll.y-a)*s.scrollratio.y);else{var d=s.timer?s.newscrolly:s.getScrollTop(!0);c=d-a}if(s.bouncescroll){var e=Math.round(s.view.h/2);-e>c?c=-e:c>s.page.maxh+e&&(c=s.page.maxh+e)}return s.cursorfreezed=!1,py=s.getScrollTop(!0),0>c&&0>=py?s.noticeCursor():c>s.page.maxh&&py>=s.page.maxh?(s.checkContentSize(),s.noticeCursor()):void s.doScrollTop(c)},this.doScrollLeftBy=function(a,b){var c=0;if(b)c=Math.floor((s.scroll.x-a)*s.scrollratio.x);else{var d=s.timer?s.newscrollx:s.getScrollLeft(!0);c=d-a}if(s.bouncescroll){var e=Math.round(s.view.w/2);-e>c?c=-e:c>s.page.maxw+e&&(c=s.page.maxw+e)}return s.cursorfreezed=!1,px=s.getScrollLeft(!0),0>c&&0>=px?s.noticeCursor():c>s.page.maxw&&px>=s.page.maxw?s.noticeCursor():void s.doScrollLeft(c)},this.doScrollTo=function(a,b){var c=b?Math.round(a*s.scrollratio.y):a;0>c?c=0:c>s.page.maxh&&(c=s.page.maxh),s.cursorfreezed=!1,s.doScrollTop(a)},this.checkContentSize=function(){var a=s.getContentSize();(a.h!=s.page.h||a.w!=s.page.w)&&s.resize(!1,a)},s.onscroll=function(){s.rail.drag||s.cursorfreezed||s.synched("scroll",function(){s.scroll.y=Math.round(s.getScrollTop()*(1/s.scrollratio.y)),s.railh&&(s.scroll.x=Math.round(s.getScrollLeft()*(1/s.scrollratio.x))),s.noticeCursor()})},s.bind(s.docscroll,"scroll",s.onscroll),this.doZoomIn=function(a){if(!s.zoomactive){s.zoomactive=!0,s.zoomrestore={style:{}};var b=["position","top","left","zIndex","backgroundColor","marginTop","marginBottom","marginLeft","marginRight"],c=s.win[0].style;for(var d in b){var e=b[d];s.zoomrestore.style[e]=void 0!==c[e]?c[e]:""}s.zoomrestore.style.width=s.win.css("width"),s.zoomrestore.style.height=s.win.css("height"),s.zoomrestore.padding={w:s.win.outerWidth()-s.win.width(),h:s.win.outerHeight()-s.win.height()},v.isios4&&(s.zoomrestore.scrollTop=i(window).scrollTop(),i(window).scrollTop(0)),s.win.css({position:v.isios4?"absolute":"fixed",top:0,left:0,"z-index":h+100,margin:"0px"});var f=s.win.css("backgroundColor");return(""==f||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(f))&&s.win.css("backgroundColor","#fff"),s.rail.css({"z-index":h+101}),s.zoom.css({"z-index":h+102}),s.zoom.css("backgroundPosition","0px -18px"),s.resizeZoom(),s.onzoomin&&s.onzoomin.call(s),s.cancelEvent(a)}},this.doZoomOut=function(a){return s.zoomactive?(s.zoomactive=!1,s.win.css("margin",""),s.win.css(s.zoomrestore.style),v.isios4&&i(window).scrollTop(s.zoomrestore.scrollTop),s.rail.css({"z-index":s.zindex}),s.zoom.css({"z-index":s.zindex}),s.zoomrestore=!1,s.zoom.css("backgroundPosition","0px 0px"),s.onResize(),s.onzoomout&&s.onzoomout.call(s),s.cancelEvent(a)):void 0},this.doZoom=function(a){return s.zoomactive?s.doZoomOut(a):s.doZoomIn(a)},this.resizeZoom=function(){if(s.zoomactive){var a=s.getScrollTop();s.win.css({width:i(window).width()-s.zoomrestore.padding.w+"px",height:i(window).height()-s.zoomrestore.padding.h+"px"}),s.onResize(),s.setScrollTop(Math.min(s.page.maxh,a))}},this.init(),i.nicescroll.push(this)},t=function(a){var b=this;this.nc=a,this.lastx=0,this.lasty=0,this.speedx=0,this.speedy=0,this.lasttime=0,this.steptime=0,this.snapx=!1,this.snapy=!1,this.demulx=0,this.demuly=0,this.lastscrollx=-1,this.lastscrolly=-1,this.chkx=0,this.chky=0,this.timer=0,this.time=function(){return+new Date},this.reset=function(a,c){b.stop();var d=b.time();b.steptime=0,b.lasttime=d,b.speedx=0,b.speedy=0,b.lastx=a,b.lasty=c,b.lastscrollx=-1,b.lastscrolly=-1},this.update=function(a,c){var d=b.time();b.steptime=d-b.lasttime,b.lasttime=d;var e=c-b.lasty,f=a-b.lastx,g=b.nc.getScrollTop(),h=b.nc.getScrollLeft(),i=g+e,j=h+f;b.snapx=0>j||j>b.nc.page.maxw,b.snapy=0>i||i>b.nc.page.maxh,b.speedx=f,b.speedy=e,b.lastx=a,b.lasty=c},this.stop=function(){b.nc.unsynched("domomentum2d"),b.timer&&clearTimeout(b.timer),b.timer=0,b.lastscrollx=-1,b.lastscrolly=-1},this.doSnapy=function(a,c){var d=!1;0>c?(c=0,d=!0):c>b.nc.page.maxh&&(c=b.nc.page.maxh,d=!0),0>a?(a=0,d=!0):a>b.nc.page.maxw&&(a=b.nc.page.maxw,d=!0),d?b.nc.doScrollPos(a,c,b.nc.opt.snapbackspeed):b.nc.triggerScrollEnd()},this.doMomentum=function(a){var c=b.time(),d=a?c+a:b.lasttime,e=b.nc.getScrollLeft(),f=b.nc.getScrollTop(),g=b.nc.page.maxh,h=b.nc.page.maxw;b.speedx=h>0?Math.min(60,b.speedx):0,b.speedy=g>0?Math.min(60,b.speedy):0;var i=d&&60>=c-d;(0>f||f>g||0>e||e>h)&&(i=!1);var j=b.speedy&&i?b.speedy:!1,k=b.speedx&&i?b.speedx:!1;if(j||k){var l=Math.max(16,b.steptime);if(l>50){var m=l/50;b.speedx*=m,b.speedy*=m,l=50}b.demulxy=0,b.lastscrollx=b.nc.getScrollLeft(),b.chkx=b.lastscrollx,b.lastscrolly=b.nc.getScrollTop(),b.chky=b.lastscrolly;var n=b.lastscrollx,o=b.lastscrolly,p=function(){var a=b.time()-c>600?.04:.02;b.speedx&&(n=Math.floor(b.lastscrollx-b.speedx*(1-b.demulxy)),b.lastscrollx=n,(0>n||n>h)&&(a=.1)),b.speedy&&(o=Math.floor(b.lastscrolly-b.speedy*(1-b.demulxy)),b.lastscrolly=o,(0>o||o>g)&&(a=.1)),b.demulxy=Math.min(1,b.demulxy+a),b.nc.synched("domomentum2d",function(){if(b.speedx){var a=b.nc.getScrollLeft();a!=b.chkx&&b.stop(),b.chkx=n,b.nc.setScrollLeft(n)}if(b.speedy){var c=b.nc.getScrollTop();c!=b.chky&&b.stop(),b.chky=o,b.nc.setScrollTop(o)}b.timer||(b.nc.hideCursor(),b.doSnapy(n,o))}),b.demulxy<1?b.timer=setTimeout(p,l):(b.stop(),b.nc.hideCursor(),b.doSnapy(n,o))};p()}else b.doSnapy(b.nc.getScrollLeft(),b.nc.getScrollTop())}},u=a.fn.scrollTop;a.cssHooks.pageYOffset={get:function(a){var b=i.data(a,"__nicescroll")||!1;return b&&b.ishwscroll?b.getScrollTop():u.call(a)},set:function(a,b){var c=i.data(a,"__nicescroll")||!1;return c&&c.ishwscroll?c.setScrollTop(parseInt(b)):u.call(a,b),this}},a.fn.scrollTop=function(a){if(void 0===a){var b=this[0]?i.data(this[0],"__nicescroll")||!1:!1;return b&&b.ishwscroll?b.getScrollTop():u.call(this)}return this.each(function(){var b=i.data(this,"__nicescroll")||!1;b&&b.ishwscroll?b.setScrollTop(parseInt(a)):u.call(i(this),a)})};var v=a.fn.scrollLeft;i.cssHooks.pageXOffset={get:function(a){var b=i.data(a,"__nicescroll")||!1;return b&&b.ishwscroll?b.getScrollLeft():v.call(a)},set:function(a,b){var c=i.data(a,"__nicescroll")||!1;return c&&c.ishwscroll?c.setScrollLeft(parseInt(b)):v.call(a,b),this}},a.fn.scrollLeft=function(a){if(void 0===a){var b=this[0]?i.data(this[0],"__nicescroll")||!1:!1;return b&&b.ishwscroll?b.getScrollLeft():v.call(this)}return this.each(function(){var b=i.data(this,"__nicescroll")||!1;b&&b.ishwscroll?b.setScrollLeft(parseInt(a)):v.call(i(this),a)})};var w=function(a){var b=this;if(this.length=0,this.name="nicescrollarray",this.each=function(a){for(var c=0,d=0;c<b.length;c++)a.call(b[c],d++);return b},this.push=function(a){b[b.length]=a,b.length++},this.eq=function(a){return b[a]},a)for(var c=0;c<a.length;c++){var d=i.data(a[c],"__nicescroll")||!1;d&&(this[this.length]=d,this.length++)}return this};c(w.prototype,["show","hide","toggle","onResize","resize","remove","stop","doScrollPos"],function(a,b){a[b]=function(){var a=arguments;return this.each(function(){this[b].apply(this,a)})}}),a.fn.getNiceScroll=function(a){if(void 0===a)return new w(this);var b=this[a]&&i.data(this[a],"__nicescroll")||!1;return b},a.extend(a.expr[":"],{nicescroll:function(a){return i.data(a,"__nicescroll")?!0:!1}}),i.fn.niceScroll=function(a,b){void 0===b&&("object"!=typeof a||"jquery"in a||(b=a,a=!1));var c=new w;void 0===b&&(b={}),a&&(b.doc=i(a),b.win=i(this));var d=!("doc"in b);return d||"win"in b||(b.win=i(this)),this.each(function(){var a=i(this).data("__nicescroll")||!1;a||(b.doc=d?i(this):b.doc,a=new s(b,i(this)),i(this).data("__nicescroll",a)),c.push(a)}),1==c.length?c[0]:c},window.NiceScroll={getjQuery:function(){return a}},i.nicescroll||(i.nicescroll=new w,i.nicescroll.options=p)}),!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):"undefined"!=typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){"use strict";var b=window.Slick||{};b=function(){function b(b,d){var e,f,g,h=this;if(h.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:a(b),appendDots:a(b),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="previous">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="next">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(a,b){return'<button type="button" data-role="none">'+(b+1)+"</button>"},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0},h.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},a.extend(h,h.initials),h.activeBreakpoint=null,h.animType=null,h.animProp=null,h.breakpoints=[],h.breakpointSettings=[],h.cssTransitions=!1,h.hidden="hidden",h.paused=!1,h.positionProp=null,h.respondTo=null,h.rowCount=1,h.shouldClick=!0,h.$slider=a(b),h.$slidesCache=null,h.transformType=null,h.transitionType=null,h.visibilityChange="visibilitychange",h.windowWidth=0,h.windowTimer=null,e=a(b).data("slick")||{},h.options=a.extend({},h.defaults,e,d),h.currentSlide=h.options.initialSlide,h.originalSettings=h.options,f=h.options.responsive||null,f&&f.length>-1){h.respondTo=h.options.respondTo||"window";for(g in f)f.hasOwnProperty(g)&&(h.breakpoints.push(f[g].breakpoint),h.breakpointSettings[f[g].breakpoint]=f[g].settings);h.breakpoints.sort(function(a,b){return h.options.mobileFirst===!0?a-b:b-a})}"undefined"!=typeof document.mozHidden?(h.hidden="mozHidden",h.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(h.hidden="webkitHidden",h.visibilityChange="webkitvisibilitychange"),h.autoPlay=a.proxy(h.autoPlay,h),h.autoPlayClear=a.proxy(h.autoPlayClear,h),h.changeSlide=a.proxy(h.changeSlide,h),h.clickHandler=a.proxy(h.clickHandler,h),h.selectHandler=a.proxy(h.selectHandler,h),h.setPosition=a.proxy(h.setPosition,h),h.swipeHandler=a.proxy(h.swipeHandler,h),h.dragHandler=a.proxy(h.dragHandler,h),h.keyHandler=a.proxy(h.keyHandler,h),h.autoPlayIterator=a.proxy(h.autoPlayIterator,h),h.instanceUid=c++,h.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,h.init(!0),h.checkResponsive(!0)}var c=0;return b}(),b.prototype.addSlide=b.prototype.slickAdd=function(b,c,d){var e=this;if("boolean"==typeof c)d=c,c=null;else if(0>c||c>=e.slideCount)return!1;e.unload(),"number"==typeof c?0===c&&0===e.$slides.length?a(b).appendTo(e.$slideTrack):d?a(b).insertBefore(e.$slides.eq(c)):a(b).insertAfter(e.$slides.eq(c)):d===!0?a(b).prependTo(e.$slideTrack):a(b).appendTo(e.$slideTrack),e.$slides=e.$slideTrack.children(this.options.slide),e.$slideTrack.children(this.options.slide).detach(),e.$slideTrack.append(e.$slides),e.$slides.each(function(b,c){a(c).attr("data-slick-index",b)}),e.$slidesCache=e.$slides,e.reinit()},b.prototype.animateHeight=function(){var a=this;if(1===a.options.slidesToShow&&a.options.adaptiveHeight===!0&&a.options.vertical===!1){var b=a.$slides.eq(a.currentSlide).outerHeight(!0);a.$list.animate({height:b},a.options.speed)}},b.prototype.animateSlide=function(b,c){var d={},e=this;e.animateHeight(),e.options.rtl===!0&&e.options.vertical===!1&&(b=-b),e.transformsEnabled===!1?e.options.vertical===!1?e.$slideTrack.animate({left:b},e.options.speed,e.options.easing,c):e.$slideTrack.animate({top:b},e.options.speed,e.options.easing,c):e.cssTransitions===!1?(e.options.rtl===!0&&(e.currentLeft=-e.currentLeft),a({animStart:e.currentLeft}).animate({animStart:b},{duration:e.options.speed,easing:e.options.easing,step:function(a){a=Math.ceil(a),e.options.vertical===!1?(d[e.animType]="translate("+a+"px, 0px)",e.$slideTrack.css(d)):(d[e.animType]="translate(0px,"+a+"px)",e.$slideTrack.css(d))},complete:function(){c&&c.call()}})):(e.applyTransition(),b=Math.ceil(b),d[e.animType]=e.options.vertical===!1?"translate3d("+b+"px, 0px, 0px)":"translate3d(0px,"+b+"px, 0px)",e.$slideTrack.css(d),c&&setTimeout(function(){e.disableTransition(),c.call()},e.options.speed))},b.prototype.asNavFor=function(b){var c=this,d=c.options.asNavFor;d&&null!==d&&(d=a(d).not(c.$slider)),null!==d&&"object"==typeof d&&d.each(function(){var c=a(this).slick("getSlick");c.unslicked||c.slideHandler(b,!0)})},b.prototype.applyTransition=function(a){var b=this,c={};c[b.transitionType]=b.options.fade===!1?b.transformType+" "+b.options.speed+"ms "+b.options.cssEase:"opacity "+b.options.speed+"ms "+b.options.cssEase,b.options.fade===!1?b.$slideTrack.css(c):b.$slides.eq(a).css(c)},b.prototype.autoPlay=function(){var a=this;a.autoPlayTimer&&clearInterval(a.autoPlayTimer),a.slideCount>a.options.slidesToShow&&a.paused!==!0&&(a.autoPlayTimer=setInterval(a.autoPlayIterator,a.options.autoplaySpeed))},b.prototype.autoPlayClear=function(){var a=this;a.autoPlayTimer&&clearInterval(a.autoPlayTimer)},b.prototype.autoPlayIterator=function(){var a=this;a.options.infinite===!1?1===a.direction?(a.currentSlide+1===a.slideCount-1&&(a.direction=0),a.slideHandler(a.currentSlide+a.options.slidesToScroll)):(0===a.currentSlide-1&&(a.direction=1),a.slideHandler(a.currentSlide-a.options.slidesToScroll)):a.slideHandler(a.currentSlide+a.options.slidesToScroll)},b.prototype.buildArrows=function(){var b=this;b.options.arrows===!0&&b.slideCount>b.options.slidesToShow&&(b.$prevArrow=a(b.options.prevArrow),b.$nextArrow=a(b.options.nextArrow),b.htmlExpr.test(b.options.prevArrow)&&b.$prevArrow.appendTo(b.options.appendArrows),b.htmlExpr.test(b.options.nextArrow)&&b.$nextArrow.appendTo(b.options.appendArrows),b.options.infinite!==!0&&b.$prevArrow.addClass("slick-disabled"))},b.prototype.buildDots=function(){var b,c,d=this;if(d.options.dots===!0&&d.slideCount>d.options.slidesToShow){for(c='<ul class="'+d.options.dotsClass+'">',b=0;b<=d.getDotCount();b+=1)c+="<li>"+d.options.customPaging.call(this,d,b)+"</li>";c+="</ul>",d.$dots=a(c).appendTo(d.options.appendDots),d.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}},b.prototype.buildOut=function(){var b=this;b.$slides=b.$slider.children(":not(.slick-cloned)").addClass("slick-slide"),b.slideCount=b.$slides.length,b.$slides.each(function(b,c){a(c).attr("data-slick-index",b)}),b.$slidesCache=b.$slides,b.$slider.addClass("slick-slider"),b.$slideTrack=0===b.slideCount?a('<div class="slick-track"/>').appendTo(b.$slider):b.$slides.wrapAll('<div class="slick-track"/>').parent(),b.$list=b.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(),b.$slideTrack.css("opacity",0),(b.options.centerMode===!0||b.options.swipeToSlide===!0)&&(b.options.slidesToScroll=1),a("img[data-lazy]",b.$slider).not("[src]").addClass("slick-loading"),b.setupInfinite(),b.buildArrows(),b.buildDots(),b.updateDots(),b.options.accessibility===!0&&b.$list.prop("tabIndex",0),b.setSlideClasses("number"==typeof this.currentSlide?this.currentSlide:0),b.options.draggable===!0&&b.$list.addClass("draggable")},b.prototype.buildRows=function(){var a,b,c,d,e,f,g,h=this;if(d=document.createDocumentFragment(),f=h.$slider.children(),h.options.rows>1){for(g=h.options.slidesPerRow*h.options.rows,e=Math.ceil(f.length/g),a=0;e>a;a++){var i=document.createElement("div");for(b=0;b<h.options.rows;b++){var j=document.createElement("div");for(c=0;c<h.options.slidesPerRow;c++){var k=a*g+(b*h.options.slidesPerRow+c);f.get(k)&&j.appendChild(f.get(k))}i.appendChild(j)}d.appendChild(i)}h.$slider.html(d),h.$slider.children().children().children().width(100/h.options.slidesPerRow+"%").css({display:"inline-block"})}},b.prototype.checkResponsive=function(b){var c,d,e,f=this,g=!1,h=f.$slider.width(),i=window.innerWidth||a(window).width();if("window"===f.respondTo?e=i:"slider"===f.respondTo?e=h:"min"===f.respondTo&&(e=Math.min(i,h)),f.originalSettings.responsive&&f.originalSettings.responsive.length>-1&&null!==f.originalSettings.responsive){d=null;for(c in f.breakpoints)f.breakpoints.hasOwnProperty(c)&&(f.originalSettings.mobileFirst===!1?e<f.breakpoints[c]&&(d=f.breakpoints[c]):e>f.breakpoints[c]&&(d=f.breakpoints[c]));null!==d?null!==f.activeBreakpoint?d!==f.activeBreakpoint&&(f.activeBreakpoint=d,"unslick"===f.breakpointSettings[d]?f.unslick(d):(f.options=a.extend({},f.originalSettings,f.breakpointSettings[d]),b===!0&&(f.currentSlide=f.options.initialSlide),f.refresh()),g=d):(f.activeBreakpoint=d,"unslick"===f.breakpointSettings[d]?f.unslick(d):(f.options=a.extend({},f.originalSettings,f.breakpointSettings[d]),b===!0?f.currentSlide=f.options.initialSlide:f.refresh()),g=d):null!==f.activeBreakpoint&&(f.activeBreakpoint=null,f.options=f.originalSettings,b===!0&&(f.currentSlide=f.options.initialSlide),f.refresh(),g=d),b||g===!1||f.$slider.trigger("breakpoint",[f,g])}},b.prototype.changeSlide=function(b,c){var d,e,f,g=this,h=a(b.target);switch(h.is("a")&&b.preventDefault(),h.is("li")||(h=h.closest("li")),f=0!==g.slideCount%g.options.slidesToScroll,d=f?0:(g.slideCount-g.currentSlide)%g.options.slidesToScroll,b.data.message){case"previous":e=0===d?g.options.slidesToScroll:g.options.slidesToShow-d,g.slideCount>g.options.slidesToShow&&g.slideHandler(g.currentSlide-e,!1,c);break;case"next":e=0===d?g.options.slidesToScroll:d,g.slideCount>g.options.slidesToShow&&g.slideHandler(g.currentSlide+e,!1,c);break;case"index":var i=0===b.data.index?0:b.data.index||h.index()*g.options.slidesToScroll;g.slideHandler(g.checkNavigable(i),!1,c),h.children().trigger("focus");break;default:return}},b.prototype.checkNavigable=function(a){var b,c,d=this;if(b=d.getNavigableIndexes(),c=0,a>b[b.length-1])a=b[b.length-1];else for(var e in b){if(a<b[e]){a=c;break}c=b[e]}return a},b.prototype.cleanUpEvents=function(){var b=this;b.options.dots===!0&&b.slideCount>b.options.slidesToShow&&a("li",b.$dots).off("click.slick",b.changeSlide),b.options.dots===!0&&b.options.pauseOnDotsHover===!0&&b.options.autoplay===!0&&a("li",b.$dots).off("mouseenter.slick",a.proxy(b.setPaused,b,!0)).off("mouseleave.slick",a.proxy(b.setPaused,b,!1)),b.options.arrows===!0&&b.slideCount>b.options.slidesToShow&&(b.$prevArrow&&b.$prevArrow.off("click.slick",b.changeSlide),b.$nextArrow&&b.$nextArrow.off("click.slick",b.changeSlide)),b.$list.off("touchstart.slick mousedown.slick",b.swipeHandler),b.$list.off("touchmove.slick mousemove.slick",b.swipeHandler),b.$list.off("touchend.slick mouseup.slick",b.swipeHandler),b.$list.off("touchcancel.slick mouseleave.slick",b.swipeHandler),b.$list.off("click.slick",b.clickHandler),a(document).off(b.visibilityChange,b.visibility),b.$list.off("mouseenter.slick",a.proxy(b.setPaused,b,!0)),b.$list.off("mouseleave.slick",a.proxy(b.setPaused,b,!1)),b.options.accessibility===!0&&b.$list.off("keydown.slick",b.keyHandler),b.options.focusOnSelect===!0&&a(b.$slideTrack).children().off("click.slick",b.selectHandler),a(window).off("orientationchange.slick.slick-"+b.instanceUid,b.orientationChange),a(window).off("resize.slick.slick-"+b.instanceUid,b.resize),a("[draggable!=true]",b.$slideTrack).off("dragstart",b.preventDefault),a(window).off("load.slick.slick-"+b.instanceUid,b.setPosition),a(document).off("ready.slick.slick-"+b.instanceUid,b.setPosition)},b.prototype.cleanUpRows=function(){var a,b=this;b.options.rows>1&&(a=b.$slides.children().children(),a.removeAttr("style"),b.$slider.html(a))},b.prototype.clickHandler=function(a){var b=this;b.shouldClick===!1&&(a.stopImmediatePropagation(),a.stopPropagation(),a.preventDefault())},b.prototype.destroy=function(){var b=this;b.autoPlayClear(),b.touchObject={},b.cleanUpEvents(),a(".slick-cloned",b.$slider).detach(),b.$dots&&b.$dots.remove(),b.$prevArrow&&"object"!=typeof b.options.prevArrow&&b.$prevArrow.remove(),b.$nextArrow&&"object"!=typeof b.options.nextArrow&&b.$nextArrow.remove(),b.$slides&&(b.$slides.removeClass("slick-slide slick-active slick-center slick-visible").removeAttr("aria-hidden").removeAttr("data-slick-index").css({position:"",left:"",top:"",zIndex:"",opacity:"",width:""}),b.$slideTrack.children(this.options.slide).detach(),b.$slideTrack.detach(),b.$list.detach(),b.$slider.append(b.$slides)),b.cleanUpRows(),b.$slider.removeClass("slick-slider"),b.$slider.removeClass("slick-initialized"),b.unslicked=!0},b.prototype.disableTransition=function(a){var b=this,c={};c[b.transitionType]="",b.options.fade===!1?b.$slideTrack.css(c):b.$slides.eq(a).css(c)},b.prototype.fadeSlide=function(a,b){var c=this;c.cssTransitions===!1?(c.$slides.eq(a).css({zIndex:1e3}),c.$slides.eq(a).animate({opacity:1},c.options.speed,c.options.easing,b)):(c.applyTransition(a),c.$slides.eq(a).css({opacity:1,zIndex:1e3}),b&&setTimeout(function(){c.disableTransition(a),b.call()},c.options.speed))},b.prototype.filterSlides=b.prototype.slickFilter=function(a){var b=this;null!==a&&(b.unload(),b.$slideTrack.children(this.options.slide).detach(),b.$slidesCache.filter(a).appendTo(b.$slideTrack),b.reinit())},b.prototype.getCurrent=b.prototype.slickCurrentSlide=function(){var a=this;return a.currentSlide},b.prototype.getDotCount=function(){var a=this,b=0,c=0,d=0;if(a.options.infinite===!0)for(;b<a.slideCount;)++d,b=c+a.options.slidesToShow,c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;else if(a.options.centerMode===!0)d=a.slideCount;else for(;b<a.slideCount;)++d,b=c+a.options.slidesToShow,c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;return d-1},b.prototype.getLeft=function(a){var b,c,d,e=this,f=0;return e.slideOffset=0,c=e.$slides.first().outerHeight(),e.options.infinite===!0?(e.slideCount>e.options.slidesToShow&&(e.slideOffset=-1*e.slideWidth*e.options.slidesToShow,f=-1*c*e.options.slidesToShow),0!==e.slideCount%e.options.slidesToScroll&&a+e.options.slidesToScroll>e.slideCount&&e.slideCount>e.options.slidesToShow&&(a>e.slideCount?(e.slideOffset=-1*(e.options.slidesToShow-(a-e.slideCount))*e.slideWidth,f=-1*(e.options.slidesToShow-(a-e.slideCount))*c):(e.slideOffset=-1*e.slideCount%e.options.slidesToScroll*e.slideWidth,f=-1*e.slideCount%e.options.slidesToScroll*c))):a+e.options.slidesToShow>e.slideCount&&(e.slideOffset=(a+e.options.slidesToShow-e.slideCount)*e.slideWidth,f=(a+e.options.slidesToShow-e.slideCount)*c),e.slideCount<=e.options.slidesToShow&&(e.slideOffset=0,f=0),e.options.centerMode===!0&&e.options.infinite===!0?e.slideOffset+=e.slideWidth*Math.floor(e.options.slidesToShow/2)-e.slideWidth:e.options.centerMode===!0&&(e.slideOffset=0,e.slideOffset+=e.slideWidth*Math.floor(e.options.slidesToShow/2)),b=e.options.vertical===!1?-1*a*e.slideWidth+e.slideOffset:-1*a*c+f,e.options.variableWidth===!0&&(d=e.$slideTrack.children(".slick-slide").eq(e.slideCount<=e.options.slidesToShow||e.options.infinite===!1?a:a+e.options.slidesToShow),b=d[0]?-1*d[0].offsetLeft:0,e.options.centerMode===!0&&(d=e.$slideTrack.children(".slick-slide").eq(e.options.infinite===!1?a:a+e.options.slidesToShow+1),b=d[0]?-1*d[0].offsetLeft:0,b+=(e.$list.width()-d.outerWidth())/2)),b},b.prototype.getOption=b.prototype.slickGetOption=function(a){var b=this;return b.options[a]},b.prototype.getNavigableIndexes=function(){var a,b=this,c=0,d=0,e=[];for(b.options.infinite===!1?a=b.slideCount:(c=-1*b.options.slidesToScroll,d=-1*b.options.slidesToScroll,a=2*b.slideCount);a>c;)e.push(c),c=d+b.options.slidesToScroll,d+=b.options.slidesToScroll<=b.options.slidesToShow?b.options.slidesToScroll:b.options.slidesToShow;return e},b.prototype.getSlick=function(){return this},b.prototype.getSlideCount=function(){var b,c,d,e=this;return d=e.options.centerMode===!0?e.slideWidth*Math.floor(e.options.slidesToShow/2):0,e.options.swipeToSlide===!0?(e.$slideTrack.find(".slick-slide").each(function(b,f){return f.offsetLeft-d+a(f).outerWidth()/2>-1*e.swipeLeft?(c=f,!1):void 0}),b=Math.abs(a(c).attr("data-slick-index")-e.currentSlide)||1):e.options.slidesToScroll},b.prototype.goTo=b.prototype.slickGoTo=function(a,b){var c=this;c.changeSlide({data:{message:"index",index:parseInt(a)}},b)},b.prototype.init=function(b){var c=this;a(c.$slider).hasClass("slick-initialized")||(a(c.$slider).addClass("slick-initialized"),c.buildRows(),c.buildOut(),c.setProps(),c.startLoad(),c.loadSlider(),c.initializeEvents(),c.updateArrows(),c.updateDots()),b&&c.$slider.trigger("init",[c])},b.prototype.initArrowEvents=function(){var a=this;a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.on("click.slick",{message:"previous"},a.changeSlide),a.$nextArrow.on("click.slick",{message:"next"},a.changeSlide))},b.prototype.initDotEvents=function(){var b=this;b.options.dots===!0&&b.slideCount>b.options.slidesToShow&&a("li",b.$dots).on("click.slick",{message:"index"},b.changeSlide),b.options.dots===!0&&b.options.pauseOnDotsHover===!0&&b.options.autoplay===!0&&a("li",b.$dots).on("mouseenter.slick",a.proxy(b.setPaused,b,!0)).on("mouseleave.slick",a.proxy(b.setPaused,b,!1))},b.prototype.initializeEvents=function(){var b=this;b.initArrowEvents(),b.initDotEvents(),b.$list.on("touchstart.slick mousedown.slick",{action:"start"},b.swipeHandler),b.$list.on("touchmove.slick mousemove.slick",{action:"move"},b.swipeHandler),b.$list.on("touchend.slick mouseup.slick",{action:"end"},b.swipeHandler),b.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},b.swipeHandler),b.$list.on("click.slick",b.clickHandler),a(document).on(b.visibilityChange,a.proxy(b.visibility,b)),b.$list.on("mouseenter.slick",a.proxy(b.setPaused,b,!0)),b.$list.on("mouseleave.slick",a.proxy(b.setPaused,b,!1)),b.options.accessibility===!0&&b.$list.on("keydown.slick",b.keyHandler),b.options.focusOnSelect===!0&&a(b.$slideTrack).children().on("click.slick",b.selectHandler),a(window).on("orientationchange.slick.slick-"+b.instanceUid,a.proxy(b.orientationChange,b)),a(window).on("resize.slick.slick-"+b.instanceUid,a.proxy(b.resize,b)),a("[draggable!=true]",b.$slideTrack).on("dragstart",b.preventDefault),a(window).on("load.slick.slick-"+b.instanceUid,b.setPosition),a(document).on("ready.slick.slick-"+b.instanceUid,b.setPosition)},b.prototype.initUI=function(){var a=this;a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.show(),a.$nextArrow.show()),a.options.dots===!0&&a.slideCount>a.options.slidesToShow&&a.$dots.show(),a.options.autoplay===!0&&a.autoPlay()
},b.prototype.keyHandler=function(a){var b=this;37===a.keyCode&&b.options.accessibility===!0?b.changeSlide({data:{message:"previous"}}):39===a.keyCode&&b.options.accessibility===!0&&b.changeSlide({data:{message:"next"}})},b.prototype.lazyLoad=function(){function b(b){a("img[data-lazy]",b).each(function(){var b=a(this),c=a(this).attr("data-lazy"),d=document.createElement("img");d.onload=function(){b.animate({opacity:1},200)},d.src=c,b.css({opacity:0}).attr("src",c).removeAttr("data-lazy").removeClass("slick-loading")})}var c,d,e,f,g=this;g.options.centerMode===!0?g.options.infinite===!0?(e=g.currentSlide+(g.options.slidesToShow/2+1),f=e+g.options.slidesToShow+2):(e=Math.max(0,g.currentSlide-(g.options.slidesToShow/2+1)),f=2+(g.options.slidesToShow/2+1)+g.currentSlide):(e=g.options.infinite?g.options.slidesToShow+g.currentSlide:g.currentSlide,f=e+g.options.slidesToShow,g.options.fade===!0&&(e>0&&e--,f<=g.slideCount&&f++)),c=g.$slider.find(".slick-slide").slice(e,f),b(c),g.slideCount<=g.options.slidesToShow?(d=g.$slider.find(".slick-slide"),b(d)):g.currentSlide>=g.slideCount-g.options.slidesToShow?(d=g.$slider.find(".slick-cloned").slice(0,g.options.slidesToShow),b(d)):0===g.currentSlide&&(d=g.$slider.find(".slick-cloned").slice(-1*g.options.slidesToShow),b(d))},b.prototype.loadSlider=function(){var a=this;a.setPosition(),a.$slideTrack.css({opacity:1}),a.$slider.removeClass("slick-loading"),a.initUI(),"progressive"===a.options.lazyLoad&&a.progressiveLazyLoad()},b.prototype.next=b.prototype.slickNext=function(){var a=this;a.changeSlide({data:{message:"next"}})},b.prototype.orientationChange=function(){var a=this;a.checkResponsive(),a.setPosition()},b.prototype.pause=b.prototype.slickPause=function(){var a=this;a.autoPlayClear(),a.paused=!0},b.prototype.play=b.prototype.slickPlay=function(){var a=this;a.paused=!1,a.autoPlay()},b.prototype.postSlide=function(a){var b=this;b.$slider.trigger("afterChange",[b,a]),b.animating=!1,b.setPosition(),b.swipeLeft=null,b.options.autoplay===!0&&b.paused===!1&&b.autoPlay()},b.prototype.prev=b.prototype.slickPrev=function(){var a=this;a.changeSlide({data:{message:"previous"}})},b.prototype.preventDefault=function(a){a.preventDefault()},b.prototype.progressiveLazyLoad=function(){var b,c,d=this;b=a("img[data-lazy]",d.$slider).length,b>0&&(c=a("img[data-lazy]",d.$slider).first(),c.attr("src",c.attr("data-lazy")).removeClass("slick-loading").load(function(){c.removeAttr("data-lazy"),d.progressiveLazyLoad(),d.options.adaptiveHeight===!0&&d.setPosition()}).error(function(){c.removeAttr("data-lazy"),d.progressiveLazyLoad()}))},b.prototype.refresh=function(){var b=this,c=b.currentSlide;b.destroy(),a.extend(b,b.initials),b.init(),b.changeSlide({data:{message:"index",index:c}},!1)},b.prototype.reinit=function(){var b=this;b.$slides=b.$slideTrack.children(b.options.slide).addClass("slick-slide"),b.slideCount=b.$slides.length,b.currentSlide>=b.slideCount&&0!==b.currentSlide&&(b.currentSlide=b.currentSlide-b.options.slidesToScroll),b.slideCount<=b.options.slidesToShow&&(b.currentSlide=0),b.setProps(),b.setupInfinite(),b.buildArrows(),b.updateArrows(),b.initArrowEvents(),b.buildDots(),b.updateDots(),b.initDotEvents(),b.options.focusOnSelect===!0&&a(b.$slideTrack).children().on("click.slick",b.selectHandler),b.setSlideClasses(0),b.setPosition(),b.$slider.trigger("reInit",[b])},b.prototype.resize=function(){var b=this;a(window).width()!==b.windowWidth&&(clearTimeout(b.windowDelay),b.windowDelay=window.setTimeout(function(){b.windowWidth=a(window).width(),b.checkResponsive(),b.setPosition()},50))},b.prototype.removeSlide=b.prototype.slickRemove=function(a,b,c){var d=this;return"boolean"==typeof a?(b=a,a=b===!0?0:d.slideCount-1):a=b===!0?--a:a,d.slideCount<1||0>a||a>d.slideCount-1?!1:(d.unload(),c===!0?d.$slideTrack.children().remove():d.$slideTrack.children(this.options.slide).eq(a).remove(),d.$slides=d.$slideTrack.children(this.options.slide),d.$slideTrack.children(this.options.slide).detach(),d.$slideTrack.append(d.$slides),d.$slidesCache=d.$slides,void d.reinit())},b.prototype.setCSS=function(a){var b,c,d=this,e={};d.options.rtl===!0&&(a=-a),b="left"==d.positionProp?Math.ceil(a)+"px":"0px",c="top"==d.positionProp?Math.ceil(a)+"px":"0px",e[d.positionProp]=a,d.transformsEnabled===!1?d.$slideTrack.css(e):(e={},d.cssTransitions===!1?(e[d.animType]="translate("+b+", "+c+")",d.$slideTrack.css(e)):(e[d.animType]="translate3d("+b+", "+c+", 0px)",d.$slideTrack.css(e)))},b.prototype.setDimensions=function(){var a=this;a.options.vertical===!1?a.options.centerMode===!0&&a.$list.css({padding:"0px "+a.options.centerPadding}):(a.$list.height(a.$slides.first().outerHeight(!0)*a.options.slidesToShow),a.options.centerMode===!0&&a.$list.css({padding:a.options.centerPadding+" 0px"})),a.listWidth=a.$list.width(),a.listHeight=a.$list.height(),a.options.vertical===!1&&a.options.variableWidth===!1?(a.slideWidth=Math.ceil(a.listWidth/a.options.slidesToShow),a.$slideTrack.width(Math.ceil(a.slideWidth*a.$slideTrack.children(".slick-slide").length))):a.options.variableWidth===!0?a.$slideTrack.width(5e3*a.slideCount):(a.slideWidth=Math.ceil(a.listWidth),a.$slideTrack.height(Math.ceil(a.$slides.first().outerHeight(!0)*a.$slideTrack.children(".slick-slide").length)));var b=a.$slides.first().outerWidth(!0)-a.$slides.first().width();a.options.variableWidth===!1&&a.$slideTrack.children(".slick-slide").width(a.slideWidth-b)},b.prototype.setFade=function(){var b,c=this;c.$slides.each(function(d,e){b=-1*c.slideWidth*d,a(e).css(c.options.rtl===!0?{position:"relative",right:b,top:0,zIndex:800,opacity:0}:{position:"relative",left:b,top:0,zIndex:800,opacity:0})}),c.$slides.eq(c.currentSlide).css({zIndex:900,opacity:1})},b.prototype.setHeight=function(){var a=this;if(1===a.options.slidesToShow&&a.options.adaptiveHeight===!0&&a.options.vertical===!1){var b=a.$slides.eq(a.currentSlide).outerHeight(!0);a.$list.css("height",b)}},b.prototype.setOption=b.prototype.slickSetOption=function(a,b,c){var d=this;d.options[a]=b,c===!0&&(d.unload(),d.reinit())},b.prototype.setPosition=function(){var a=this;a.setDimensions(),a.setHeight(),a.options.fade===!1?a.setCSS(a.getLeft(a.currentSlide)):a.setFade(),a.$slider.trigger("setPosition",[a])},b.prototype.setProps=function(){var a=this,b=document.body.style;a.positionProp=a.options.vertical===!0?"top":"left","top"===a.positionProp?a.$slider.addClass("slick-vertical"):a.$slider.removeClass("slick-vertical"),(void 0!==b.WebkitTransition||void 0!==b.MozTransition||void 0!==b.msTransition)&&a.options.useCSS===!0&&(a.cssTransitions=!0),void 0!==b.OTransform&&(a.animType="OTransform",a.transformType="-o-transform",a.transitionType="OTransition",void 0===b.perspectiveProperty&&void 0===b.webkitPerspective&&(a.animType=!1)),void 0!==b.MozTransform&&(a.animType="MozTransform",a.transformType="-moz-transform",a.transitionType="MozTransition",void 0===b.perspectiveProperty&&void 0===b.MozPerspective&&(a.animType=!1)),void 0!==b.webkitTransform&&(a.animType="webkitTransform",a.transformType="-webkit-transform",a.transitionType="webkitTransition",void 0===b.perspectiveProperty&&void 0===b.webkitPerspective&&(a.animType=!1)),void 0!==b.msTransform&&(a.animType="msTransform",a.transformType="-ms-transform",a.transitionType="msTransition",void 0===b.msTransform&&(a.animType=!1)),void 0!==b.transform&&a.animType!==!1&&(a.animType="transform",a.transformType="transform",a.transitionType="transition"),a.transformsEnabled=null!==a.animType&&a.animType!==!1},b.prototype.setSlideClasses=function(a){var b,c,d,e,f=this;f.$slider.find(".slick-slide").removeClass("slick-active").attr("aria-hidden","true").removeClass("slick-center"),c=f.$slider.find(".slick-slide"),f.options.centerMode===!0?(b=Math.floor(f.options.slidesToShow/2),f.options.infinite===!0&&(a>=b&&a<=f.slideCount-1-b?f.$slides.slice(a-b,a+b+1).addClass("slick-active").attr("aria-hidden","false"):(d=f.options.slidesToShow+a,c.slice(d-b+1,d+b+2).addClass("slick-active").attr("aria-hidden","false")),0===a?c.eq(c.length-1-f.options.slidesToShow).addClass("slick-center"):a===f.slideCount-1&&c.eq(f.options.slidesToShow).addClass("slick-center")),f.$slides.eq(a).addClass("slick-center")):a>=0&&a<=f.slideCount-f.options.slidesToShow?f.$slides.slice(a,a+f.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):c.length<=f.options.slidesToShow?c.addClass("slick-active").attr("aria-hidden","false"):(e=f.slideCount%f.options.slidesToShow,d=f.options.infinite===!0?f.options.slidesToShow+a:a,f.options.slidesToShow==f.options.slidesToScroll&&f.slideCount-a<f.options.slidesToShow?c.slice(d-(f.options.slidesToShow-e),d+e).addClass("slick-active").attr("aria-hidden","false"):c.slice(d,d+f.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")),"ondemand"===f.options.lazyLoad&&f.lazyLoad()},b.prototype.setupInfinite=function(){var b,c,d,e=this;if(e.options.fade===!0&&(e.options.centerMode=!1),e.options.infinite===!0&&e.options.fade===!1&&(c=null,e.slideCount>e.options.slidesToShow)){for(d=e.options.centerMode===!0?e.options.slidesToShow+1:e.options.slidesToShow,b=e.slideCount;b>e.slideCount-d;b-=1)c=b-1,a(e.$slides[c]).clone(!0).attr("id","").attr("data-slick-index",c-e.slideCount).prependTo(e.$slideTrack).addClass("slick-cloned");for(b=0;d>b;b+=1)c=b,a(e.$slides[c]).clone(!0).attr("id","").attr("data-slick-index",c+e.slideCount).appendTo(e.$slideTrack).addClass("slick-cloned");e.$slideTrack.find(".slick-cloned").find("[id]").each(function(){a(this).attr("id","")})}},b.prototype.setPaused=function(a){var b=this;b.options.autoplay===!0&&b.options.pauseOnHover===!0&&(b.paused=a,a?b.autoPlayClear():b.autoPlay())},b.prototype.selectHandler=function(b){var c=this,d=a(b.target).is(".slick-slide")?a(b.target):a(b.target).parents(".slick-slide"),e=parseInt(d.attr("data-slick-index"));return e||(e=0),c.slideCount<=c.options.slidesToShow?(c.$slider.find(".slick-slide").removeClass("slick-active").attr("aria-hidden","true"),c.$slides.eq(e).addClass("slick-active").attr("aria-hidden","false"),c.options.centerMode===!0&&(c.$slider.find(".slick-slide").removeClass("slick-center"),c.$slides.eq(e).addClass("slick-center")),void c.asNavFor(e)):void c.slideHandler(e)},b.prototype.slideHandler=function(a,b,c){var d,e,f,g,h=null,i=this;return b=b||!1,i.animating===!0&&i.options.waitForAnimate===!0||i.options.fade===!0&&i.currentSlide===a||i.slideCount<=i.options.slidesToShow?void 0:(b===!1&&i.asNavFor(a),d=a,h=i.getLeft(d),g=i.getLeft(i.currentSlide),i.currentLeft=null===i.swipeLeft?g:i.swipeLeft,i.options.infinite===!1&&i.options.centerMode===!1&&(0>a||a>i.getDotCount()*i.options.slidesToScroll)?void(i.options.fade===!1&&(d=i.currentSlide,c!==!0?i.animateSlide(g,function(){i.postSlide(d)}):i.postSlide(d))):i.options.infinite===!1&&i.options.centerMode===!0&&(0>a||a>i.slideCount-i.options.slidesToScroll)?void(i.options.fade===!1&&(d=i.currentSlide,c!==!0?i.animateSlide(g,function(){i.postSlide(d)}):i.postSlide(d))):(i.options.autoplay===!0&&clearInterval(i.autoPlayTimer),e=0>d?0!==i.slideCount%i.options.slidesToScroll?i.slideCount-i.slideCount%i.options.slidesToScroll:i.slideCount+d:d>=i.slideCount?0!==i.slideCount%i.options.slidesToScroll?0:d-i.slideCount:d,i.animating=!0,i.$slider.trigger("beforeChange",[i,i.currentSlide,e]),f=i.currentSlide,i.currentSlide=e,i.setSlideClasses(i.currentSlide),i.updateDots(),i.updateArrows(),i.options.fade===!0?(c!==!0?i.fadeSlide(e,function(){i.postSlide(e)}):i.postSlide(e),void i.animateHeight()):void(c!==!0?i.animateSlide(h,function(){i.postSlide(e)}):i.postSlide(e))))},b.prototype.startLoad=function(){var a=this;a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.hide(),a.$nextArrow.hide()),a.options.dots===!0&&a.slideCount>a.options.slidesToShow&&a.$dots.hide(),a.$slider.addClass("slick-loading")},b.prototype.swipeDirection=function(){var a,b,c,d,e=this;return a=e.touchObject.startX-e.touchObject.curX,b=e.touchObject.startY-e.touchObject.curY,c=Math.atan2(b,a),d=Math.round(180*c/Math.PI),0>d&&(d=360-Math.abs(d)),45>=d&&d>=0?e.options.rtl===!1?"left":"right":360>=d&&d>=315?e.options.rtl===!1?"left":"right":d>=135&&225>=d?e.options.rtl===!1?"right":"left":e.options.verticalSwiping===!0?d>=35&&135>=d?"left":"right":"vertical"},b.prototype.swipeEnd=function(){var a,b=this;if(b.dragging=!1,b.shouldClick=b.touchObject.swipeLength>10?!1:!0,void 0===b.touchObject.curX)return!1;if(b.touchObject.edgeHit===!0&&b.$slider.trigger("edge",[b,b.swipeDirection()]),b.touchObject.swipeLength>=b.touchObject.minSwipe)switch(b.swipeDirection()){case"left":a=b.options.swipeToSlide?b.checkNavigable(b.currentSlide+b.getSlideCount()):b.currentSlide+b.getSlideCount(),b.slideHandler(a),b.currentDirection=0,b.touchObject={},b.$slider.trigger("swipe",[b,"left"]);break;case"right":a=b.options.swipeToSlide?b.checkNavigable(b.currentSlide-b.getSlideCount()):b.currentSlide-b.getSlideCount(),b.slideHandler(a),b.currentDirection=1,b.touchObject={},b.$slider.trigger("swipe",[b,"right"])}else b.touchObject.startX!==b.touchObject.curX&&(b.slideHandler(b.currentSlide),b.touchObject={})},b.prototype.swipeHandler=function(a){var b=this;if(!(b.options.swipe===!1||"ontouchend"in document&&b.options.swipe===!1||b.options.draggable===!1&&-1!==a.type.indexOf("mouse")))switch(b.touchObject.fingerCount=a.originalEvent&&void 0!==a.originalEvent.touches?a.originalEvent.touches.length:1,b.touchObject.minSwipe=b.listWidth/b.options.touchThreshold,b.options.verticalSwiping===!0&&(b.touchObject.minSwipe=b.listHeight/b.options.touchThreshold),a.data.action){case"start":b.swipeStart(a);break;case"move":b.swipeMove(a);break;case"end":b.swipeEnd(a)}},b.prototype.swipeMove=function(a){var b,c,d,e,f,g=this;return f=void 0!==a.originalEvent?a.originalEvent.touches:null,!g.dragging||f&&1!==f.length?!1:(b=g.getLeft(g.currentSlide),g.touchObject.curX=void 0!==f?f[0].pageX:a.clientX,g.touchObject.curY=void 0!==f?f[0].pageY:a.clientY,g.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(g.touchObject.curX-g.touchObject.startX,2))),g.options.verticalSwiping===!0&&(g.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(g.touchObject.curY-g.touchObject.startY,2)))),c=g.swipeDirection(),"vertical"!==c?(void 0!==a.originalEvent&&g.touchObject.swipeLength>4&&a.preventDefault(),e=(g.options.rtl===!1?1:-1)*(g.touchObject.curX>g.touchObject.startX?1:-1),g.options.verticalSwiping===!0&&(e=g.touchObject.curY>g.touchObject.startY?1:-1),d=g.touchObject.swipeLength,g.touchObject.edgeHit=!1,g.options.infinite===!1&&(0===g.currentSlide&&"right"===c||g.currentSlide>=g.getDotCount()&&"left"===c)&&(d=g.touchObject.swipeLength*g.options.edgeFriction,g.touchObject.edgeHit=!0),g.swipeLeft=g.options.vertical===!1?b+d*e:b+d*(g.$list.height()/g.listWidth)*e,g.options.verticalSwiping===!0&&(g.swipeLeft=b+d*e),g.options.fade===!0||g.options.touchMove===!1?!1:g.animating===!0?(g.swipeLeft=null,!1):void g.setCSS(g.swipeLeft)):void 0)},b.prototype.swipeStart=function(a){var b,c=this;return 1!==c.touchObject.fingerCount||c.slideCount<=c.options.slidesToShow?(c.touchObject={},!1):(void 0!==a.originalEvent&&void 0!==a.originalEvent.touches&&(b=a.originalEvent.touches[0]),c.touchObject.startX=c.touchObject.curX=void 0!==b?b.pageX:a.clientX,c.touchObject.startY=c.touchObject.curY=void 0!==b?b.pageY:a.clientY,void(c.dragging=!0))},b.prototype.unfilterSlides=b.prototype.slickUnfilter=function(){var a=this;null!==a.$slidesCache&&(a.unload(),a.$slideTrack.children(this.options.slide).detach(),a.$slidesCache.appendTo(a.$slideTrack),a.reinit())},b.prototype.unload=function(){var b=this;a(".slick-cloned",b.$slider).remove(),b.$dots&&b.$dots.remove(),b.$prevArrow&&"object"!=typeof b.options.prevArrow&&b.$prevArrow.remove(),b.$nextArrow&&"object"!=typeof b.options.nextArrow&&b.$nextArrow.remove(),b.$slides.removeClass("slick-slide slick-active slick-visible").attr("aria-hidden","true").css("width","")},b.prototype.unslick=function(a){var b=this;b.$slider.trigger("unslick",[b,a]),b.destroy()},b.prototype.updateArrows=function(){var a,b=this;a=Math.floor(b.options.slidesToShow/2),b.options.arrows===!0&&b.options.infinite!==!0&&b.slideCount>b.options.slidesToShow&&(b.$prevArrow.removeClass("slick-disabled"),b.$nextArrow.removeClass("slick-disabled"),0===b.currentSlide?(b.$prevArrow.addClass("slick-disabled"),b.$nextArrow.removeClass("slick-disabled")):b.currentSlide>=b.slideCount-b.options.slidesToShow&&b.options.centerMode===!1?(b.$nextArrow.addClass("slick-disabled"),b.$prevArrow.removeClass("slick-disabled")):b.currentSlide>=b.slideCount-1&&b.options.centerMode===!0&&(b.$nextArrow.addClass("slick-disabled"),b.$prevArrow.removeClass("slick-disabled")))},b.prototype.updateDots=function(){var a=this;null!==a.$dots&&(a.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),a.$dots.find("li").eq(Math.floor(a.currentSlide/a.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))},b.prototype.visibility=function(){var a=this;document[a.hidden]?(a.paused=!0,a.autoPlayClear()):a.options.autoplay===!0&&(a.paused=!1,a.autoPlay())},a.fn.slick=function(){var a,c=this,d=arguments[0],e=Array.prototype.slice.call(arguments,1),f=c.length,g=0;for(g;f>g;g++)if("object"==typeof d||"undefined"==typeof d?c[g].slick=new b(c[g],d):a=c[g].slick[d].apply(c[g].slick,e),"undefined"!=typeof a)return a;return c}}),function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.push,h=d.slice,i=d.concat,j=e.toString,k=e.hasOwnProperty,l=d.forEach,m=d.map,n=d.reduce,o=d.reduceRight,p=d.filter,q=d.every,r=d.some,s=d.indexOf,t=d.lastIndexOf,u=Array.isArray,v=Object.keys,w=f.bind,x=function(a){return a instanceof x?a:this instanceof x?void(this._wrapped=a):new x(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):a._=x,x.VERSION="1.6.0";var y=x.each=x.forEach=function(a,b,d){if(null==a)return a;if(l&&a.forEach===l)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;f>e;e++)if(b.call(d,a[e],e,a)===c)return}else for(var g=x.keys(a),e=0,f=g.length;f>e;e++)if(b.call(d,a[g[e]],g[e],a)===c)return;return a};x.map=x.collect=function(a,b,c){var d=[];return null==a?d:m&&a.map===m?a.map(b,c):(y(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)};var z="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),n&&a.reduce===n)return d&&(b=x.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(y(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(z);return c},x.reduceRight=x.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),o&&a.reduceRight===o)return d&&(b=x.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=x.keys(a);f=g.length}if(y(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(z);return c},x.find=x.detect=function(a,b,c){var d;return A(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},x.filter=x.select=function(a,b,c){var d=[];return null==a?d:p&&a.filter===p?a.filter(b,c):(y(a,function(a,e,f){b.call(c,a,e,f)&&d.push(a)}),d)},x.reject=function(a,b,c){return x.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},x.every=x.all=function(a,b,d){b||(b=x.identity);var e=!0;return null==a?e:q&&a.every===q?a.every(b,d):(y(a,function(a,f,g){return(e=e&&b.call(d,a,f,g))?void 0:c}),!!e)};var A=x.some=x.any=function(a,b,d){b||(b=x.identity);var e=!1;return null==a?e:r&&a.some===r?a.some(b,d):(y(a,function(a,f,g){return e||(e=b.call(d,a,f,g))?c:void 0}),!!e)};x.contains=x.include=function(a,b){return null==a?!1:s&&a.indexOf===s?-1!=a.indexOf(b):A(a,function(a){return a===b})},x.invoke=function(a,b){var c=h.call(arguments,2),d=x.isFunction(b);return x.map(a,function(a){return(d?b:a[b]).apply(a,c)})},x.pluck=function(a,b){return x.map(a,x.property(b))},x.where=function(a,b){return x.filter(a,x.matches(b))},x.findWhere=function(a,b){return x.find(a,x.matches(b))},x.max=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);var d=-1/0,e=-1/0;return y(a,function(a,f,g){var h=b?b.call(c,a,f,g):a;h>e&&(d=a,e=h)}),d},x.min=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);var d=1/0,e=1/0;return y(a,function(a,f,g){var h=b?b.call(c,a,f,g):a;e>h&&(d=a,e=h)}),d},x.shuffle=function(a){var b,c=0,d=[];return y(a,function(a){b=x.random(c++),d[c-1]=d[b],d[b]=a}),d},x.sample=function(a,b,c){return null==b||c?(a.length!==+a.length&&(a=x.values(a)),a[x.random(a.length-1)]):x.shuffle(a).slice(0,Math.max(0,b))};var B=function(a){return null==a?x.identity:x.isFunction(a)?a:x.property(a)};x.sortBy=function(a,b,c){return b=B(b),x.pluck(x.map(a,function(a,d,e){return{value:a,index:d,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var C=function(a){return function(b,c,d){var e={};return c=B(c),y(b,function(f,g){var h=c.call(d,f,g,b);a(e,h,f)}),e}};x.groupBy=C(function(a,b,c){x.has(a,b)?a[b].push(c):a[b]=[c]}),x.indexBy=C(function(a,b,c){a[b]=c}),x.countBy=C(function(a,b){x.has(a,b)?a[b]++:a[b]=1}),x.sortedIndex=function(a,b,c,d){c=B(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},x.toArray=function(a){return a?x.isArray(a)?h.call(a):a.length===+a.length?x.map(a,x.identity):x.values(a):[]},x.size=function(a){return null==a?0:a.length===+a.length?a.length:x.keys(a).length},x.first=x.head=x.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:0>b?[]:h.call(a,0,b)},x.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))},x.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:h.call(a,Math.max(a.length-b,0))},x.rest=x.tail=x.drop=function(a,b,c){return h.call(a,null==b||c?1:b)},x.compact=function(a){return x.filter(a,x.identity)};var D=function(a,b,c){return b&&x.every(a,x.isArray)?i.apply(c,a):(y(a,function(a){x.isArray(a)||x.isArguments(a)?b?g.apply(c,a):D(a,b,c):c.push(a)}),c)};x.flatten=function(a,b){return D(a,b,[])},x.without=function(a){return x.difference(a,h.call(arguments,1))},x.partition=function(a,b){var c=[],d=[];return y(a,function(a){(b(a)?c:d).push(a)}),[c,d]},x.uniq=x.unique=function(a,b,c,d){x.isFunction(b)&&(d=c,c=b,b=!1);var e=c?x.map(a,c,d):a,f=[],g=[];return y(e,function(c,d){(b?d&&g[g.length-1]===c:x.contains(g,c))||(g.push(c),f.push(a[d]))}),f},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(a){var b=h.call(arguments,1);return x.filter(x.uniq(a),function(a){return x.every(b,function(b){return x.contains(b,a)})})},x.difference=function(a){var b=i.apply(d,h.call(arguments,1));return x.filter(a,function(a){return!x.contains(b,a)})},x.zip=function(){for(var a=x.max(x.pluck(arguments,"length").concat(0)),b=new Array(a),c=0;a>c;c++)b[c]=x.pluck(arguments,""+c);return b},x.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},x.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=x.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(s&&a.indexOf===s)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},x.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(t&&a.lastIndexOf===t)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},x.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f};var E=function(){};x.bind=function(a,b){var c,d;if(w&&a.bind===w)return w.apply(a,h.call(arguments,1));if(!x.isFunction(a))throw new TypeError;return c=h.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(h.call(arguments)));E.prototype=a.prototype;var e=new E;E.prototype=null;var f=a.apply(e,c.concat(h.call(arguments)));return Object(f)===f?f:e}},x.partial=function(a){var b=h.call(arguments,1);return function(){for(var c=0,d=b.slice(),e=0,f=d.length;f>e;e++)d[e]===x&&(d[e]=arguments[c++]);for(;c<arguments.length;)d.push(arguments[c++]);return a.apply(this,d)}},x.bindAll=function(a){var b=h.call(arguments,1);if(0===b.length)throw new Error("bindAll must be passed function names");return y(b,function(b){a[b]=x.bind(a[b],a)}),a},x.memoize=function(a,b){var c={};return b||(b=x.identity),function(){var d=b.apply(this,arguments);return x.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},x.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},x.defer=function(a){return x.delay.apply(x,[a,1].concat(h.call(arguments,1)))},x.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:x.now(),g=null,f=a.apply(d,e),d=e=null};return function(){var j=x.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k?(clearTimeout(g),g=null,h=j,f=a.apply(d,e),d=e=null):g||c.trailing===!1||(g=setTimeout(i,k)),f}},x.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=x.now()-g;b>j?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),f=e=null))};return function(){f=this,e=arguments,g=x.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},x.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},x.wrap=function(a,b){return x.partial(b,a)},x.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},x.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},x.keys=function(a){if(!x.isObject(a))return[];if(v)return v(a);var b=[];for(var c in a)x.has(a,c)&&b.push(c);return b},x.values=function(a){for(var b=x.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},x.pairs=function(a){for(var b=x.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},x.invert=function(a){for(var b={},c=x.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},x.functions=x.methods=function(a){var b=[];for(var c in a)x.isFunction(a[c])&&b.push(c);return b.sort()},x.extend=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},x.pick=function(a){var b={},c=i.apply(d,h.call(arguments,1));return y(c,function(c){c in a&&(b[c]=a[c])}),b},x.omit=function(a){var b={},c=i.apply(d,h.call(arguments,1));for(var e in a)x.contains(c,e)||(b[e]=a[e]);return b},x.defaults=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a},x.clone=function(a){return x.isObject(a)?x.isArray(a)?a.slice():x.extend({},a):a},x.tap=function(a,b){return b(a),a};var F=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof x&&(a=a._wrapped),b instanceof x&&(b=b._wrapped);var e=j.call(a);if(e!=j.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;var g=a.constructor,h=b.constructor;if(g!==h&&!(x.isFunction(g)&&g instanceof g&&x.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1;c.push(a),d.push(b);var i=0,k=!0;if("[object Array]"==e){if(i=a.length,k=i==b.length)for(;i--&&(k=F(a[i],b[i],c,d)););}else{for(var l in a)if(x.has(a,l)&&(i++,!(k=x.has(b,l)&&F(a[l],b[l],c,d))))break;if(k){for(l in b)if(x.has(b,l)&&!i--)break;k=!i}}return c.pop(),d.pop(),k};x.isEqual=function(a,b){return F(a,b,[],[])},x.isEmpty=function(a){if(null==a)return!0;if(x.isArray(a)||x.isString(a))return 0===a.length;for(var b in a)if(x.has(a,b))return!1;return!0},x.isElement=function(a){return!(!a||1!==a.nodeType)},x.isArray=u||function(a){return"[object Array]"==j.call(a)},x.isObject=function(a){return a===Object(a)},y(["Arguments","Function","String","Number","Date","RegExp"],function(a){x["is"+a]=function(b){return j.call(b)=="[object "+a+"]"}}),x.isArguments(arguments)||(x.isArguments=function(a){return!(!a||!x.has(a,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(a){return"function"==typeof a}),x.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},x.isNaN=function(a){return x.isNumber(a)&&a!=+a},x.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==j.call(a)},x.isNull=function(a){return null===a},x.isUndefined=function(a){return void 0===a},x.has=function(a,b){return k.call(a,b)},x.noConflict=function(){return a._=b,this},x.identity=function(a){return a},x.constant=function(a){return function(){return a}},x.property=function(a){return function(b){return b[a]}},x.matches=function(a){return function(b){if(b===a)return!0;for(var c in a)if(a[c]!==b[c])return!1;return!0}},x.times=function(a,b,c){for(var d=Array(Math.max(0,a)),e=0;a>e;e++)d[e]=b.call(c,e);return d},x.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},x.now=Date.now||function(){return(new Date).getTime()};var G={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};G.unescape=x.invert(G.escape);var H={escape:new RegExp("["+x.keys(G.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(G.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(a){x[a]=function(b){return null==b?"":(""+b).replace(H[a],function(b){return G[a][b]})}}),x.result=function(a,b){if(null==a)return void 0;var c=a[b];return x.isFunction(c)?c.call(a):c},x.mixin=function(a){y(x.functions(a),function(b){var c=x[b]=a[b];x.prototype[b]=function(){var a=[this._wrapped];return g.apply(a,arguments),M.call(this,c.apply(x,a))}})};var I=0;x.uniqueId=function(a){var b=++I+"";return a?a+b:b},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var J=/(.)^/,K={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(a,b,c){var d;c=x.defaults({},c,x.templateSettings);var e=new RegExp([(c.escape||J).source,(c.interpolate||J).source,(c.evaluate||J).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(L,function(a){return"\\"+K[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,x);var i=function(a){return d.call(this,a,x)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},x.chain=function(a){return x(a).chain()};var M=function(a){return this._chain?x(a).chain():a};x.mixin(x),y(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];x.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],M.call(this,c)}}),y(["concat","join","slice"],function(a){var b=d[a];x.prototype[a]=function(){return M.call(this,b.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return x})}.call(this),console.log("underscore loaded"),function(a,b,c){function d(b,c){this.bodyOverflowX,this.callbacks={hide:[],show:[]},this.checkInterval=null,this.Content,this.$el=a(b),this.$elProxy,this.elProxyPosition,this.enabled=!0,this.options=a.extend({},i,c),this.mouseIsOverProxy=!1,this.namespace="tooltipster-"+Math.round(1e5*Math.random()),this.Status="hidden",this.timerHide=null,this.timerShow=null,this.$tooltip,this.options.iconTheme=this.options.iconTheme.replace(".",""),this.options.theme=this.options.theme.replace(".",""),this._init()
}function e(b,c){var d=!0;return a.each(b,function(a){return"undefined"==typeof c[a]||b[a]!==c[a]?(d=!1,!1):void 0}),d}function f(){return!k&&j}function g(){var a=c.body||c.documentElement,b=a.style,d="transition";if("string"==typeof b[d])return!0;v=["Moz","Webkit","Khtml","O","ms"],d=d.charAt(0).toUpperCase()+d.substr(1);for(var e=0;e<v.length;e++)if("string"==typeof b[v[e]+d])return!0;return!1}var h="tooltipster",i={animation:"fade",arrow:!0,arrowColor:"",autoClose:!0,content:null,contentAsHTML:!1,contentCloning:!0,debug:!0,delay:200,minWidth:0,maxWidth:null,functionInit:function(){},functionBefore:function(a,b){b()},functionReady:function(){},functionAfter:function(){},hideOnClick:!1,icon:"(?)",iconCloning:!0,iconDesktop:!1,iconTouch:!1,iconTheme:"tooltipster-icon",interactive:!1,interactiveTolerance:350,multiple:!1,offsetX:0,offsetY:0,onlyOne:!1,position:"top",positionTracker:!1,positionTrackerCallback:function(){"hover"==this.option("trigger")&&this.option("autoClose")&&this.hide()},restoration:"current",speed:350,timer:0,theme:"tooltipster-default",touchDevices:!0,trigger:"hover",updateAnimation:!0};d.prototype={_init:function(){var b=this;if(c.querySelector){var d=null;void 0===b.$el.data("tooltipster-initialTitle")&&(d=b.$el.attr("title"),void 0===d&&(d=null),b.$el.data("tooltipster-initialTitle",d)),b._content_set(null!==b.options.content?b.options.content:d);var e=b.options.functionInit.call(b.$el,b.$el,b.Content);"undefined"!=typeof e&&b._content_set(e),b.$el.removeAttr("title").addClass("tooltipstered"),!j&&b.options.iconDesktop||j&&b.options.iconTouch?("string"==typeof b.options.icon?(b.$elProxy=a('<span class="'+b.options.iconTheme+'"></span>'),b.$elProxy.text(b.options.icon)):b.$elProxy=b.options.iconCloning?b.options.icon.clone(!0):b.options.icon,b.$elProxy.insertAfter(b.$el)):b.$elProxy=b.$el,"hover"==b.options.trigger?(b.$elProxy.on("mouseenter."+b.namespace,function(){(!f()||b.options.touchDevices)&&(b.mouseIsOverProxy=!0,b._show())}).on("mouseleave."+b.namespace,function(){(!f()||b.options.touchDevices)&&(b.mouseIsOverProxy=!1)}),j&&b.options.touchDevices&&b.$elProxy.on("touchstart."+b.namespace,function(){b._showNow()})):"click"==b.options.trigger&&b.$elProxy.on("click."+b.namespace,function(){(!f()||b.options.touchDevices)&&b._show()})}},_show:function(){var a=this;"shown"!=a.Status&&"appearing"!=a.Status&&(a.options.delay?a.timerShow=setTimeout(function(){("click"==a.options.trigger||"hover"==a.options.trigger&&a.mouseIsOverProxy)&&a._showNow()},a.options.delay):a._showNow())},_showNow:function(c){var d=this;d.options.functionBefore.call(d.$el,d.$el,function(){if(d.enabled&&null!==d.Content){c&&d.callbacks.show.push(c),d.callbacks.hide=[],clearTimeout(d.timerShow),d.timerShow=null,clearTimeout(d.timerHide),d.timerHide=null,d.options.onlyOne&&a(".tooltipstered").not(d.$el).each(function(b,c){var d=a(c),e=d.data("tooltipster-ns");a.each(e,function(a,b){var c=d.data(b),e=c.status(),f=c.option("autoClose");"hidden"!==e&&"disappearing"!==e&&f&&c.hide()})});var e=function(){d.Status="shown",a.each(d.callbacks.show,function(a,b){b.call(d.$el)}),d.callbacks.show=[]};if("hidden"!==d.Status){var f=0;"disappearing"===d.Status?(d.Status="appearing",g()?(d.$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-"+d.options.animation+"-show"),d.options.speed>0&&d.$tooltip.delay(d.options.speed),d.$tooltip.queue(e)):d.$tooltip.stop().fadeIn(e)):"shown"===d.Status&&e()}else{d.Status="appearing";var f=d.options.speed;d.bodyOverflowX=a("body").css("overflow-x"),a("body").css("overflow-x","hidden");var h="tooltipster-"+d.options.animation,i="-webkit-transition-duration: "+d.options.speed+"ms; -webkit-animation-duration: "+d.options.speed+"ms; -moz-transition-duration: "+d.options.speed+"ms; -moz-animation-duration: "+d.options.speed+"ms; -o-transition-duration: "+d.options.speed+"ms; -o-animation-duration: "+d.options.speed+"ms; -ms-transition-duration: "+d.options.speed+"ms; -ms-animation-duration: "+d.options.speed+"ms; transition-duration: "+d.options.speed+"ms; animation-duration: "+d.options.speed+"ms;",k=d.options.minWidth?"min-width:"+Math.round(d.options.minWidth)+"px;":"",l=d.options.maxWidth?"max-width:"+Math.round(d.options.maxWidth)+"px;":"",m=d.options.interactive?"pointer-events: auto;":"";if(d.$tooltip=a('<div class="tooltipster-base '+d.options.theme+'" style="'+k+" "+l+" "+m+" "+i+'"><div class="tooltipster-content"></div></div>'),g()&&d.$tooltip.addClass(h),d._content_insert(),d.$tooltip.appendTo("body"),d.reposition(),d.options.functionReady.call(d.$el,d.$el,d.$tooltip),g()?(d.$tooltip.addClass(h+"-show"),d.options.speed>0&&d.$tooltip.delay(d.options.speed),d.$tooltip.queue(e)):d.$tooltip.css("display","none").fadeIn(d.options.speed,e),d._interval_set(),a(b).on("scroll."+d.namespace+" resize."+d.namespace,function(){d.reposition()}),d.options.autoClose)if(a("body").off("."+d.namespace),"hover"==d.options.trigger){if(j&&setTimeout(function(){a("body").on("touchstart."+d.namespace,function(){d.hide()})},0),d.options.interactive){j&&d.$tooltip.on("touchstart."+d.namespace,function(a){a.stopPropagation()});var n=null;d.$elProxy.add(d.$tooltip).on("mouseleave."+d.namespace+"-autoClose",function(){clearTimeout(n),n=setTimeout(function(){d.hide()},d.options.interactiveTolerance)}).on("mouseenter."+d.namespace+"-autoClose",function(){clearTimeout(n)})}else d.$elProxy.on("mouseleave."+d.namespace+"-autoClose",function(){d.hide()});d.options.hideOnClick&&d.$elProxy.on("click."+d.namespace+"-autoClose",function(){d.hide()})}else"click"==d.options.trigger&&(setTimeout(function(){a("body").on("click."+d.namespace+" touchstart."+d.namespace,function(){d.hide()})},0),d.options.interactive&&d.$tooltip.on("click."+d.namespace+" touchstart."+d.namespace,function(a){a.stopPropagation()}))}d.options.timer>0&&(d.timerHide=setTimeout(function(){d.timerHide=null,d.hide()},d.options.timer+f))}})},_interval_set:function(){var b=this;b.checkInterval=setInterval(function(){if(0===a("body").find(b.$el).length||0===a("body").find(b.$elProxy).length||"hidden"==b.Status||0===a("body").find(b.$tooltip).length)("shown"==b.Status||"appearing"==b.Status)&&b.hide(),b._interval_cancel();else if(b.options.positionTracker){var c=b._repositionInfo(b.$elProxy),d=!1;e(c.dimension,b.elProxyPosition.dimension)&&("fixed"===b.$elProxy.css("position")?e(c.position,b.elProxyPosition.position)&&(d=!0):e(c.offset,b.elProxyPosition.offset)&&(d=!0)),d||(b.reposition(),b.options.positionTrackerCallback.call(b,b.$el))}},200)},_interval_cancel:function(){clearInterval(this.checkInterval),this.checkInterval=null},_content_set:function(a){"object"==typeof a&&null!==a&&this.options.contentCloning&&(a=a.clone(!0)),this.Content=a},_content_insert:function(){var a=this,b=this.$tooltip.find(".tooltipster-content");"string"!=typeof a.Content||a.options.contentAsHTML?b.empty().append(a.Content):b.text(a.Content)},_update:function(a){var b=this;b._content_set(a),null!==b.Content?"hidden"!==b.Status&&(b._content_insert(),b.reposition(),b.options.updateAnimation&&(g()?(b.$tooltip.css({width:"","-webkit-transition":"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!=b.Status&&(b.$tooltip.removeClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!==b.Status&&b.$tooltip.css({"-webkit-transition":b.options.speed+"ms","-moz-transition":b.options.speed+"ms","-o-transition":b.options.speed+"ms","-ms-transition":b.options.speed+"ms",transition:b.options.speed+"ms"})},b.options.speed))},b.options.speed)):b.$tooltip.fadeTo(b.options.speed,.5,function(){"hidden"!=b.Status&&b.$tooltip.fadeTo(b.options.speed,1)}))):b.hide()},_repositionInfo:function(a){return{dimension:{height:a.outerHeight(!1),width:a.outerWidth(!1)},offset:a.offset(),position:{left:parseInt(a.css("left")),top:parseInt(a.css("top"))}}},hide:function(c){var d=this;c&&d.callbacks.hide.push(c),d.callbacks.show=[],clearTimeout(d.timerShow),d.timerShow=null,clearTimeout(d.timerHide),d.timerHide=null;var e=function(){a.each(d.callbacks.hide,function(a,b){b.call(d.$el)}),d.callbacks.hide=[]};if("shown"==d.Status||"appearing"==d.Status){d.Status="disappearing";var f=function(){d.Status="hidden","object"==typeof d.Content&&null!==d.Content&&d.Content.detach(),d.$tooltip.remove(),d.$tooltip=null,a(b).off("."+d.namespace),a("body").off("."+d.namespace).css("overflow-x",d.bodyOverflowX),a("body").off("."+d.namespace),d.$elProxy.off("."+d.namespace+"-autoClose"),d.options.functionAfter.call(d.$el,d.$el),e()};g()?(d.$tooltip.clearQueue().removeClass("tooltipster-"+d.options.animation+"-show").addClass("tooltipster-dying"),d.options.speed>0&&d.$tooltip.delay(d.options.speed),d.$tooltip.queue(f)):d.$tooltip.stop().fadeOut(d.options.speed,f)}else"hidden"==d.Status&&e();return d},show:function(a){return this._showNow(a),this},update:function(a){return this.content(a)},content:function(a){return"undefined"==typeof a?this.Content:(this._update(a),this)},reposition:function(){function c(){var c=a(b).scrollLeft();0>C-c&&(f=C-c,C=c),C+i-c>g&&(f=C-(g+c-i),C=g+c-i)}function d(c,d){h.offset.top-a(b).scrollTop()-j-F-12<0&&d.indexOf("top")>-1&&(H=c),h.offset.top+h.dimension.height+j+12+F>a(b).scrollTop()+a(b).height()&&d.indexOf("bottom")>-1&&(H=c,E=h.offset.top-j-F-12)}var e=this;if(0!==a("body").find(e.$tooltip).length){e.$tooltip.css("width",""),e.elProxyPosition=e._repositionInfo(e.$elProxy);var f=null,g=a(b).width(),h=e.elProxyPosition,i=e.$tooltip.outerWidth(!1),j=(e.$tooltip.innerWidth()+1,e.$tooltip.outerHeight(!1));if(e.$elProxy.is("area")){var k=e.$elProxy.attr("shape"),l=e.$elProxy.parent().attr("name"),m=a('img[usemap="#'+l+'"]'),n=m.offset().left,o=m.offset().top,p=void 0!==e.$elProxy.attr("coords")?e.$elProxy.attr("coords").split(","):void 0;if("circle"==k){var q=parseInt(p[0]),r=parseInt(p[1]),s=parseInt(p[2]);h.dimension.height=2*s,h.dimension.width=2*s,h.offset.top=o+r-s,h.offset.left=n+q-s}else if("rect"==k){var q=parseInt(p[0]),r=parseInt(p[1]),t=parseInt(p[2]),u=parseInt(p[3]);h.dimension.height=u-r,h.dimension.width=t-q,h.offset.top=o+r,h.offset.left=n+q}else if("poly"==k){for(var v=0,w=0,x=0,y=0,z="even",A=0;A<p.length;A++){var B=parseInt(p[A]);"even"==z?(B>x&&(x=B,0===A&&(v=x)),v>B&&(v=B),z="odd"):(B>y&&(y=B,1==A&&(w=y)),w>B&&(w=B),z="even")}h.dimension.height=y-w,h.dimension.width=x-v,h.offset.top=o+w,h.offset.left=n+v}else h.dimension.height=m.outerHeight(!1),h.dimension.width=m.outerWidth(!1),h.offset.top=o,h.offset.left=n}var C=0,D=0,E=0,F=parseInt(e.options.offsetY),G=parseInt(e.options.offsetX),H=e.options.position;if("top"==H){var I=h.offset.left+i-(h.offset.left+h.dimension.width);C=h.offset.left+G-I/2,E=h.offset.top-j-F-12,c(),d("bottom","top")}if("top-left"==H&&(C=h.offset.left+G,E=h.offset.top-j-F-12,c(),d("bottom-left","top-left")),"top-right"==H&&(C=h.offset.left+h.dimension.width+G-i,E=h.offset.top-j-F-12,c(),d("bottom-right","top-right")),"bottom"==H){var I=h.offset.left+i-(h.offset.left+h.dimension.width);C=h.offset.left-I/2+G,E=h.offset.top+h.dimension.height+F+12,c(),d("top","bottom")}if("bottom-left"==H&&(C=h.offset.left+G,E=h.offset.top+h.dimension.height+F+12,c(),d("top-left","bottom-left")),"bottom-right"==H&&(C=h.offset.left+h.dimension.width+G-i,E=h.offset.top+h.dimension.height+F+12,c(),d("top-right","bottom-right")),"left"==H){C=h.offset.left-G-i-12,D=h.offset.left+G+h.dimension.width+12;var J=h.offset.top+j-(h.offset.top+h.dimension.height);if(E=h.offset.top-J/2-F,0>C&&D+i>g){var K=2*parseFloat(e.$tooltip.css("border-width")),L=i+C-K;e.$tooltip.css("width",L+"px"),j=e.$tooltip.outerHeight(!1),C=h.offset.left-G-L-12-K,J=h.offset.top+j-(h.offset.top+h.dimension.height),E=h.offset.top-J/2-F}else 0>C&&(C=h.offset.left+G+h.dimension.width+12,f="left")}if("right"==H){C=h.offset.left+G+h.dimension.width+12,D=h.offset.left-G-i-12;var J=h.offset.top+j-(h.offset.top+h.dimension.height);if(E=h.offset.top-J/2-F,C+i>g&&0>D){var K=2*parseFloat(e.$tooltip.css("border-width")),L=g-C-K;e.$tooltip.css("width",L+"px"),j=e.$tooltip.outerHeight(!1),J=h.offset.top+j-(h.offset.top+h.dimension.height),E=h.offset.top-J/2-F}else C+i>g&&(C=h.offset.left-G-i-12,f="right")}if(e.options.arrow){var M="tooltipster-arrow-"+H;if(e.options.arrowColor.length<1)var N=e.$tooltip.css("background-color");else var N=e.options.arrowColor;if(f?"left"==f?(M="tooltipster-arrow-right",f=""):"right"==f?(M="tooltipster-arrow-left",f=""):f="left:"+Math.round(f)+"px;":f="","top"==H||"top-left"==H||"top-right"==H)var O=parseFloat(e.$tooltip.css("border-bottom-width")),P=e.$tooltip.css("border-bottom-color");else if("bottom"==H||"bottom-left"==H||"bottom-right"==H)var O=parseFloat(e.$tooltip.css("border-top-width")),P=e.$tooltip.css("border-top-color");else if("left"==H)var O=parseFloat(e.$tooltip.css("border-right-width")),P=e.$tooltip.css("border-right-color");else if("right"==H)var O=parseFloat(e.$tooltip.css("border-left-width")),P=e.$tooltip.css("border-left-color");else var O=parseFloat(e.$tooltip.css("border-bottom-width")),P=e.$tooltip.css("border-bottom-color");O>1&&O++;var Q="";if(0!==O){var R="",S="border-color: "+P+";";-1!==M.indexOf("bottom")?R="margin-top: -"+Math.round(O)+"px;":-1!==M.indexOf("top")?R="margin-bottom: -"+Math.round(O)+"px;":-1!==M.indexOf("left")?R="margin-right: -"+Math.round(O)+"px;":-1!==M.indexOf("right")&&(R="margin-left: -"+Math.round(O)+"px;"),Q='<span class="tooltipster-arrow-border" style="'+R+" "+S+';"></span>'}e.$tooltip.find(".tooltipster-arrow").remove();var T='<div class="'+M+' tooltipster-arrow" style="'+f+'">'+Q+'<span style="border-color:'+N+';"></span></div>';e.$tooltip.append(T)}e.$tooltip.css({top:Math.round(E)+"px",left:Math.round(C)+"px"})}return e},enable:function(){return this.enabled=!0,this},disable:function(){return this.hide(),this.enabled=!1,this},destroy:function(){var b=this;b.hide(),b.$el[0]!==b.$elProxy[0]&&b.$elProxy.remove(),b.$el.removeData(b.namespace).off("."+b.namespace);var c=b.$el.data("tooltipster-ns");if(1===c.length){var d=null;"previous"===b.options.restoration?d=b.$el.data("tooltipster-initialTitle"):"current"===b.options.restoration&&(d="string"==typeof b.Content?b.Content:a("<div></div>").append(b.Content).html()),d&&b.$el.attr("title",d),b.$el.removeClass("tooltipstered").removeData("tooltipster-ns").removeData("tooltipster-initialTitle")}else c=a.grep(c,function(a){return a!==b.namespace}),b.$el.data("tooltipster-ns",c);return b},elementIcon:function(){return this.$el[0]!==this.$elProxy[0]?this.$elProxy[0]:void 0},elementTooltip:function(){return this.$tooltip?this.$tooltip[0]:void 0},option:function(a,b){return"undefined"==typeof b?this.options[a]:(this.options[a]=b,this)},status:function(){return this.Status}},a.fn[h]=function(){var b=arguments;if(0===this.length){if("string"==typeof b[0]){var c=!0;switch(b[0]){case"setDefaults":a.extend(i,b[1]);break;default:c=!1}return c?!0:this}return this}if("string"==typeof b[0]){var e="#*$~&";return this.each(function(){var c=a(this).data("tooltipster-ns"),d=c?a(this).data(c[0]):null;if(!d)throw new Error("You called Tooltipster's \""+b[0]+'" method on an uninitialized element');if("function"!=typeof d[b[0]])throw new Error('Unknown method .tooltipster("'+b[0]+'")');var f=d[b[0]](b[1],b[2]);return f!==d?(e=f,!1):void 0}),"#*$~&"!==e?e:this}var f=[],g=b[0]&&"undefined"!=typeof b[0].multiple,h=g&&b[0].multiple||!g&&i.multiple,j=b[0]&&"undefined"!=typeof b[0].debug,k=j&&b[0].debug||!j&&i.debug;return this.each(function(){var c=!1,e=a(this).data("tooltipster-ns"),g=null;e?h?c=!0:k&&console.log('Tooltipster: one or more tooltips are already attached to this element: ignoring. Use the "multiple" option to attach more tooltips.'):c=!0,c&&(g=new d(this,b[0]),e||(e=[]),e.push(g.namespace),a(this).data("tooltipster-ns",e),a(this).data(g.namespace,g)),f.push(g)}),h?f:this};var j=!!("ontouchstart"in b),k=!1;a("body").one("mousemove",function(){k=!0})}(jQuery,window,document),!function(a){function b(){var a=document.createElement("smartbanner"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}var c=function(b){this.origHtmlMargin=parseFloat(a("html").css("margin-top")),this.options=a.extend({},a.smartbanner.defaults,b);var c=navigator.standalone,d=navigator.userAgent;if(this.options.force?this.type=this.options.force:null!=d.match(/Windows Phone 8/i)&&null!==d.match(/Touch/i)?this.type="windows":null!=d.match(/iPhone|iPod/i)||d.match(/iPad/)&&this.options.iOSUniversalApp?null!=d.match(/Safari/i)&&(null!=d.match(/CriOS/i)||window.Number(d.substr(d.indexOf("OS ")+3,3).replace("_","."))<6)&&(this.type="ios"):d.match(/\bSilk\/(.*\bMobile Safari\b)?/)||d.match(/\bKF\w/)||d.match("Kindle Fire")?this.type="kindle":null!=d.match(/Android/i)&&(this.type="android"),this.type&&!c&&!this.getCookie("sb-closed")&&!this.getCookie("sb-installed")){this.scale="auto"==this.options.scale?a(window).width()/window.screen.width:this.options.scale,this.scale<1&&(this.scale=1);var e=a("android"==this.type?'meta[name="google-play-app"]':"ios"==this.type?'meta[name="apple-itunes-app"]':"kindle"==this.type?'meta[name="kindle-fire-app"]':'meta[name="msApplication-ID"]');if(0!=e.length){if("windows"==this.type)this.appId=a('meta[name="msApplication-PackageFamilyName"]').attr("content");else{var f=/app-id=([^\s,]+)/.exec(e.attr("content"));if(!f)return;this.appId=f[1]}this.title=this.options.title?this.options.title:e.data("title")||a("title").text().replace(/\s*[|\-·].*$/,""),this.author=this.options.author?this.options.author:e.data("author")||(a('meta[name="author"]').length?a('meta[name="author"]').attr("content"):window.location.hostname),this.iconUrl=e.data("icon-url"),this.price=e.data("price"),this.create(),this.show(),this.listen()}}};c.prototype={constructor:c,create:function(){var b,c=this.options.url?this.options.url:("windows"==this.type?"ms-windows-store:navigate?appid=":"android"==this.type?"market://details?id=":"kindle"==this.type?"amzn://apps/android?asin=":"https://itunes.apple.com/"+this.options.appStoreLanguage+"/app/id")+this.appId,d=this.price||this.options.price,e=d?d+" - "+("android"==this.type?this.options.inGooglePlay:"kindle"==this.type?this.options.inAmazonAppStore:"ios"==this.type?this.options.inAppStore:this.options.inWindowsStore):"",f=null===this.options.iconGloss?"ios"==this.type:this.options.iconGloss;"android"==this.type&&this.options.GooglePlayParams&&(c=c+"&referrer="+this.options.GooglePlayParams);var g='<div id="smartbanner" class="'+this.type+'"><div class="sb-container"><a href="#" class="sb-close">&times;</a><span class="sb-icon"></span><div class="sb-info"><strong>'+this.title+"</strong><span>"+this.author+"</span><span>"+e+'</span></div><a href="'+c+'" class="sb-button"><span>'+this.options.button+"</span></a></div></div>";this.options.layer?a(this.options.appendToSelector).append(g):a(this.options.appendToSelector).prepend(g),this.options.icon?b=this.options.icon:this.iconUrl?b=this.iconUrl:a('link[rel="apple-touch-icon-precomposed"]').length>0?(b=a('link[rel="apple-touch-icon-precomposed"]').attr("href"),null===this.options.iconGloss&&(f=!1)):a('link[rel="apple-touch-icon"]').length>0?b=a('link[rel="apple-touch-icon"]').attr("href"):a('meta[name="msApplication-TileImage"]').length>0?b=a('meta[name="msApplication-TileImage"]').attr("content"):a('meta[name="msapplication-TileImage"]').length>0&&(b=a('meta[name="msapplication-TileImage"]').attr("content")),b?(a("#smartbanner .sb-icon").css("background-image","url("+b+")"),f&&a("#smartbanner .sb-icon").addClass("gloss")):a("#smartbanner").addClass("no-icon"),this.bannerHeight=a("#smartbanner").outerHeight()+2,this.scale>1&&(a("#smartbanner").css("top",parseFloat(a("#smartbanner").css("top"))*this.scale).css("height",parseFloat(a("#smartbanner").css("height"))*this.scale).hide(),a("#smartbanner .sb-container").css("-webkit-transform","scale("+this.scale+")").css("-msie-transform","scale("+this.scale+")").css("-moz-transform","scale("+this.scale+")").css("width",a(window).width()/this.scale)),a("#smartbanner").css("position",this.options.layer?"absolute":"static")},listen:function(){a("#smartbanner .sb-close").on("click",a.proxy(this.close,this)),a("#smartbanner .sb-button").on("click",a.proxy(this.install,this))},show:function(b){var c=a("#smartbanner");if(c.stop(),this.options.layer)c.animate({top:0,display:"block"},this.options.speedIn).addClass("shown").show(),a(this.pushSelector).animate({paddingTop:this.origHtmlMargin+this.bannerHeight*this.scale},this.options.speedIn,"swing",b);else if(a.support.transition){c.animate({top:0},this.options.speedIn).addClass("shown");var d=function(){a("html").removeClass("sb-animation"),b&&b()};a(this.pushSelector).addClass("sb-animation").one(a.support.transition.end,d).emulateTransitionEnd(this.options.speedIn).css("margin-top",this.origHtmlMargin+this.bannerHeight*this.scale)}else c.slideDown(this.options.speedIn).addClass("shown")},hide:function(b){var c=a("#smartbanner");if(c.stop(),this.options.layer)c.animate({top:-1*this.bannerHeight*this.scale,display:"block"},this.options.speedIn).removeClass("shown"),a(this.pushSelector).animate({paddingTop:this.origHtmlMargin},this.options.speedIn,"swing",b);else if(a.support.transition){"android"!==this.type?c.css("top",-1*this.bannerHeight*this.scale).removeClass("shown"):c.css({display:"none"}).removeClass("shown");var d=function(){a("html").removeClass("sb-animation"),b&&b()};a(this.pushSelector).addClass("sb-animation").one(a.support.transition.end,d).emulateTransitionEnd(this.options.speedOut).css("margin-top",this.origHtmlMargin)}else c.slideUp(this.options.speedOut).removeClass("shown")},close:function(a){a.preventDefault(),this.hide(),this.setCookie("sb-closed","true",this.options.daysHidden)},install:function(){this.options.hideOnInstall&&this.hide(),this.setCookie("sb-installed","true",this.options.daysReminder)},setCookie:function(a,b,c){var d=new Date;d.setDate(d.getDate()+c),b=encodeURI(b)+(null==c?"":"; expires="+d.toUTCString()),document.cookie=a+"="+b+"; path=/;"},getCookie:function(a){var b,c,d,e=document.cookie.split(";");for(b=0;b<e.length;b++)if(c=e[b].substr(0,e[b].indexOf("=")),d=e[b].substr(e[b].indexOf("=")+1),c=c.replace(/^\s+|\s+$/g,""),c==a)return decodeURI(d);return null},switchType:function(){var b=this;this.hide(function(){b.type="android"==b.type?"ios":"android";var c=a("android"==b.type?'meta[name="google-play-app"]':'meta[name="apple-itunes-app"]').attr("content");b.appId=/app-id=([^\s,]+)/.exec(c)[1],a("#smartbanner").detach(),b.create(),b.show()})}},a.smartbanner=function(b){var d=a(window),e=d.data("smartbanner"),f="object"==typeof b&&b;e||d.data("smartbanner",e=new c(f)),"string"==typeof b&&e[b]()},a.smartbanner.defaults={title:null,author:null,price:"FREE",appStoreLanguage:"us",inAppStore:"On the App Store",inGooglePlay:"In Google Play",inAmazonAppStore:"In the Amazon Appstore",inWindowsStore:"In the Windows Store",GooglePlayParams:null,icon:null,iconGloss:null,button:"VIEW",url:null,scale:"auto",speedIn:300,speedOut:400,daysHidden:15,daysReminder:90,force:null,hideOnInstall:!0,layer:!1,iOSUniversalApp:!0,appendToSelector:"body",pushSelector:"html"},a.smartbanner.Constructor=c,void 0===a.support.transition&&(a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one(a.support.transition.end,function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b()}))}(window.jQuery),function(){"use strict";function a(b,d){function e(a,b){return function(){return a.apply(b,arguments)}}var f;if(d=d||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=d.touchBoundary||10,this.layer=b,this.tapDelay=d.tapDelay||200,this.tapTimeout=d.tapTimeout||700,!a.notNeeded(b)){for(var g=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],h=this,i=0,j=g.length;j>i;i++)h[g[i]]=e(h[g[i]],h);c&&(b.addEventListener("mouseover",this.onMouse,!0),b.addEventListener("mousedown",this.onMouse,!0),b.addEventListener("mouseup",this.onMouse,!0)),b.addEventListener("click",this.onClick,!0),b.addEventListener("touchstart",this.onTouchStart,!1),b.addEventListener("touchmove",this.onTouchMove,!1),b.addEventListener("touchend",this.onTouchEnd,!1),b.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(b.removeEventListener=function(a,c,d){var e=Node.prototype.removeEventListener;"click"===a?e.call(b,a,c.hijacked||c,d):e.call(b,a,c,d)},b.addEventListener=function(a,c,d){var e=Node.prototype.addEventListener;"click"===a?e.call(b,a,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),d):e.call(b,a,c,d)}),"function"==typeof b.onclick&&(f=b.onclick,b.addEventListener("click",function(a){f(a)},!1),b.onclick=null)}}var b=navigator.userAgent.indexOf("Windows Phone")>=0,c=navigator.userAgent.indexOf("Android")>0&&!b,d=/iP(ad|hone|od)/.test(navigator.userAgent)&&!b,e=d&&/OS 4_\d(_\d)?/.test(navigator.userAgent),f=d&&/OS [6-7]_\d/.test(navigator.userAgent),g=navigator.userAgent.indexOf("BB10")>0;a.prototype.needsClick=function(a){switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled)return!0;break;case"input":if(d&&"file"===a.type||a.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(a.className)},a.prototype.needsFocus=function(a){switch(a.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!c;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}},a.prototype.sendClick=function(a,b){var c,d;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),d=b.changedTouches[0],c=document.createEvent("MouseEvents"),c.initMouseEvent(this.determineEventType(a),!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),c.forwardedTouchEvent=!0,a.dispatchEvent(c)},a.prototype.determineEventType=function(a){return c&&"select"===a.tagName.toLowerCase()?"mousedown":"click"},a.prototype.focus=function(a){var b;d&&a.setSelectionRange&&0!==a.type.indexOf("date")&&"time"!==a.type&&"month"!==a.type?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()},a.prototype.updateScrollParent=function(a){var b,c;if(b=a.fastClickScrollParent,!b||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c,a.fastClickScrollParent=c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)},a.prototype.getTargetElementFromEventTarget=function(a){return a.nodeType===Node.TEXT_NODE?a.parentNode:a},a.prototype.onTouchStart=function(a){var b,c,f;if(a.targetTouches.length>1)return!0;if(b=this.getTargetElementFromEventTarget(a.target),c=a.targetTouches[0],d){if(f=window.getSelection(),f.rangeCount&&!f.isCollapsed)return!0;if(!e){if(c.identifier&&c.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=c.identifier,this.updateScrollParent(b)}}return this.trackingClick=!0,this.trackingClickStart=a.timeStamp,this.targetElement=b,this.touchStartX=c.pageX,this.touchStartY=c.pageY,a.timeStamp-this.lastClickTime<this.tapDelay&&a.preventDefault(),!0},a.prototype.touchHasMoved=function(a){var b=a.changedTouches[0],c=this.touchBoundary;return Math.abs(b.pageX-this.touchStartX)>c||Math.abs(b.pageY-this.touchStartY)>c?!0:!1},a.prototype.onTouchMove=function(a){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},a.prototype.findControl=function(a){return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},a.prototype.onTouchEnd=function(a){var b,g,h,i,j,k=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(a.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=a.timeStamp,g=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,f&&(j=a.changedTouches[0],k=document.elementFromPoint(j.pageX-window.pageXOffset,j.pageY-window.pageYOffset)||k,k.fastClickScrollParent=this.targetElement.fastClickScrollParent),h=k.tagName.toLowerCase(),"label"===h){if(b=this.findControl(k)){if(this.focus(k),c)return!1;k=b}}else if(this.needsFocus(k))return a.timeStamp-g>100||d&&window.top!==window&&"input"===h?(this.targetElement=null,!1):(this.focus(k),this.sendClick(k,a),d&&"select"===h||(this.targetElement=null,a.preventDefault()),!1);return d&&!e&&(i=k.fastClickScrollParent,i&&i.fastClickLastScrollTop!==i.scrollTop)?!0:(this.needsClick(k)||(a.preventDefault(),this.sendClick(k,a)),!1)},a.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},a.prototype.onMouse=function(a){return this.targetElement?a.forwardedTouchEvent?!0:a.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1):!0:!0},a.prototype.onClick=function(a){var b;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===a.target.type&&0===a.detail?!0:(b=this.onMouse(a),b||(this.targetElement=null),b)},a.prototype.destroy=function(){var a=this.layer;c&&(a.removeEventListener("mouseover",this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0)),a.removeEventListener("click",this.onClick,!0),a.removeEventListener("touchstart",this.onTouchStart,!1),a.removeEventListener("touchmove",this.onTouchMove,!1),a.removeEventListener("touchend",this.onTouchEnd,!1),a.removeEventListener("touchcancel",this.onTouchCancel,!1)},a.notNeeded=function(a){var b,d,e;if("undefined"==typeof window.ontouchstart)return!0;if(d=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!c)return!0;if(b=document.querySelector("meta[name=viewport]")){if(-1!==b.content.indexOf("user-scalable=no"))return!0;if(d>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(g&&(e=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),e[1]>=10&&e[2]>=3&&(b=document.querySelector("meta[name=viewport]")))){if(-1!==b.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===a.style.msTouchAction?!0:"none"===a.style.touchAction?!0:!1},a.attach=function(b,c){return new a(b,c)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return a}):"undefined"!=typeof module&&module.exports?(module.exports=a.attach,module.exports.FastClick=a):window.FastClick=a}(),function(a,b){"use strict";function c(){function a(a,c){return b.extend(Object.create(a),c)}function c(a,b){var c=b.caseInsensitiveMatch,d={originalPath:a,regexp:a},e=d.keys=[];return a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(a,b,c,d){var f="?"===d?d:null,g="*"===d?d:null;return e.push({name:c,optional:!!f}),b=b||"",""+(f?"":b)+"(?:"+(f?b:"")+(g&&"(.+?)"||"([^/]+)")+(f||"")+")"+(f||"")}).replace(/([\/$\*])/g,"\\$1"),d.regexp=new RegExp("^"+a+"$",c?"i":""),d}var d={};
this.when=function(a,e){var f=b.copy(e);if(b.isUndefined(f.reloadOnSearch)&&(f.reloadOnSearch=!0),b.isUndefined(f.caseInsensitiveMatch)&&(f.caseInsensitiveMatch=this.caseInsensitiveMatch),d[a]=b.extend(f,a&&c(a,f)),a){var g="/"==a[a.length-1]?a.substr(0,a.length-1):a+"/";d[g]=b.extend({redirectTo:a},c(g,f))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(a){return"string"==typeof a&&(a={redirectTo:a}),this.when(null,a),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(c,e,f,g,i,j,k){function l(a,b){var c=b.keys,d={};if(!b.regexp)return null;var e=b.regexp.exec(a);if(!e)return null;for(var f=1,g=e.length;g>f;++f){var h=c[f-1],i=e[f];h&&i&&(d[h.name]=i)}return d}function m(a){var d=t.current;q=o(),r=q&&d&&q.$$route===d.$$route&&b.equals(q.pathParams,d.pathParams)&&!q.reloadOnSearch&&!s,r||!d&&!q||c.$broadcast("$routeChangeStart",q,d).defaultPrevented&&a&&a.preventDefault()}function n(){var a=t.current,d=q;r?(a.params=d.params,b.copy(a.params,f),c.$broadcast("$routeUpdate",a)):(d||a)&&(s=!1,t.current=d,d&&d.redirectTo&&(b.isString(d.redirectTo)?e.path(p(d.redirectTo,d.params)).search(d.params).replace():e.url(d.redirectTo(d.pathParams,e.path(),e.search())).replace()),g.when(d).then(function(){if(d){var a,c,e=b.extend({},d.resolve);return b.forEach(e,function(a,c){e[c]=b.isString(a)?i.get(a):i.invoke(a,null,null,c)}),b.isDefined(a=d.template)?b.isFunction(a)&&(a=a(d.params)):b.isDefined(c=d.templateUrl)&&(b.isFunction(c)&&(c=c(d.params)),c=k.getTrustedResourceUrl(c),b.isDefined(c)&&(d.loadedTemplateUrl=c,a=j(c))),b.isDefined(a)&&(e.$template=a),g.all(e)}}).then(function(e){d==t.current&&(d&&(d.locals=e,b.copy(d.params,f)),c.$broadcast("$routeChangeSuccess",d,a))},function(b){d==t.current&&c.$broadcast("$routeChangeError",d,a,b)}))}function o(){var c,f;return b.forEach(d,function(d){!f&&(c=l(e.path(),d))&&(f=a(d,{params:b.extend({},e.search(),c),pathParams:c}),f.$$route=d)}),f||d[null]&&a(d[null],{params:{},pathParams:{}})}function p(a,c){var d=[];return b.forEach((a||"").split(":"),function(a,b){if(0===b)d.push(a);else{var e=a.match(/(\w+)(?:[?*])?(.*)/),f=e[1];d.push(c[f]),d.push(e[2]||""),delete c[f]}}),d.join("")}var q,r,s=!1,t={routes:d,reload:function(){s=!0,c.$evalAsync(function(){m(),n()})},updateParams:function(a){if(!this.current||!this.current.$$route)throw h("norout","Tried updating route when with no current route");a=b.extend({},this.current.params,a),e.path(p(this.current.$$route.originalPath,a)),e.search(a)}};return c.$on("$locationChangeStart",m),c.$on("$locationChangeSuccess",n),t}]}function d(){this.$get=function(){return{}}}function e(a,c,d){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(e,f,g,h,i){function j(){n&&(d.cancel(n),n=null),l&&(l.$destroy(),l=null),m&&(n=d.leave(m),n.then(function(){n=null}),m=null)}function k(){var g=a.current&&a.current.locals,h=g&&g.$template;if(b.isDefined(h)){var k=e.$new(),n=a.current,q=i(k,function(a){d.enter(a,null,m||f).then(function(){!b.isDefined(o)||o&&!e.$eval(o)||c()}),j()});m=q,l=n.scope=k,l.$emit("$viewContentLoaded"),l.$eval(p)}else j()}var l,m,n,o=g.autoscroll,p=g.onload||"";e.$on("$routeChangeSuccess",k),k()}}}function f(a,b,c){return{restrict:"ECA",priority:-400,link:function(d,e){var f=c.current,g=f.locals;e.html(g.$template);var h=a(e.contents());if(f.controller){g.$scope=d;var i=b(f.controller,g);f.controllerAs&&(d[f.controllerAs]=i),e.data("$ngControllerController",i),e.children().data("$ngControllerController",i)}h(d)}}}var g=b.module("ngRoute",["ng"]).provider("$route",c),h=b.$$minErr("ngRoute");g.provider("$routeParams",d),g.directive("ngView",e),g.directive("ngView",f),e.$inject=["$route","$anchorScroll","$animate"],f.$inject=["$compile","$controller","$route"]}(window,window.angular),function(a,b,c){"use strict";b.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){var a="$$ngAnimateChildren";return function(c,d,e){var f=e.ngAnimateChildren;b.isString(f)&&0===f.length?d.data(a,!0):c.$watch(f,function(b){d.data(a,!!b)})}}).factory("$$animateReflow",["$$rAF","$document",function(a,b){var c=b[0].body;return function(b){return a(function(){c.offsetWidth+1;b()})}}]).config(["$provide","$animateProvider",function(d,e){function f(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.nodeType==q)return c}}function g(a){return a&&b.element(a)}function h(a){return b.element(f(a))}function i(a,b){return f(a)==f(b)}var j,k=b.noop,l=b.forEach,m=e.$$selectors,n=b.isArray,o=b.isString,p=b.isObject,q=1,r="$$ngAnimateState",s="$$ngAnimateChildren",t="ng-animate",u={running:!0};d.decorator("$animate",["$delegate","$$q","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document","$templateRequest","$$jqLite",function(a,c,d,q,v,w,x,y,z,A){function B(a,b){var c=a.data(r)||{};return b&&(c.running=!0,c.structural=!0,a.data(r,c)),c.disabled||c.running&&c.structural}function C(a){var b,d=c.defer();return d.promise.$$cancelFn=function(){b&&b()},x.$$postDigest(function(){b=a(function(){d.resolve()})}),d.promise}function D(a){return p(a)?(a.tempClasses&&o(a.tempClasses)&&(a.tempClasses=a.tempClasses.split(/\s+/)),a):void 0}function E(a,b,c){c=c||{};var d={};l(c,function(a,b){l(b.split(" "),function(b){d[b]=a})});var e=Object.create(null);l((a.attr("class")||"").split(/\s+/),function(a){e[a]=!0});var f=[],g=[];return l(b&&b.classes||[],function(a,b){var c=e[b],h=d[b]||{};a===!1?(c||"addClass"==h.event)&&g.push(b):a===!0&&(c&&"removeClass"!=h.event||f.push(b))}),f.length+g.length>0&&[f.join(" "),g.join(" ")]}function F(a){if(a){var b=[],c={},e=a.substr(1).split(".");(q.transitions||q.animations)&&b.push(d.get(m[""]));for(var f=0;f<e.length;f++){var g=e[f],h=m[g];h&&!c[g]&&(b.push(d.get(h)),c[g]=!0)}return b}}function G(a,c,d,e){function f(a,b){var c=a[b],d=a["before"+b.charAt(0).toUpperCase()+b.substr(1)];return c||d?("leave"==b&&(d=c,c=null),w.push({event:b,fn:c}),t.push({event:b,fn:d}),!0):void 0}function g(b,c,f){function g(a){if(c){if((c[a]||k)(),++m<h.length)return;c=null}f()}var h=[];l(b,function(a){a.fn&&h.push(a)});var m=0;l(h,function(b,f){var h=function(){g(f)};switch(b.event){case"setClass":c.push(b.fn(a,i,j,h,e));break;case"animate":c.push(b.fn(a,d,e.from,e.to,h));break;case"addClass":c.push(b.fn(a,i||d,h,e));break;case"removeClass":c.push(b.fn(a,j||d,h,e));break;default:c.push(b.fn(a,h,e))}}),c&&0===c.length&&f()}var h=a[0];if(h){e&&(e.to=e.to||{},e.from=e.from||{});var i,j;n(d)&&(i=d[0],j=d[1],i?j?d=i+" "+j:(d=i,c="addClass"):(d=j,c="removeClass"));var m="setClass"==c,o=m||"addClass"==c||"removeClass"==c||"animate"==c,p=a.attr("class"),q=p+" "+d;if(O(q)){var r=k,s=[],t=[],u=k,v=[],w=[],x=(" "+q).replace(/\s+/g,".");return l(F(x),function(a){var b=f(a,c);!b&&m&&(f(a,"addClass"),f(a,"removeClass"))}),{node:h,event:c,className:d,isClassBased:o,isSetClassOperation:m,applyStyles:function(){e&&a.css(b.extend(e.from||{},e.to||{}))},before:function(a){r=a,g(t,s,function(){r=k,a()})},after:function(a){u=a,g(w,v,function(){u=k,a()})},cancel:function(){s&&(l(s,function(a){(a||k)(!0)}),r(!0)),v&&(l(v,function(a){(a||k)(!0)}),u(!0))}}}}}function H(a,c,d,e,f,g,h,i){function m(b){var e="$animate:"+b;x&&x[e]&&x[e].length>0&&w(function(){d.triggerHandler(e,{event:a,className:c})})}function n(){m("before")}function o(){m("after")}function p(){m("close"),i()}function q(){q.hasBeenRun||(q.hasBeenRun=!0,g())}function s(){if(!s.hasBeenRun){v&&v.applyStyles(),s.hasBeenRun=!0,h&&h.tempClasses&&l(h.tempClasses,function(a){j.removeClass(d,a)});var b=d.data(r);b&&(v&&v.isClassBased?J(d,c):(w(function(){var b=d.data(r)||{};H==b.index&&J(d,c,a)}),d.data(r,b))),p()}}var u=k,v=G(d,a,c,h);if(!v)return q(),n(),o(),s(),u;a=v.event,c=v.className;var x=b.element._data(v.node);if(x=x&&x.events,e||(e=f?f.parent():d.parent()),K(d,e))return q(),n(),o(),s(),u;var y=d.data(r)||{},z=y.active||{},A=y.totalActive||0,B=y.last,C=!1;if(A>0){var D=[];if(v.isClassBased){if("setClass"==B.event)D.push(B),J(d,c);else if(z[c]){var E=z[c];E.event==a?C=!0:(D.push(E),J(d,c))}}else if("leave"==a&&z["ng-leave"])C=!0;else{for(var F in z)D.push(z[F]);y={},J(d,!0)}D.length>0&&l(D,function(a){a.cancel()})}if(!v.isClassBased||v.isSetClassOperation||"animate"==a||C||(C="addClass"==a==d.hasClass(c)),C)return q(),n(),o(),p(),u;z=y.active||{},A=y.totalActive||0,"leave"==a&&d.one("$destroy",function(){var a=b.element(this),c=a.data(r);if(c){var d=c.active["ng-leave"];d&&(d.cancel(),J(a,"ng-leave"))}}),j.addClass(d,t),h&&h.tempClasses&&l(h.tempClasses,function(a){j.addClass(d,a)});var H=M++;return A++,z[c]=v,d.data(r,{last:v,active:z,index:H,totalActive:A}),n(),v.before(function(b){var e=d.data(r);b=b||!e||!e.active[c]||v.isClassBased&&e.active[c].event!=a,q(),b===!0?s():(o(),v.after(s))}),v.cancel}function I(a){var c=f(a);if(c){var d=b.isFunction(c.getElementsByClassName)?c.getElementsByClassName(t):c.querySelectorAll("."+t);l(d,function(a){a=b.element(a);var c=a.data(r);c&&c.active&&l(c.active,function(a){a.cancel()})})}}function J(a,b){if(i(a,v))u.disabled||(u.running=!1,u.structural=!1);else if(b){var c=a.data(r)||{},d=b===!0;!d&&c.active&&c.active[b]&&(c.totalActive--,delete c.active[b]),(d||!c.totalActive)&&(j.removeClass(a,t),a.removeData(r))}}function K(a,c){if(u.disabled)return!0;if(i(a,v))return u.running;var d,e,f;do{if(0===c.length)break;var g=i(c,v),h=g?u:c.data(r)||{};if(h.disabled)return!0;if(g&&(f=!0),d!==!1){var j=c.data(s);b.isDefined(j)&&(d=j)}e=e||h.running||h.last&&!h.last.isClassBased}while(c=c.parent());return!f||!d&&e}j=A,v.data(r,u);var L=x.$watch(function(){return z.totalPendingRequests},function(a){0===a&&(L(),x.$$postDigest(function(){x.$$postDigest(function(){u.running=!1})}))}),M=0,N=e.classNameFilter(),O=N?function(a){return N.test(a)}:function(){return!0};return{animate:function(a,b,c,d,e){return d=d||"ng-inline-animate",e=D(e)||{},e.from=c?b:null,e.to=c?c:b,C(function(b){return H("animate",d,h(a),null,null,k,e,b)})},enter:function(c,d,e,f){return f=D(f),c=b.element(c),d=g(d),e=g(e),B(c,!0),a.enter(c,d,e),C(function(a){return H("enter","ng-enter",h(c),d,e,k,f,a)})},leave:function(c,d){return d=D(d),c=b.element(c),I(c),B(c,!0),C(function(b){return H("leave","ng-leave",h(c),null,null,function(){a.leave(c)},d,b)})},move:function(c,d,e,f){return f=D(f),c=b.element(c),d=g(d),e=g(e),I(c),B(c,!0),a.move(c,d,e),C(function(a){return H("move","ng-move",h(c),d,e,k,f,a)})},addClass:function(a,b,c){return this.setClass(a,b,[],c)},removeClass:function(a,b,c){return this.setClass(a,[],b,c)},setClass:function(c,d,e,g){g=D(g);var i="$$animateClasses";if(c=b.element(c),c=h(c),B(c))return a.$$setClassImmediately(c,d,e,g);var j,k=c.data(i),m=!!k;return k||(k={},k.classes={}),j=k.classes,d=n(d)?d:d.split(" "),l(d,function(a){a&&a.length&&(j[a]=!0)}),e=n(e)?e:e.split(" "),l(e,function(a){a&&a.length&&(j[a]=!1)}),m?(g&&k.options&&(k.options=b.extend(k.options||{},g)),k.promise):(c.data(i,k={classes:j,options:g}),k.promise=C(function(b){var d=c.parent(),e=f(c),g=e.parentNode;if(!g||g.$$NG_REMOVED||e.$$NG_REMOVED)return void b();var h=c.data(i);c.removeData(i);var j=c.data(r)||{},k=E(c,h,j.active);return k?H("setClass",k,c,d,null,function(){k[0]&&a.$$addClassImmediately(c,k[0]),k[1]&&a.$$removeClassImmediately(c,k[1])},h.options,b):b()}))},cancel:function(a){a.$$cancelFn()},enabled:function(a,b){switch(arguments.length){case 2:if(a)J(b);else{var c=b.data(r)||{};c.disabled=!0,b.data(r,c)}break;case 1:u.disabled=!a;break;default:a=!u.disabled}return!!a}}}]),e.register("",["$window","$sniffer","$timeout","$$animateReflow",function(d,e,g,h){function i(){J||(J=h(function(){W=[],J=null,U={}}))}function m(a,b){J&&J(),W.push(b),J=h(function(){l(W,function(a){a()}),W=[],J=null,U={}})}function p(a,c){var d=f(a);a=b.element(d),Z.push(a);var e=Date.now()+c;Y>=e||(g.cancel(X),Y=e,X=g(function(){r(Z),Z=[]},c,!1))}function r(a){l(a,function(a){var b=a.data(Q);b&&l(b.closeAnimationFns,function(a){a()})})}function s(a,b){var c=b?U[b]:null;if(!c){var e=0,f=0,g=0,h=0;l(a,function(a){if(a.nodeType==q){var b=d.getComputedStyle(a)||{},c=b[E+K];e=Math.max(t(c),e);var i=b[E+M];f=Math.max(t(i),f);{b[G+M]}h=Math.max(t(b[G+M]),h);var j=t(b[G+K]);j>0&&(j*=parseInt(b[G+N],10)||1),g=Math.max(j,g)}}),c={total:0,transitionDelay:f,transitionDuration:e,animationDelay:h,animationDuration:g},b&&(U[b]=c)}return c}function t(a){var b=0,c=o(a)?a.split(/\s*,\s*/):[];return l(c,function(a){b=Math.max(parseFloat(a)||0,b)}),b}function u(a){var b=a.parent(),c=b.data(P);return c||(b.data(P,++V),c=V),c+"-"+f(a).getAttribute("class")}function v(a,b,c,d){var e=["ng-enter","ng-leave","ng-move"].indexOf(c)>=0,g=u(b),h=g+" "+c,i=U[h]?++U[h].total:0,k={};if(i>0){var l=c+"-stagger",m=g+" "+l,n=!U[m];n&&j.addClass(b,l),k=s(b,m),n&&j.removeClass(b,l)}j.addClass(b,c);var o=b.data(Q)||{},p=s(b,h),q=p.transitionDuration,r=p.animationDuration;if(e&&0===q&&0===r)return j.removeClass(b,c),!1;var t=d||e&&q>0,v=r>0&&k.animationDelay>0&&0===k.animationDuration,w=o.closeAnimationFns||[];b.data(Q,{stagger:k,cacheKey:h,running:o.running||0,itemIndex:i,blockTransition:t,closeAnimationFns:w});var z=f(b);return t&&(x(z,!0),d&&b.css(d)),v&&y(z,!0),!0}function w(a,b,c,d,e){function h(){b.off(M,i),j.removeClass(b,n),j.removeClass(b,o),K&&g.cancel(K),C(b,c);var a=f(b);for(var d in r)a.style.removeProperty(r[d])}function i(a){a.stopPropagation();var b=a.originalEvent||a,c=b.$manualTimeStamp||b.timeStamp||Date.now(),e=parseFloat(b.elapsedTime.toFixed(R));Math.max(c-L,0)>=G&&e>=D&&d()}var k=f(b),m=b.data(Q);if(-1==k.getAttribute("class").indexOf(c)||!m)return void d();var n="",o="";l(c.split(" "),function(a,b){var c=(b>0?" ":"")+a;n+=c+"-active",o+=c+"-pending"});var q="",r=[],t=m.itemIndex,u=m.stagger,v=0;if(t>0){var w=0;u.transitionDelay>0&&0===u.transitionDuration&&(w=u.transitionDelay*t);var z=0;u.animationDelay>0&&0===u.animationDuration&&(z=u.animationDelay*t,r.push(I+"animation-play-state")),v=Math.round(100*Math.max(w,z))/100}v||(j.addClass(b,n),m.blockTransition&&x(k,!1));var A=m.cacheKey+" "+n,B=s(b,A),D=Math.max(B.transitionDuration,B.animationDuration);if(0===D)return j.removeClass(b,n),C(b,c),void d();!v&&e&&Object.keys(e).length>0&&(B.transitionDuration||(b.css("transition",B.animationDuration+"s linear all"),r.push("transition")),b.css(e));var E=Math.max(B.transitionDelay,B.animationDelay),G=E*T;if(r.length>0){var J=k.getAttribute("style")||"";";"!==J.charAt(J.length-1)&&(J+=";"),k.setAttribute("style",J+" "+q)}var K,L=Date.now(),M=H+" "+F,N=(E+D)*S,O=(v+N)*T;return v>0&&(j.addClass(b,o),K=g(function(){K=null,B.transitionDuration>0&&x(k,!1),B.animationDuration>0&&y(k,!1),j.addClass(b,n),j.removeClass(b,o),e&&(0===B.transitionDuration&&b.css("transition",B.animationDuration+"s linear all"),b.css(e),r.push("transition"))},v*T,!1)),b.on(M,i),m.closeAnimationFns.push(function(){h(),d()}),m.running++,p(b,O),h}function x(a,b){a.style[E+L]=b?"none":""}function y(a,b){a.style[G+O]=b?"paused":""}function z(a,b,c,d){return v(a,b,c,d)?function(a){a&&C(b,c)}:void 0}function A(a,b,c,d,e){return b.data(Q)?w(a,b,c,d,e):(C(b,c),void d())}function B(a,b,c,d,e){var f=z(a,b,c,e.from);if(!f)return i(),void d();var g=f;return m(b,function(){g=A(a,b,c,d,e.to)}),function(a){(g||k)(a)}}function C(a,b){j.removeClass(a,b);var c=a.data(Q);c&&(c.running&&c.running--,c.running&&0!==c.running||a.removeData(Q))}function D(a,b){var c="";return a=n(a)?a:a.split(/\s+/),l(a,function(a,d){a&&a.length>0&&(c+=(d>0?" ":"")+a+b)}),c}var E,F,G,H,I="";a.ontransitionend===c&&a.onwebkittransitionend!==c?(I="-webkit-",E="WebkitTransition",F="webkitTransitionEnd transitionend"):(E="transition",F="transitionend"),a.onanimationend===c&&a.onwebkitanimationend!==c?(I="-webkit-",G="WebkitAnimation",H="webkitAnimationEnd animationend"):(G="animation",H="animationend");var J,K="Duration",L="Property",M="Delay",N="IterationCount",O="PlayState",P="$$ngAnimateKey",Q="$$ngAnimateCSS3Data",R=3,S=1.5,T=1e3,U={},V=0,W=[],X=null,Y=0,Z=[];return{animate:function(a,b,c,d,e,f){return f=f||{},f.from=c,f.to=d,B("animate",a,b,e,f)},enter:function(a,b,c){return c=c||{},B("enter",a,"ng-enter",b,c)},leave:function(a,b,c){return c=c||{},B("leave",a,"ng-leave",b,c)},move:function(a,b,c){return c=c||{},B("move",a,"ng-move",b,c)},beforeSetClass:function(a,b,c,d,e){e=e||{};var f=D(c,"-remove")+" "+D(b,"-add"),g=z("setClass",a,f,e.from);return g?(m(a,d),g):(i(),void d())},beforeAddClass:function(a,b,c,d){d=d||{};var e=z("addClass",a,D(b,"-add"),d.from);return e?(m(a,c),e):(i(),void c())},beforeRemoveClass:function(a,b,c,d){d=d||{};var e=z("removeClass",a,D(b,"-remove"),d.from);return e?(m(a,c),e):(i(),void c())},setClass:function(a,b,c,d,e){e=e||{},c=D(c,"-remove"),b=D(b,"-add");var f=c+" "+b;return A("setClass",a,f,d,e.to)},addClass:function(a,b,c,d){return d=d||{},A("addClass",a,D(b,"-add"),c,d.to)},removeClass:function(a,b,c,d){return d=d||{},A("removeClass",a,D(b,"-remove"),c,d.to)}}}])}])}(window,window.angular),function(a,b){"use strict";function c(){this.$get=["$$sanitizeUri",function(a){return function(b){var c=[];return f(b,i(c,function(b,c){return!/^unsafe/.test(a(b,c))})),c.join("")}}]}function d(a){var c=[],d=i(c,b.noop);return d.chars(a),c.join("")}function e(a){var b,c={},d=a.split(",");for(b=0;b<d.length;b++)c[d[b]]=!0;return c}function f(a,c){function d(a,d,f,h){if(d=b.lowercase(d),y[d])for(;t.last()&&z[t.last()];)e("",t.last());x[d]&&t.last()==d&&e("",d),h=u[d]||!!h,h||t.push(d);var i={};f.replace(m,function(a,b,c,d,e){var f=c||d||e||"";i[b]=g(f)}),c.start&&c.start(d,i,h)}function e(a,d){var e,f=0;if(d=b.lowercase(d))for(f=t.length-1;f>=0&&t[f]!=d;f--);if(f>=0){for(e=t.length-1;e>=f;e--)c.end&&c.end(t[e]);t.length=f}}"string"!=typeof a&&(a=null===a||"undefined"==typeof a?"":""+a);var f,h,i,s,t=[],v=a;for(t.last=function(){return t[t.length-1]};a;){if(s="",h=!0,t.last()&&B[t.last()]?(a=a.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+t.last()+"[^>]*>","i"),function(a,b){return b=b.replace(p,"$1").replace(r,"$1"),c.chars&&c.chars(g(b)),""}),e("",t.last())):(0===a.indexOf("<!--")?(f=a.indexOf("--",4),f>=0&&a.lastIndexOf("-->",f)===f&&(c.comment&&c.comment(a.substring(4,f)),a=a.substring(f+3),h=!1)):q.test(a)?(i=a.match(q),i&&(a=a.replace(i[0],""),h=!1)):o.test(a)?(i=a.match(l),i&&(a=a.substring(i[0].length),i[0].replace(l,e),h=!1)):n.test(a)&&(i=a.match(k),i?(i[4]&&(a=a.substring(i[0].length),i[0].replace(k,d)),h=!1):(s+="<",a=a.substring(1))),h&&(f=a.indexOf("<"),s+=0>f?a:a.substring(0,f),a=0>f?"":a.substring(f),c.chars&&c.chars(g(s)))),a==v)throw j("badparse","The sanitizer was unable to parse the following block of html: {0}",a);v=a}e()}function g(a){if(!a)return"";var b=I.exec(a),c=b[1],d=b[3],e=b[2];return e&&(H.innerHTML=e.replace(/</g,"&lt;"),e="textContent"in H?H.textContent:H.innerText),c+e+d}function h(a){return a.replace(/&/g,"&amp;").replace(s,function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1);return"&#"+(1024*(b-55296)+(c-56320)+65536)+";"}).replace(t,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function i(a,c){var d=!1,e=b.bind(a,a.push);return{start:function(a,f,g){a=b.lowercase(a),!d&&B[a]&&(d=a),d||C[a]!==!0||(e("<"),e(a),b.forEach(f,function(d,f){var g=b.lowercase(f),i="img"===a&&"src"===g||"background"===g;G[g]!==!0||D[g]===!0&&!c(d,i)||(e(" "),e(f),e('="'),e(h(d)),e('"'))}),e(g?"/>":">"))},end:function(a){a=b.lowercase(a),d||C[a]!==!0||(e("</"),e(a),e(">")),a==d&&(d=!1)},chars:function(a){d||e(h(a))}}}var j=b.$$minErr("$sanitize"),k=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,l=/^<\/\s*([\w:-]+)[^>]*>/,m=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,n=/^</,o=/^<\//,p=/<!--(.*?)-->/g,q=/<!DOCTYPE([^>]*?)>/i,r=/<!\[CDATA\[(.*?)]]>/g,s=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,t=/([^\#-~| |!])/g,u=e("area,br,col,hr,img,wbr"),v=e("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),w=e("rp,rt"),x=b.extend({},w,v),y=b.extend({},v,e("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),z=b.extend({},w,e("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),A=e("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),B=e("script,style"),C=b.extend({},u,y,z,x,A),D=e("background,cite,href,longdesc,src,usemap,xlink:href"),E=e("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),F=e("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),G=b.extend({},D,F,E),H=document.createElement("pre"),I=/^(\s*)([\s\S]*?)(\s*)$/;b.module("ngSanitize",[]).provider("$sanitize",c),b.module("ngSanitize").filter("linky",["$sanitize",function(a){var c=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"”’]/,e=/^mailto:/;return function(f,g){function h(a){a&&n.push(d(a))}function i(a,c){n.push("<a "),b.isDefined(g)&&n.push('target="',g,'" '),n.push('href="',a.replace(/"/g,"&quot;"),'">'),h(c),n.push("</a>")}if(!f)return f;for(var j,k,l,m=f,n=[];j=m.match(c);)k=j[0],j[2]||j[4]||(k=(j[3]?"http://":"mailto:")+k),l=j.index,h(m.substr(0,l)),i(k,j[0].replace(e,"")),m=m.substring(l+j[0].length);return h(m),a(n.join(""))}}])}(window,window.angular),function(a,b){"use strict";function c(a,c,e){d.directive(a,["$parse","$swipe",function(d,f){var g=75,h=.3,i=30;return function(j,k,l){function m(a){if(!n)return!1;var b=Math.abs(a.y-n.y),d=(a.x-n.x)*c;return o&&g>b&&d>0&&d>i&&h>b/d}var n,o,p=d(l[a]),q=["touch"];b.isDefined(l.ngSwipeDisableMouse)||q.push("mouse"),f.bind(k,{start:function(a){n=a,o=!0},cancel:function(){o=!1},end:function(a,b){m(a)&&j.$apply(function(){k.triggerHandler(e),p(j,{$event:b})})}},q)}}])}var d=b.module("ngTouch",[]);d.factory("$swipe",[function(){function a(a){var b=a.touches&&a.touches.length?a.touches:[a],c=a.changedTouches&&a.changedTouches[0]||a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]||b[0].originalEvent||b[0];return{x:c.clientX,y:c.clientY}}function c(a,c){var d=[];return b.forEach(a,function(a){var b=e[a][c];b&&d.push(b)}),d.join(" ")}var d=10,e={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"}};return{bind:function(b,e,f){var g,h,i,j,k=!1;f=f||["mouse","touch"],b.on(c(f,"start"),function(b){i=a(b),k=!0,g=0,h=0,j=i,e.start&&e.start(i,b)});var l=c(f,"cancel");l&&b.on(l,function(a){k=!1,e.cancel&&e.cancel(a)}),b.on(c(f,"move"),function(b){if(k&&i){var c=a(b);if(g+=Math.abs(c.x-j.x),h+=Math.abs(c.y-j.y),j=c,!(d>g&&d>h))return h>g?(k=!1,void(e.cancel&&e.cancel(b))):(b.preventDefault(),void(e.move&&e.move(c,b)))}}),b.on(c(f,"end"),function(b){k&&(k=!1,e.end&&e.end(a(b),b))})}}}]),d.config(["$provide",function(a){a.decorator("ngClickDirective",["$delegate",function(a){return a.shift(),a}])}]),d.directive("ngClick",["$parse","$timeout","$rootElement",function(a,c,d){function e(a,b,c,d){return Math.abs(a-c)<p&&Math.abs(b-d)<p}function f(a,b,c){for(var d=0;d<a.length;d+=2)if(e(a[d],a[d+1],b,c))return a.splice(d,d+2),!0;return!1}function g(a){if(!(Date.now()-j>o)){var b=a.touches&&a.touches.length?a.touches:[a],c=b[0].clientX,d=b[0].clientY;1>c&&1>d||l&&l[0]===c&&l[1]===d||(l&&(l=null),"label"===a.target.tagName.toLowerCase()&&(l=[c,d]),f(k,c,d)||(a.stopPropagation(),a.preventDefault(),a.target&&a.target.blur()))}}function h(a){var b=a.touches&&a.touches.length?a.touches:[a],d=b[0].clientX,e=b[0].clientY;k.push(d,e),c(function(){for(var a=0;a<k.length;a+=2)if(k[a]==d&&k[a+1]==e)return void k.splice(a,a+2)},o,!1)}function i(a,b){k||(d[0].addEventListener("click",g,!0),d[0].addEventListener("touchstart",h,!0),k=[]),j=Date.now(),f(k,a,b)}var j,k,l,m=750,n=12,o=2500,p=25,q="ng-click-active";return function(c,d,e){function f(){o=!1,d.removeClass(q)}var g,h,j,k,l=a(e.ngClick),o=!1;d.on("touchstart",function(a){o=!0,g=a.target?a.target:a.srcElement,3==g.nodeType&&(g=g.parentNode),d.addClass(q),h=Date.now();var b=a.touches&&a.touches.length?a.touches:[a],c=b[0].originalEvent||b[0];j=c.clientX,k=c.clientY}),d.on("touchmove",function(){f()}),d.on("touchcancel",function(){f()}),d.on("touchend",function(a){var c=Date.now()-h,l=a.changedTouches&&a.changedTouches.length?a.changedTouches:a.touches&&a.touches.length?a.touches:[a],p=l[0].originalEvent||l[0],q=p.clientX,r=p.clientY,s=Math.sqrt(Math.pow(q-j,2)+Math.pow(r-k,2));o&&m>c&&n>s&&(i(q,r),g&&g.blur(),b.isDefined(e.disabled)&&e.disabled!==!1||d.triggerHandler("click",[a])),f()}),d.onclick=function(){},d.on("click",function(a,b){c.$apply(function(){l(c,{$event:b||a})})}),d.on("mousedown",function(){d.addClass(q)}),d.on("mousemove mouseup",function(){d.removeClass(q)})}}]),c("ngSwipeLeft",-1,"swipeleft"),c("ngSwipeRight",1,"swiperight")}(window,window.angular),angular.module("ivpusic.cookie",["ipCookie"]),angular.module("ipCookie",["ng"]).factory("ipCookie",["$document",function(a){"use strict";return function(){function b(b,c,d){var e,f,g,h,i,j,k,l,m;if(d=d||{},void 0!==c)return c="object"==typeof c?JSON.stringify(c):c+"","number"==typeof d.expires&&(m=d.expires,d.expires=new Date,-1===m?d.expires=new Date("Thu, 01 Jan 1970 00:00:00 GMT"):void 0!==d.expirationUnit?"hours"===d.expirationUnit?d.expires.setHours(d.expires.getHours()+m):"minutes"===d.expirationUnit?d.expires.setMinutes(d.expires.getMinutes()+m):"seconds"===d.expirationUnit?d.expires.setSeconds(d.expires.getSeconds()+m):d.expires.setDate(d.expires.getDate()+m):d.expires.setDate(d.expires.getDate()+m)),a[0].cookie=[encodeURIComponent(b),"=",encodeURIComponent(c),d.expires?"; expires="+d.expires.toUTCString():"",d.path?"; path="+d.path:"",d.domain?"; domain="+d.domain:"",d.secure?"; secure":""].join("");for(f=[],l=a[0].cookie,l&&(f=l.split("; ")),e={},k=!1,g=0;f.length>g;++g)if(f[g]&&(h=f[g],i=h.indexOf("="),j=h.substring(0,i),c=decodeURIComponent(h.substring(i+1)),void 0===b||b===j)){try{e[j]=JSON.parse(c)}catch(n){e[j]=c}if(b===j)return e[j];k=!0}return k&&void 0===b?e:void 0}return b.remove=function(a,c){var d=void 0!==b(a);return d&&(c||(c={}),c.expires=-1,b(a,"",c)),d},b}()}]),function(a){function b(a){return"number"==typeof a&&!isNaN(a)&&isFinite(a)}function c(a,b){return 100*b/(a[1]-a[0])}function d(a,b){for(var c=1;a>=b[c];)c+=1;return c}function e(a,d,e,f){this.xPct=[],this.xVal=[],this.xSteps=[f||!1],this.xNumSteps=[!1],this.snap=d,this.direction=e;for(var g in a)if(a.hasOwnProperty(g)){if(d=g,e=a[g],f=void 0,"number"==typeof e&&(e=[e]),"[object Array]"!==Object.prototype.toString.call(e))throw Error("noUiSlider: 'range' contains invalid value.");if(f="min"===d?0:"max"===d?100:parseFloat(d),!b(f)||!b(e[0]))throw Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(f),this.xVal.push(e[0]),f?this.xSteps.push(isNaN(e[1])?!1:e[1]):isNaN(e[1])||(this.xSteps[0]=e[1])}this.xNumSteps=this.xSteps.slice(0);for(g in this.xNumSteps)this.xNumSteps.hasOwnProperty(g)&&(a=Number(g),(d=this.xNumSteps[g])&&(this.xSteps[a]=c([this.xVal[a],this.xVal[a+1]],d)/(100/(this.xPct[a+1]-this.xPct[a]))))}e.prototype.getMargin=function(a){return 2===this.xPct.length?c(this.xVal,a):!1},e.prototype.toStepping=function(a){var b=this.xVal,e=this.xPct;if(a>=b.slice(-1)[0])a=100;else{var f,g,h=d(a,b);f=b[h-1],g=b[h],b=e[h-1],e=e[h],f=[f,g],a=c(f,0>f[0]?a+Math.abs(f[0]):a-f[0]),a=b+a/(100/(e-b))}return this.direction&&(a=100-a),a},e.prototype.fromStepping=function(a){this.direction&&(a=100-a);var b,c=this.xVal;if(b=this.xPct,a>=100)b=c.slice(-1)[0];else{var e,f,g=d(a,b);e=c[g-1],f=c[g],c=b[g-1],e=[e,f],b=100/(b[g]-c)*(a-c)*(e[1]-e[0])/100+e[0]}return a=Math.pow(10,7),Number((Math.round(b*a)/a).toFixed(7))},e.prototype.getStep=function(a){this.direction&&(a=100-a);var b=this.xPct,c=this.xSteps,e=this.snap;if(100!==a){var f=d(a,b);e?(c=b[f-1],b=b[f],a=a-c>(b-c)/2?b:c):(c[f-1]?(e=b[f-1],c=c[f-1],b=Math.round((a-b[f-1])/c)*c,b=e+b):b=a,a=b)}return this.direction&&(a=100-a),a},e.prototype.getApplicableStep=function(a){var b=d(a,this.xPct);return a=100===a?2:1,[this.xNumSteps[b-2],this.xVal[b-a],this.xNumSteps[b-a]]},e.prototype.convert=function(a){return this.getStep(this.toStepping(a))},a.noUiSlider={Spectrum:e}}(window.jQuery||window.Zepto),function(a){function b(a){return"number"==typeof a&&!isNaN(a)&&isFinite(a)}function c(a,c){if(!b(c))throw Error("noUiSlider: 'step' is not numeric.");a.singleStep=c}function d(b,c){if("object"!=typeof c||a.isArray(c))throw Error("noUiSlider: 'range' is not an object.");if(void 0===c.min||void 0===c.max)throw Error("noUiSlider: Missing 'min' or 'max' in 'range'.");b.spectrum=new a.noUiSlider.Spectrum(c,b.snap,b.dir,b.singleStep)}function e(b,c){var d=c;if(c=a.isArray(d)?d:[d],!a.isArray(c)||!c.length||2<c.length)throw Error("noUiSlider: 'start' option is incorrect.");b.handles=c.length,b.start=c}function f(a,b){if(a.snap=b,"boolean"!=typeof b)throw Error("noUiSlider: 'snap' option must be a boolean.")}function g(a,b){if(a.animate=b,"boolean"!=typeof b)throw Error("noUiSlider: 'animate' option must be a boolean.")}function h(a,b){if("lower"===b&&1===a.handles)a.connect=1;else if("upper"===b&&1===a.handles)a.connect=2;else if(!0===b&&2===a.handles)a.connect=3;else{if(!1!==b)throw Error("noUiSlider: 'connect' option doesn't match handle count.");a.connect=0}}function i(a,b){switch(b){case"horizontal":a.ort=0;break;case"vertical":a.ort=1;break;default:throw Error("noUiSlider: 'orientation' option is invalid.")}}function j(a,c){if(!b(c))throw Error("noUiSlider: 'margin' option must be numeric.");if(a.margin=a.spectrum.getMargin(c),!a.margin)throw Error("noUiSlider: 'margin' option is only supported on linear sliders.")}function k(a,c){if(!b(c))throw Error("noUiSlider: 'limit' option must be numeric.");if(a.limit=a.spectrum.getMargin(c),!a.limit)throw Error("noUiSlider: 'limit' option is only supported on linear sliders.")}function l(a,b){switch(b){case"ltr":a.dir=0;break;case"rtl":a.dir=1,a.connect=[0,2,1,3][a.connect];break;default:throw Error("noUiSlider: 'direction' option was not recognized.")}}function m(a,b){if("string"!=typeof b)throw Error("noUiSlider: 'behaviour' must be a string containing options.");var c=0<=b.indexOf("tap"),d=0<=b.indexOf("drag"),e=0<=b.indexOf("fixed"),f=0<=b.indexOf("snap");a.events={tap:c||f,drag:d,fixed:e,snap:f}
}function n(a,b){if(a.format=b,"function"==typeof b.to&&"function"==typeof b.from)return!0;throw Error("noUiSlider: 'format' requires 'to' and 'from' methods.")}var o={to:function(a){return a.toFixed(2)},from:Number};a.noUiSlider.testOptions=function(b){var p,q={margin:0,limit:0,animate:!0,format:o};return p={step:{r:!1,t:c},start:{r:!0,t:e},connect:{r:!0,t:h},direction:{r:!0,t:l},snap:{r:!1,t:f},animate:{r:!1,t:g},range:{r:!0,t:d},orientation:{r:!1,t:i},margin:{r:!1,t:j},limit:{r:!1,t:k},behaviour:{r:!0,t:m},format:{r:!1,t:n}},b=a.extend({connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"},b),a.each(p,function(a,c){if(void 0===b[a]){if(c.r)throw Error("noUiSlider: '"+a+"' is required.");return!0}c.t(q,b[a])}),q.style=q.ort?"top":"left",q}}(window.jQuery||window.Zepto),function(a){function b(a){return Math.max(Math.min(a,100),0)}function c(a,b,c){a.addClass(b),setTimeout(function(){a.removeClass(b)},c)}function d(b,c){var d=a("<div><div/></div>").addClass(o[2]),e=["-lower","-upper"];return b&&e.reverse(),d.children().addClass(o[3]+" "+o[3]+e[c]),d}function e(a,b,c){switch(a){case 1:b.addClass(o[7]),c[0].addClass(o[6]);break;case 3:c[1].addClass(o[6]);case 2:c[0].addClass(o[7]);case 0:b.addClass(o[6])}}function f(a,b,c){var e,f=[];for(e=0;a>e;e+=1)f.push(d(b,e).appendTo(c));return f}function g(b,c,d){return d.addClass([o[0],o[8+b],o[4+c]].join(" ")),a("<div/>").appendTo(d).addClass(o[1])}function h(d,h,i){function j(){return x[["width","height"][h.ort]]()}function k(a){var b,c=[z.val()];for(b=0;b<a.length;b+=1)z.trigger(a[b],c)}function m(a){return 1===a.length?a[0]:h.dir?a.reverse():a}function p(a){return function(b,c){z.val([a?null:c,a?c:null],!0)}}function q(b){var c=a.inArray(b,D);z[0].linkAPI&&z[0].linkAPI[b]&&z[0].linkAPI[b].change(C[c],y[c].children(),z)}function r(a,c,d){var e=a[0]!==y[0][0]?1:0,f=A[0]+h.margin,g=A[1]-h.margin,i=A[0]+h.limit,j=A[1]-h.limit;return 1<y.length&&(c=e?Math.max(c,f):Math.min(c,g)),!1!==d&&h.limit&&1<y.length&&(c=e?Math.min(c,i):Math.max(c,j)),c=B.getStep(c),c=b(parseFloat(c.toFixed(7))),c===A[e]?!1:(a.css(h.style,c+"%"),a.is(":first-child")&&a.toggleClass(o[17],c>50),A[e]=c,C[e]=B.fromStepping(c),q(D[e]),!0)}function s(a,b,c,d){return a=a.replace(/\s/g,".nui ")+".nui",b.on(a,function(a){if(z.attr("disabled")||z.hasClass(o[14]))return!1;a.preventDefault();var b,e,f=0===a.type.indexOf("touch"),g=0===a.type.indexOf("mouse"),i=0===a.type.indexOf("pointer"),j=a;0===a.type.indexOf("MSPointer")&&(i=!0),a.originalEvent&&(a=a.originalEvent),f&&(b=a.changedTouches[0].pageX,e=a.changedTouches[0].pageY),(g||i)&&(i||void 0!==window.pageXOffset||(window.pageXOffset=document.documentElement.scrollLeft,window.pageYOffset=document.documentElement.scrollTop),b=a.clientX+window.pageXOffset,e=a.clientY+window.pageYOffset),j.points=[b,e],j.cursor=g,a=j,a.calcPoint=a.points[h.ort],c(a,d)})}function t(a,c){var d,e=c.handles||y,f=!1,f=100*(a.calcPoint-c.start)/j(),g=e[0][0]!==y[0][0]?1:0,h=c.positions;d=f+h[0],f+=h[1],1<e.length?(0>d&&(f+=Math.abs(d)),f>100&&(d-=f-100),d=[b(d),b(f)]):d=[d,f],f=r(e[0],d[g],1===e.length),1<e.length&&(f=r(e[1],d[g?0:1],!1)||f),f&&k(["slide"])}function u(b){a("."+o[15]).removeClass(o[15]),b.cursor&&a("body").css("cursor","").off(".nui"),l.off(".nui"),z.removeClass(o[12]),k(["set","change"])}function v(b,c){1===c.handles.length&&c.handles[0].children().addClass(o[15]),b.stopPropagation(),s(n.move,l,t,{start:b.calcPoint,handles:c.handles,positions:[A[0],A[y.length-1]]}),s(n.end,l,u,null),b.cursor&&(a("body").css("cursor",a(b.target).css("cursor")),1<y.length&&z.addClass(o[12]),a("body").on("selectstart.nui",!1))}function w(b){var d=b.calcPoint,e=0;b.stopPropagation(),a.each(y,function(){e+=this.offset()[h.style]}),e=e/2>d||1===y.length?0:1,d-=x.offset()[h.style],d=100*d/j(),h.events.snap||c(z,o[14],300),r(y[e],d),k(["slide","set","change"]),h.events.snap&&v(b,{handles:[y[e]]})}var x,y,z=a(d),A=[-1,-1],B=h.spectrum,C=[],D=["lower","upper"].slice(0,h.handles);if(h.dir&&D.reverse(),d.LinkUpdate=q,d.LinkConfirm=function(b,c){var d=a.inArray(b,D);return c&&c.appendTo(y[d].children()),h.dir&&(d=1===d?0:1),p(d)},d.LinkDefaultFormatter=h.format,d.LinkDefaultFlag="lower",d.reappend=function(){var a,b;for(a=0;a<D.length;a+=1)this.linkAPI&&this.linkAPI[b=D[a]]&&this.linkAPI[b].reconfirm(b)},z.hasClass(o[0]))throw Error("Slider was already initialized.");x=g(h.dir,h.ort,z),y=f(h.handles,h.dir,x),e(h.connect,z,y),function(a){var b;if(!a.fixed)for(b=0;b<y.length;b+=1)s(n.start,y[b].children(),v,{handles:[y[b]]});a.tap&&s(n.start,x,w,{handles:y}),a.drag&&(b=x.find("."+o[7]).addClass(o[10]),a.fixed&&(b=b.add(x.children().not(b).children())),s(n.start,b,v,{handles:y}))}(h.events),d.vSet=function(b){if(z[0].LinkIsEmitting)return this;var d;b=a.isArray(b)?b:[b],h.dir&&1<h.handles&&b.reverse(),h.animate&&-1!==A[0]&&c(z,o[14],300),d=1<y.length?3:1,1===b.length&&(d=1);var e,f,g;for(h.limit&&(d+=1),e=0;d>e;e+=1)f=e%2,g=b[f],null!==g&&!1!==g&&("number"==typeof g&&(g=String(g)),g=h.format.from(g),(!1===g||isNaN(g)||!1===r(y[f],B.toStepping(g),e===3-h.dir))&&q(D[f]));return k(["set"]),this},d.vGet=function(){var a,b=[];for(a=0;a<h.handles;a+=1)b[a]=h.format.to(C[a]);return m(b)},d.destroy=function(){return a(this).off(".nui").removeClass(o.join(" ")).empty(),delete this.LinkUpdate,delete this.LinkConfirm,delete this.LinkDefaultFormatter,delete this.LinkDefaultFlag,delete this.reappend,delete this.vGet,delete this.vSet,delete this.getCurrentStep,delete this.getInfo,delete this.destroy,i},d.getCurrentStep=function(){var b=a.map(A,function(a,b){var c=B.getApplicableStep(a);return[[C[b]-c[2]>=c[1]?c[2]:c[0],c[2]]]});return m(b)},d.getInfo=function(){return[B,h.style,h.ort]},z.val(h.start)}function i(b){if(!this.length)throw Error("noUiSlider: Can't initialize slider on empty selection.");var c=a.noUiSlider.testOptions(b,this);return this.each(function(){h(this,c,b)})}function j(b){return this.each(function(){if(this.destroy){var c=a(this).val(),d=this.destroy(),e=a.extend({},d,b);a(this).noUiSlider(e),this.reappend(),d.start===e.start&&a(this).val(c)}else a(this).noUiSlider(b)})}function k(){return this[0][arguments.length?"vSet":"vGet"].apply(this[0],arguments)}var l=a(document),m=a.fn.val,n=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},o="noUi-target noUi-base noUi-origin noUi-handle noUi-horizontal noUi-vertical noUi-background noUi-connect noUi-ltr noUi-rtl noUi-dragable  noUi-state-drag  noUi-state-tap noUi-active  noUi-stacking".split(" ");a.fn.val=function(){var b=arguments,c=a(this[0]);return arguments.length?this.each(function(){(a(this).hasClass(o[0])?k:m).apply(a(this),b)}):(c.hasClass(o[0])?k:m).call(c)},a.fn.noUiSlider=function(a,b){return(b?j:i).call(this,a)}}(window.jQuery||window.Zepto);var analytics=new Analytics,trackJsInfo=function(a){var b=Array.prototype.slice.call(arguments,1);a&&a.trackJs&&a.trackJs.console.info.apply(this,b)};if(1==isLocalStorageNameSupported()){var module=angular.module("wikiwand",["ngRoute","ngSanitize","ngTouch","ngAnimate","ipCookie"],["$rootScopeProvider",function(a){a.digestTtl(10)}]);module.config(["$routeProvider","$sceDelegateProvider","$locationProvider",function(a,b,c){c.html5Mode({enabled:!1}),b.resourceUrlWhitelist(["self",new RegExp("^https://s3.amazonaws.com/ww-article-cache-1/.+$"),new RegExp("^http://s3.amazonaws.com/ww-article-cache-1/.+$"),new RegExp("^https://s3.amazonaws.com/ww-article-cache-stage/.+$"),new RegExp("^http://s3.amazonaws.com/ww-article-cache-stage/.+$"),new RegExp("^http://d30ohmzj0cjdlk.cloudfront.net/.+$"),new RegExp("^https://d30ohmzj0cjdlk.cloudfront.net/.+$"),new RegExp("^http://db0nus869y26v.cloudfront.net/.+$"),new RegExp("^https://db0nus869y26v.cloudfront.net/.+$"),new RegExp("^https://www.youtube-nocookie.com/.+$")])}]),module.config(["$routeProvider",function(a){a.when("/view1xyz",{templateUrl:"partials/partial1.html",controller:"MyCtrl1"}),a.when("/view2xyz",{templateUrl:"partials/partial2.html",controller:"MyCtrl2"}),a.otherwise({controller:"MyCtrl2"})}]).config(["$provide",function(a){a.decorator("$exceptionHandler",["$delegate","$window",function(a,b){return function(c,d){if(a(c,d),"undefined"!=typeof dontReport)return void console.log("don't report");var e={};try{e.message=c.message}catch(f){e.message="none"}try{e.stack=c.stack,e.miniStack=c.stack.split("\n"),e.miniStackString=e.miniStack.join(" |"),e.miniStackString=e.miniStackString.replace(/http:[^ \)]+/g,"#"),e.miniStackString=e.miniStackString.replace(/at\s/g,"@"),e.miniStackString=e.miniStackString.replace(/\s+/g,""),e.miniStackString=e.miniStackString.substr(0,499)}catch(f){e.stack="none"}try{e.articleData=articleData}catch(f){e.articleData="none"}try{e.serverData=serverData}catch(f){e.serverData="none"}try{e.errorUrl=window.location.href}catch(f){e.errorUrl="none"}if(serverData.agent.iOSWebView&&(console.error(c.message),"production"!==serverData.config.environment&&alert(c.message)),console.info("stack trace "+JSON.stringify(e.stack)),console.log("underscore function is ",typeof _),console.log("jquery function is ",typeof $),"string"==typeof _&&console.log("["+_+"]"),"string"==typeof $&&console.log("["+$+"]"),b.trackJs&&b.trackJs.track(c),serverData&&-1!=serverData.agent.string.indexOf("Opera Mini"))alert("Sorry. Opera mini is not HTML5 compatible");else{try{$.ajax({type:"POST",url:"../api/javascript-errors",contentType:"application/json",data:angular.toJson(e)})}catch(f){console.log("error reporting message")}analytics.gaEvent("clientSide error , -",e.errorUrl,e.message),analytics.gaEvent("clientSide error 1",e.errorUrl,e.message),analytics.gaEvent("clientSide error 2",e.errorUrl,e.miniStackString)}}}])}])}var app=angular.module("wikiwand");app.service("WikipediaApi",["$http","$log",function(a,b){var c={};return c.callApi=function(c,d,e){if(c.format="json",c.callback="JSON_CALLBACK",!d.apiLanguage)return e("Wikipedia API: must provide an 'apiLanguage' option to callApi");if(!c.action)return e("Wikipedia API: must provide an 'action' parameter to callApi");var f=[];for(var g in c){var h=c[g];"object"==typeof h&&(h=h.join("|")),f.push(g+"="+h)}var i=d.apiLanguage;"zh-"===i.substr(0,3)&&$.inArray(i,["zh-tw","zh-hk","zh-mo","zh-sg","zh-cn","zh-hant","zh-hans"])>=0&&(i="zh");var j="https://"+i+".wikipedia.org/w/api.php?"+f.join("&");d.dbg&&console.log("Wikipedia API Call: ",j);var k={method:"JSONP",url:j,cache:!0,timeout:3e3,responseType:"json"};a(k).success(function(a){if(a.error)return b.error("Wikipedia API: warning: "+JSON.stringify(a.warning)),e("Wikipedia API: error: "+JSON.stringify(a.error));a.warning&&b.warn("Wikipedia API: warning: "+JSON.stringify(a.warning));var d=a[c.action];return e(null,d,j)}).error(function(a,c,d,f,g){return b.error("Wikipedia API: request failed: "+g),e("Wikipedia API: request failed: "+g)})},c}]);var app=angular.module("wikiwand");app.service("GalleryHelper",["$http","$log",function(a,b){var c={};return c.getClickedThumbnailIndex=function(a){var c=a.currentTarget,d=c.querySelector("img:nth-child(1)"),e=$(d).data("index");return"undefined"==typeof e?(b.warn("This image is not in the gallery"),-1):(console.log("Open image with index ",e),e)},c.loadImagesFromArticleToArray=function(a){c.findStrayImages();var b=[],d=a.find(".image_wrapper > .img_container img:nth-child(1):visible");return d.each(function(){var a=$(this);c.addItemModelFromThumb(a,b)}),b},c.findStrayImages=function(){$(".image.int-link").length>0&&("production"!==serverData.config.environment&&$(".image.int-link").css("border","solid 5px red"),b.warn("Found stray pictures",$(".image.int-link")))},c.addItemModelFromThumb=function(a,b){var c={};c.thumb={},c.thumb.src=a.attr("data-original"),c.thumb.w=parseInt(a.attr("data-w")),c.thumb.h=parseInt(a.attr("data-h")),c.urlString="url("+c.thumb.src+")",c.fromEnglishWikipedia="undefined"!=typeof a.attr("data-from-english"),c.bucket={},c.bucket.src="",c.bucket.loaded=!1,c.original={},c.original.realOriginalSrc=a.attr("data-href"),c.original.src=c.thumb.src,c.original.w=parseInt(a.attr("data-fw")),c.original.h=parseInt(a.attr("data-fh")),c.info={},c.info.fetched=!1,c.info.type=a.attr("data-media-type")||"image",c.info.payload=a.attr("data-payload");var d=a.attr("data-href");if(c.wikipediaPageFullUrl=d,c.wikipediaPageFullUrl="http://"+articleData.langCodeUrl+".wikipedia.org"+c.wikipediaPageFullUrl,c.wikipediaPage=d,c.wikipediaPage)if("/wiki/"===c.wikipediaPage.substr(0,6)){c.wikipediaPage=c.wikipediaPage.substr(6);try{c.wikipediaPageTitle=decodeURI(c.wikipediaPage.replace(/_/g," "))}catch(e){return}}else if("/w/index.php?title="===c.wikipediaPage.substr(0,19)){c.wikipediaPage=c.wikipediaPage.substr(19),c.wikipediaPage=c.wikipediaPage.split("&")[0];try{c.wikipediaPageTitle=decodeURI(c.wikipediaPage.replace(/_/g," "))}catch(e){return}}var f=a.parent().siblings(".caption").html()||"";c.title=f.trim(),c.titleTxt=f.replace(/(<([^>]+)>)/gi,"").replace(/"/g,"&quot"),c.index=b.length,c.original.w&&c.original.h&&c.wikipediaPage?(a.data("index",c.index),b.push(c)):"production"!==serverData.config.environment&&a.css("border","solid 5px #0e0")},c}]);var app=angular.module("wikiwand"),galleryControllerParams=["$rootScope","$scope","$timeout","$log","$sce","$sanitize","$window","Utilities","WikipediaApi","GalleryHelper",function(a,b,c,d,e,f,g,h,i,j){function k(){h.isTouchDevice()||c(function(){angular.element(".img_enlarge").removeClass("loading")},500),b.galleryActive=!0,c(function(){$("#gallery_thumbs_scroll").getNiceScroll().resize(),l.alignFilmStrip()},10)}var l=this;l.widthBuckets=[320,640,800,1024,1280,1920,2560,2880],b.fullScreenActive=!1,b.galleryActive=!1,angular.element(document).ready(function(){$(document).keydown(function(a){if(b.galleryActive){if(27===a.keyCode)b.closeGallery();else if(37===a.keyCode||38==a.keyCode||8===a.keyCode){a.preventDefault(),a.stopPropagation();var c=b.current.index-1;l.setActiveItemByIndex(c)}else if(39===a.keyCode||40==a.keyCode||32===a.keyCode){a.preventDefault(),a.stopPropagation();var c=b.current.index+1;l.setActiveItemByIndex(c)}else if(33===a.keyCode){a.preventDefault(),a.stopPropagation();var c=Math.max(b.current.index-5,0);l.setActiveItemByIndex(c)}else if(34===a.keyCode){a.preventDefault(),a.stopPropagation();var c=Math.min(b.current.index+5,b.items.length-1);l.setActiveItemByIndex(c)}else if(36===a.keyCode){a.preventDefault(),a.stopPropagation();var c=0;l.setActiveItemByIndex(c)}else if(35===a.keyCode){a.preventDefault(),a.stopPropagation();var c=b.items.length-1;l.setActiveItemByIndex(c)}b.$apply()}})}),a.galleryOpen=function(a){b.items||(b.items=j.loadImagesFromArticleToArray($("#content"))),c(function(){l.initializeGalleryUi()},0);var d=j.getClickedThumbnailIndex(a);-1!=d&&(l.setActiveItemByIndex(d),h.isTouchDevice()?k():(angular.element(".img_enlarge").removeClass("loading"),angular.element(a.currentTarget).find(".img_enlarge").addClass("loading")))},screenfull.enabled&&document.addEventListener(screenfull.raw.fullscreenchange,function(){b.fullScreenActive=screenfull.isFullscreen}),b.galleryFull=!1,b.toggleFullScreen=function(){if(b.fullScreenActive=!b.fullScreenActive,screenfull.enabled){{$("#gallery")[0]}b.fullScreenActive?(screenfull.request(),b.galleryFull=!0):(screenfull.exit(),b.galleryFull=!1)}},b.closeGallery=function(){b.galleryFull=!1,$("#gallery .payload_container").empty(),b.galleryActive=!1,screenfull.enabled&&b.fullScreenActive&&screenfull.exit()},l.initializeGalleryUi=function(){h.isTouchDevice()?$("#full_screen").hide():(trackJsInfo(g,"nice scroll problem?"),trackJsInfo(g,"gallery_thumbs_scroll ",$("#gallery_thumbs_scroll")[0]),window.niceScroll||trackJsInfo(g,"niceScroll is not defined !"),$("#gallery_thumbs_scroll").niceScroll().hide()),$("#gallery_info_wrap > ul li").on("click",function(){$(this).hasClass("open")?$(this).removeClass("open").find("ul").hide():$(this).addClass("open").find("ul").show()}),setTimeout(function(){var a=$("#gallery_thumbs > li").outerWidth()*($("#gallery_thumbs > li").length+7);$("#gallery_thumbs").css("width",a)},0)},l.getNextBucketWithMinWidth=function(a){for(var b=0;b<l.widthBuckets.length;b++){var c=l.widthBuckets[b];if(c>=a)return c}return c},l.getImageDimensions=function(a){var b,c,d=$(window).width(),e=$(window).height(),f=a.original.w,g=a.original.h,h=g/f,i=e/d;i>h?(b=Math.min(d,f),c=Math.round(b*h)):(c=Math.min(e,g),b=Math.round(c/h));var j=l.getNextBucketWithMinWidth(b),k=Math.round(j*h);return{display:{w:b,h:c},request:{w:j,h:k}}},l.setActiveItemByIndex=function(a){a>=b.items.length?d.warn("Thumbnail index too large: ",a):0>a?d.warn("Thumbnail index too small: ",a):l.setActiveItem(b.items[a])},l.listenToImageLoad=function(a,c){a.attr("src")!=c.bucket.src&&(b.galleryActive?a.attr("src",c.bucket.src):a.attr("src",c.bucket.src+"?"+(new Date).getTime())),console.log("listen to image load"),a.load(function(){console.log("loaded"),c.bucket.loaded=!0,h.isTouchDevice()||b.galleryActive===!1&&k(),b.$apply()})},l.setActiveItem=function(a){if(a){var c=$(".gallery_main.bucket");c.attr("src",""),a.info.payload?(h.isTouchDevice()||b.galleryActive===!1&&k(),a.bucket.loaded=!0,$("#gallery .payload_container").html(a.info.payload),setTimeout(function(){var a=$("#gallery .payload_container video").get(0);"function"==typeof a.play&&a.play()},0)):(a.bucket.loaded=!1,$("#gallery .payload_container").empty(),l.listenToImageLoad(c,a));var d=a.index-1;0>d&&(d=0);for(var e=[],f=4;e.length<f&&d<b.items.length;){var g=b.items[d];d++,g.info.fetched||"image"===g.info.type&&(g.fromEnglishWikipedia?l.getImageInfoFromApi("en",g,function(){}):d<=a.index+3&&e.push(g))}if(e.length>0)for(var i=0;i<e.length;i++)l.getImageInfoFromApi(articleData.langCodeUrl,e[i],function(){});b.current&&(b.current.active=!1),a.active=!0,b.current=a,l.alignFilmStrip()}},l.alignFilmStrip=function(){if(console.log("align film strip"),$("#gallery_thumbs li").eq(b.current.index)&&$("#gallery_thumbs li").eq(b.current.index).position()){var a=Math.round($("#gallery_thumbs_con").width()),c=Math.round($("#gallery_thumbs li").eq(b.current.index).width()),d=Math.round($("#gallery_thumbs li").eq(b.current.index).position().left),e=Math.round(d+c/2-a/2);$("#gallery_thumbs_scroll").scrollLeft(e)}},l.getImageInfoFromApi=function(a,c,f){var g=l.getImageDimensions(c),h=g.request.w,j=[c],k=_.pluck(j,"wikipediaPageTitle"),m=_.pluck(j,"thumb"),n={action:"query",prop:"imageinfo",titles:k,iiprop:["timestamp","user","url","size","mime","mediatype","extmetadata"],iiurlwidth:h,iiextmetadatafilter:["DateTime","DateTimeOriginal","ImageDescription","License","LicenseShortName","UsageTerms","LicenseUrl","Credit","Artist","Permission","GPSLatitude","GPSLongitude"]};i.callApi(n,{apiLanguage:a},function(a,c){if(!c)return console.log("No results for API call: ",n),f();var g=c.pages,h=function(a){return a?a.replace(/(<([^>]+)>)/gi,""):a},i=function(a,b){if(!a)return void 0;var c=a[b];return c?c.value:void 0},k=0;for(var o in g){var p=m[k];k++;var q=g[o],r=(q.imageinfo&&q.imageinfo.length)>0?q.imageinfo[0]:{thumburl:p.src,thumbwidth:p.w,thumbheight:p.h,user:"",timestamp:"",mediatype:"BITMAP",width:p.w,height:p.h,size:1e5,mime:"image/jpeg"},s=null;for(var t in j){console.log(j[t].wikipediaPageTitle);try{if(decodeURIComponent(j[t].wikipediaPageTitle)===q.title){s=j[t];break}}catch(u){console.log("exception retreiving data from api"),s=null}}if(s){s.bucket.src=r.thumburl,s.bucket.w=r.thumbwidth,s.bucket.h=r.thumbheight;var v=new Image;v.src=s.bucket.src;var w=r.extmetadata;s.info.fetched=!0,s.info.uploadUser=r.user,s.info.uploadDate=new Date(r.timestamp),s.info.mediatype=r.mediatype,s.info.dateRaw=i(w,"DateTime"),s.info.date=s.info.dateRaw?new Date(s.info.dateRaw):null,s.info.date&&isNaN(s.info.date.getTime())&&(s.info.date=s.info.dateRaw),s.info.dateOriginalRaw=i(w,"DateTimeOriginal"),s.info.dateOriginal=h(s.info.dateOriginalRaw),s.info.dateOriginal&&!s.info.dateOriginal.match(/[1-9]/)&&(s.info.dateOriginal=null),s.info.description=i(w,"ImageDescription"),s.info.descriptionSafe=e.trustAsHtml(s.info.description),s.info.gps={lat:i(w,"GPSLatitude"),"long":i(w,"GPSLongitude")};var x="unknown";"True"===i(w,"Copyrighted")&&(x="yes"),"False"===i(w,"Copyrighted")&&(x="no"),s.info.license={detected:i(w,"License"),name:i(w,"LicenseShortName"),usageTerms:i(w,"UsageTerms"),url:i(w,"LicenseUrl"),permission:i(w,"Permission"),credit:i(w,"Credit"),artist:i(w,"Artist"),copyrightForPublicDomainImages:x},s.original.url=r.url,s.original.w=r.width,s.original.h=r.height,s.original.size=r.size,s.original.mime=r.mime}else d.debug("No item found for API result:",q),d.debug("List of all items scanned: ",j)}var y=$(".gallery_main.bucket");l.listenToImageLoad(y,b.current),f()})},b.onThumbClick=function(a,b){l.setActiveItem(b)},b.onNextClick=function(){var a=b.current.index+1;l.setActiveItemByIndex(a)},b.onPrevClick=function(){var a=b.current.index-1;l.setActiveItemByIndex(a)}}];app.controller("GalleryController",galleryControllerParams);var app=angular.module("wikiwand"),UserVoice=null;analytics.gaInitialize(),app.controller("ShellController",["$window","$scope","$timeout","$q","ipCookie","Utilities","ActivationServiceRev2","userPreferences","$http","$rootScope","TestingService","MonService","MapHelper","Utilities","ActivationServiceRev2","userPreferences","$http","$rootScope","TestingService","MonService","MapHelper",function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=articleData&&"string"==typeof articleData.rawArticlePath;j.hideToolbar=n?!0:!1,j.hideTOC=!0,j.hideCoverImageLandscape=!0,j.precache_from_extension=precache_from_extension,console.log("run before dom ready");var o=this;window.jQuery||trackJsInfo(a,"jQuery not loaded properly");var p=!0;b.doc={title:document.title},b.win={location:{href:window.location.href}},j.menuOpen=!1,articleData?(articleData.mainImage&&articleData.mainImage.full&&(articleData.mainImage.full.urlDesktop=articleData.mainImage.full.urlDesktop.replace("http://","//"),articleData.mainImage.full.urlMobile=articleData.mainImage.full.urlMobile.replace("http://","//"),articleData.mainImage.full.originalUrl=articleData.mainImage.full.originalUrl.replace("http://","//")),j.articleData=articleData):j.articleData={},h.updatePageStyle("init"),j.btnHover=!1,j.canvasSupported=f.isCanvasSupported(),j.touchDevices=f.isTouchDevice(),m.getMapImage(),b.initializeShellController=function(){if(1==precache_from_extension)return $("#imagePlaceHolder").css({width:"100%",height:"auto",top:"0px",left:"0px",opacity:1}),void(j.tocShow=!1);if(trackJsInfo(a,"init activation service"),g.loadState(),trackJsInfo(a,"init testing service"),k.initializeTests(),trackJsInfo(a,"init mon service"),l.initMonService(),b.hideGlobalNotice=function(){b.showGlobalNotice=!1,e("wikiwand.dont_show_global_notice","1",{path:"/",expires:1})},serverData&&serverData.settings&&serverData.settings.msg_to_all_users){var d=serverData.settings.msg_to_all_users;1==d.show&&d.text.length>3&&!e("wikiwand.dont_show_global_notice")&&(b.globalNoticeText=d.text,b.showGlobalNotice=!0)}$(document).ready(function(){if("wikiwand"==serverData.layout){var a={daysHidden:1,daysReminder:1,title:"Wikiwand for iPhone",author:"Wikiwand",iOSUniversalApp:!1},b=!1;b&&(a.force="ios",a.daysHidden=0,a.daysReminder=0),$.smartbanner(a)}else j.tocShow="false"==serverData.showTOC?!1:!0}),$(window).load(function(){setTimeout(o.loadLast,3e3),1==loadedFromCache&&c(function(){o.testWikipediaRevision()},5e3),c(function(){o.testWikipediaRevision()},6e5)})},j.pressedTellAFriendLink=function(a,b){b||(b="undefined"),analytics.gaVirtualPageView("virtualpageview/invites/sent-"+b+"/"+a),analytics.gaVirtualPageView("virtualpageview/invites/sent-"+b),analytics.gaVirtualPageView("virtualpageview/invites/sent"),analytics.gaEvent("activation","sent referral",a)},j.$on("prefetchArticle",function(a,b){o.prefetch(b[0])}),j.$on("precacheArticle",function(a,b){o.precache(b[0])}),j.clickedOutside=function(){b.$broadcast("closePopups",[]);try{$("#main_menu .menu-tooltip").tooltipster("enable"),$(".disambig-wrapper").length>0&&f.isTouchDevice()&&$(".disambig-wrapper").tooltipster("hide")}catch(a){console.log("tooltipster not ready")}},j.clickedAnywhere=function(a){1===a.which&&b.$broadcast("clickedAnywhere",[])},j.reloadArticle=function(){analytics.gaEvent("debug","reloading page","reloadArticle"),setTimeout(function(){a.location.reload()},1e3)},j.loadGplusScript=function(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://apis.google.com/js/platform.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)},j.extensionPopup=function(a){g.extensionPopup(a)},j.activationHover=function(a){f.isTouchDevice()||(b.btnHover="enter"===a?!0:!1)},j.reportClick=function(a){analytics.gaVirtualPageView("virtualpageview/reportClick/"+a)},j.userClick=function(a,b,c){a&&analytics.gaVirtualPageView(c?"virtualpageview/userClick/"+b+"/"+c:"virtualpageview/userClick/"+b)},j.report=function(a){analytics.gaVirtualPageView("virtualpageview/"+a)},j.reportTomer=function(){var a="virtualpageview/article-promo-TIGER-STYLE/install-click-text/"+reportText;analytics.gaVirtualPageView(a)},j.activationButtonClicked=function(a){g.activationButtonClicked(a)},j.new_visitor_notice=function(){g.new_visitor_fold_clicked()},j.reportImage=function(b,c,d){trackJsInfo(a,"reportImage"),console.log("report cover image"),analytics.gaEvent("report-"+c,articleData.cache.canonical,d);var e=h.getPref("lstrpt");h.getPref("joined")||h.setPref("joined",(new Date).getTime());var f={lstrpt:e,joined:h.getPref("joined"),type:c,articleData:articleData,url:d},g=JSON.stringify(f),k=i({method:"post",url:"/api/reportImage",data:g});j.showReportCoverImageText1=!1,j.showReportCoverImageText2=!0,k.success(function(){h.setPref("lstrpt",(new Date).getTime()),console.log("success reporting image",d)}),k.error(function(){})},j.suggestImage=function(b,c,d){trackJsInfo(a,"suggestImage"),console.log("suggest cover image",d),analytics.gaEvent("report-"+c,articleData.cache.canonical,d);var e=h.getPref("lstrpt"),f={lstrpt:e,joined:h.getPref("joined"),type:c,articleData:articleData,url:d},g=JSON.stringify(f);j.showSuggestImageText1=!1,j.showSuggestImageText2=!0;var k=i({method:"post",url:"/api/reportImage",data:g});k.success(function(){h.setPref("lstrpt",(new Date).getTime()),console.log("success reporting image")}),k.error(function(){j.showSuggestImageText1=!1,j.showSuggestImageText2=!0})},o.userView=function(){i.jsonp("/api/userView").success(function(){console.log("user view ok")})},o.recache=function(){trackJsInfo(a,"recache"),articleData.rawArticlePath=articleData.rawArticlePath.split("#")[0];var d="/"+articleData.langCodeUrl+"/"+articleData.rawArticlePath+"?recache=1&callback=JSON_CALLBACK&cachedate="+articleData.cache.cacheDate+"&hash="+articleData.cache.hash;try{i.jsonp(d).success(function(a){if(a.success){if(a.newArticleData){if(a.newArticleData.cache.wikiRevision==articleData.cache.wikiRevision)return void console.log("Edits were made but not yet approved");b.differenceMinutes<120&&c(function(){b.showRefreshNotice=!0},2e4)}}else console.log("not recaching ",a)}).error(function(a){console.log("response ",a),console.log("caught problem parsing recache response")})}catch(e){console.log("caught problem parsing recache response exception"),trackJs.track(e)}},o.precache=function(b){trackJsInfo(a,"precache"),b=b.split("#")[0];var c=b+"?precache=1&prefetch=1&callback=JSON_CALLBACK";i.jsonp(c).success(function(a){a.success?console.log("successfully cached article "):console.log("failed precache",a)}).error(function(){})},o.prefetch=function(b){trackJsInfo(a,"prefetch"),b=b.split("#")[0];var c=b+"?precache=1&prefetch=1&callback=JSON_CALLBACK";console.log("issuing prefetch request ",c),i.jsonp(c).success(function(a){a.success?(1==p&&a.CDNFileUrl?o.prefetchSingleFile(a.CDNFileUrl):a.S3FileUrl&&o.prefetchSingleFile(a.S3FileUrl),a.fullUrl&&o.prefetchSingleFile(a.fullUrl),a.wikiwandUrl&&o.prefetchSingleFile(a.wikiwandUrl)):a.redirect?(console.log("redirect to ",a.redirect),o.prefetch(a.redirect)):console.log("not prefetching ",a)}).error(function(a,b,c,d){console.log("error ",a,b,c,d)})},o.prefetchSingleFile=function(b){trackJsInfo(a,"prefetchSingleFile"),b=b.replace("https://","//").replace("http://","//"),i({method:"GET",url:b}).success(function(){console.log("downloaded file (prefetch)")}).error(function(){console.warn("Failed to download a file (pre-fetching). This is not a critical issue, but doesaffect loading speed. If you are using an extension which forces the use of https, you might want to go to https://www.wikiwand.com where everything will run smoother.")})},o.testWikipediaRevision=function(){if(!articleData||!articleData.title||!articleData.cache||articleData.pageIsComparison)return void console.log("not an article");console.log('test wikipedia revision for article: "'+articleData.title+'"');var c=(new Date).getTime();b.differenceMinutes=(c-articleData.cache.cacheDate)/6e4;var d=articleData.langCodeUrl;"zh-"===d.substr(0,3)&&$.inArray(d,["zh-tw","zh-hk","zh-mo","zh-sg","zh-cn","zh-hant","zh-hans"])>=0&&(d="zh");var e=encodeURIComponent(decodeURIComponent(articleData.rawArticlePath)),f="https://"+d+".wikipedia.org/w/api.php?action=query&prop=revisions&format=json&rvprop=ids%7Cflags%7Ctimestamp&rvlimit=1&titles="+e+"&redirects=1&continue=&callback=JSON_CALLBACK";console.log("revision: issuing request to wikipedia api: "+f);try{i.jsonp(f).success(function(c){if(c&&c.query&&c.query.pages){console.log("revision: response from wikipedia api: "+JSON.stringify(c));var d=c.query.pages;"undefined"!=typeof c.warnings&&(console.log("revision: got warnings from API: "+JSON.stringify(c.warnings)),a.trackJs&&a.trackJs.track("revision: got warnings from API")),("object"!=typeof d||d&&0==d.length)&&(console.log("revision: no pages in Wikipedia API response: "+JSON.stringify(c)),a.trackJs&&a.trackJs.track("revision: no pages in Wikipedia API response"));for(var e in d){var f=d[e];("object"!=typeof f.revisions||f.revisions&&0==f.revisions.length)&&("undefined"!=typeof f.missing?-1==articleData.rawArticlePath.indexOf(":")?(console.log("revision: page is missing (possibly deleted): "+articleData.rawArticlePath),b.showDeletedNotice=!0):console.log("revision: page contains colons, probably a namespace, don't check for revisions"):(console.log("revision: no page.revisions in Wikipedia API response: "+JSON.stringify(f)),a.trackJs&&a.trackJs.track("revision: no page.revisions in Wikipedia API response")));for(var g in f.revisions){var h=f.revisions[g];console.log("revision: page revision: "+JSON.stringify(h));try{if("undefined"!=typeof h.revid){var i=h.revid.toString();if(console.log("revision: article revision:",articleData.cache.wikiRevision," / latest revision",i),i!=articleData.cache.wikiRevision)return console.log("revision: found newer version, calling recache"),o.recache();console.log("revision: got the latest version, doing nothing")}else console.log("revision: no revid in Wikipedia API response: "+JSON.stringify(f)),a.trackJs&&a.trackJs.track("revision: no revid in Wikipedia API response")}catch(j){console.log("revision: exception parsing wikipedia revision: "+JSON.stringify(j)),a.trackJs&&a.trackJs.track("revision: exception parsing wikipedia revision")}break}break}}}).error(function(b,c,d,e){trackJsInfo(a,"error issuing wikipedia request:"),trackJsInfo(a,"data:",JSON.stringify(b)),trackJsInfo(a,"status:",JSON.stringify(c)),trackJsInfo(a,"headers:",JSON.stringify(d)),trackJsInfo(a,"config:",JSON.stringify(e))})}catch(g){trackJsInfo(a,"problem with making api call to wikipedia"),a.trackJs.track(g)}},o.loadZopim=function(){return window.$zopim||function(a,b){var c,d,e;return d=window.$zopim=function(a){return d._.push(a)},d._=[],d.set=function(a){return d.set._.push(a)},d.set._=[],d.t=+new Date,e=d.s=a.createElement(b),e.async=!0,e.setAttribute("charset","utf-8"),e.src="//v2.zopim.com/?215gmrn5lqoqRey8Od4Dai8JmQ7Tatrf",e.type="text/javascript",c=a.getElementsByTagName(b)[0],c.parentNode.insertBefore(e,c)
}(document,"script")},j.loadUserVoice=function(){return UserVoice?void console.log("already have userVoice"):(console.log("loading uservoice"),UserVoice=window.UserVoice||[],function(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="//widget.uservoice.com/he5ETYZF0S28rbrL1qP0Q.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}(),void UserVoice.push(["identify",{}]))},o.loadLast=function(){serverData.settings&&serverData.settings.features&&serverData.settings.features.zopim&&1==serverData.settings.features.zopim&&(o.loadZopim(),$zopim(function(){console.log("loading zopim"),$zopim.livechat.hideAll()})),"/extension/thank-you"==window.location.pathname&&b.loadGplusScript()},angular.element(document).ready(function(){console.log("Dom ready"),trackJsInfo(a,"Dom ready"),"undefined"==typeof serverData.publisherHostCode&&c(function(){trackJsInfo(a,"setting tooltipster to #main_menu .menu-tooltip"),trackJsInfo(a,"jquery element is ",$("#main_menu .menu-tooltip")),$("#main_menu .menu-tooltip").tooltipster({theme:".toolbar-tooltip",arrow:!0,offsetY:10,position:"bottom",trigger:"hover",animation:"fade",speed:100,interactive:!1})},1e3),c(function(){j.precache_from_extension||(j.loadVariousPopups=!0)},3e3),c(function(){j.precache_from_extension||(j.hideToolbar=!1,j.hideTOC=!1,j.hideCoverImageLandscape=!1)},1500),$(document).keydown(function(a){if($(".search_btn ").hasClass("focus")&&13===a.keyCode){var b=$("#queryinput").val();0==$(".tt-suggestion").length&&(console.log("no suggestions"),document.location="/"+articleData.langCodeUrl+"/"+b)}}),f.isCanvasSupported()||($(".html5-only").show(),$("#loading").hide()),f.isTouchDevice()&&($("#main_menu").addClass("navbar_opaque"),$("#wikiwand_toc").css("overflow","auto")),$("#splashscreen").hide(),j.rtl=$("body").hasClass("rtl")}),b.$on("articleContentReadyFromShell",function(){j.hideToolbar=!1,j.hideTOC=!1,j.hideCoverImageLandscape=!1,precache_from_extension||"sidePanel"==serverData.layout||c(o.userView,2e3),j.cohorts&&"newtab"==j.cohorts.mon_bottom&&($("#footer-banner-wrapper").show(),$(".wikiwand_footer").addClass("no_margin"))}),j.previewSelection="true"==localStorage.previewSelection,j.togglePreviewSelection=function(){j.report("undefined"==typeof localStorage.previewSelection?"article-promo-SHORT-NOTICE/initial-toggle":"article-promo-SHORT-NOTICE/additional-toggle"),localStorage.previewSelection=j.previewSelection,toggleFrame(j.previewSelection)},j.togglePreviewSelectionFromSpan=function(){j.previewSelection=!j.previewSelection,j.togglePreviewSelection()}}]);var app=angular.module("wikiwand");app.controller("CoverImageController",["$scope","$rootScope","$window",function(a,b,c){var d=this;d.calculateCoverHeight=function(){!articleData.mainImage},b.initializeCoverImage=function(){trackJsInfo(c,"initializeCoverImage"),d.calculateCoverHeight(),a.finalImageURL=articleData.mainImage.full.urlDesktop.replace("http://","//").replace("https://","//")},articleData.mainImage&&b.initializeCoverImage()}]);var app=angular.module("wikiwand");app.controller("PreferredLanguagesController",["$scope","$log","$timeout","LanguagePreferences",function(a,b,c,d){var e=6;a.$on("openLanguagesDropdown",function(){a.list=[],c(function(){var b=d.getLangPrefs();if(articleData.availableLanguages){var c=articleData.availableLanguages,f={};_.each(b,function(a){1==a.fav?f[a.lang]={NameEnglish:a.NameEnglish,tooltip:"No such article in "+a.NameEnglish,hasArticle:!1,articleLink:"javascript:void(0)",langAbberviation:a.lang.slice(0,2),articleTitle:"",lang:a.lang,count:a.count,fav:a.fav}:delete f[a.lang]}),_.each(c,function(a){f[a.langCodeURL]&&(f[a.langCodeURL].hasArticle=!0,f[a.langCodeURL].articleLink=a.articleLink,f[a.langCodeURL].articleTitle=a.articleTitle,f[a.langCodeURL].tooltip="Read article in "+a.langEnglishName)});var g=_.sortBy(f,function(a){return-a.count});if(g=g.slice(0,e),g.length>5){var h=g[5].count;Object.keys(b).length>e&&d.removeLangsLowerThanCount(h)}a.list=g}else a.list=[];var i=0;_.each(a.list,function(a){a.hasArticle&&i++}),a.numOfAvailablePreferredLanguages=i},0)})}]);var app=angular.module("wikiwand");app.controller("AllAvailableLanguagesController",["LanguagePreferences","$scope","$timeout","$log","$rootScope","$http","Utilities",function(a,b,c,d,e,f,g){b.filterByQueryWikipedia=function(a){return b.filterQueryWikipedia?~a.NameEnglish.toLowerCase().indexOf(b.filterQueryWikipedia.toLowerCase())?!0:~a.NameNative.toLowerCase().indexOf(b.filterQueryWikipedia.toLowerCase())?!0:~a.CodeURL.toLowerCase().indexOf(b.filterQueryWikipedia.toLowerCase())?!0:!1:!0},b.filterByQueryArticle=function(a){return b.filterQuery?~a.langEnglishName.toLowerCase().indexOf(b.filterQuery.toLowerCase())?!0:~a.langNativeName.toLowerCase().indexOf(b.filterQuery.toLowerCase())?!0:~a.langCodeURL.toLowerCase().indexOf(b.filterQuery.toLowerCase())?!0:!1:!0},b.filterUnrecognizedLangs=function(a){return a.langAbberviation?!0:!1},b.refreshFavoritesList=function(){var a=_.filter(b.wikipediaLanguages,function(a){return 1==a.fav});b.favoriteLanguages=a},b.$on("showAllArticleLanguagesFunc",function(){e.langOpenArticle=!0,b.articleLanguageLinks=articleData.availableLanguages?articleData.availableLanguages:[],c(function(){g.isTouchDevice()||$("#lang ul").niceScroll({cursorcolor:"#000",cursoropacitymax:.3,cursorwidth:3,cursorborderradius:4,railpadding:{top:2,right:2,left:2,bottom:2},cursorborder:"none",railalign:"left",zindex:360}),$("#lang_input").focus()},10)}),b.$on("showAllWikipediaLanguagesFunc",function(){g.isTouchDevice()||c(function(){$("#p-lang_search ul").niceScroll().hide()},0),e.langOpenWikipedia=!0,f.get("/js/wikipedia-lang-infos-client-dictionary.js").success(function(d){b.wikipediaLanguages=_.toArray(d),Object.keys(b.wikipediaLanguages).length>0&&(_.each(b.wikipediaLanguages,function(a){a.CodeURL&&(a.langAbberviation=a.CodeURL.slice(0,2))}),_.each(a.getLangPrefs(),function(a){_.each(b.wikipediaLanguages,function(c,d){b.wikipediaLanguages[d].CodeURL==a.lang&&(b.wikipediaLanguages[d].fav=a.fav)})}),b.refreshFavoritesList(),c(function(){$("#lang ul, #p-lang_search ul").getNiceScroll().resize(),$("#lang_input").focus()},500))})}),b.$on("hideAllArticleLanguagesFunc",function(){b.wikipediaLanguages=[],e.langOpenArticle=!1}),b.$on("hideAllWikipediaLanguagesFunc",function(){b.wikipediaLanguages=[],e.langOpenWikipedia=!1}),b.toggleFavorite=function(c,d){a.toggleLangFave(c,d);var e=a.getLangPrefs();_.each(b.wikipediaLanguages,function(a,d){a.CodeURL==c&&(b.wikipediaLanguages[d].fav=e[c].fav)}),b.refreshFavoritesList()}}]);var MAX_RESULTS_PER_LANG=8,MAX_PRELOADED_RESULTS=3,app=angular.module("wikiwand"),SEARCH_RESULTS_LINE_HEIGHT=40,BASE_URL_API="//www.wikiwand.com",RTL_LANGS=["aeb","ar","arc","arq","ary","arz","az-ara","bqi","ckb","fa","glk","ks-arab","he","lat-hebr","ps","sd","ur","ydd","yi"],preload_dict={};app.controller("ArticleSearchControllerRev2",["$scope","$rootScope","$log","LanguagePreferences","$timeout","$http","Utilities",function(a,b,c,d,e,f,g){var h=this,i={},j=!1;h.doesConnectionExist=function(){var a=new XMLHttpRequest,b="/favicon.ico",c=Math.round(1e4*Math.random());a.open("HEAD",b+"?rand="+c,!1);try{return a.send(),a.status>=200&&a.status<304?!0:!1}catch(d){return!1}},h.preloadResult=function(){if("widget"==b.searchType){var c=0,d=a.search.results;_.each(d,function(a){if("google-suggest"!=a.lang&&!(c>MAX_PRELOADED_RESULTS-1||preload_dict[a.linkEncoded])){c++;var b=a.linkEncoded+"#precache_from_extension=true",d=document.createElement("iframe");d.frameBorder="none",d.id="wikiwand_precache_"+c,d.src=b,preload_dict[a.linkEncoded]=!0,document.body.appendChild(d),$(d).css({width:"0px",height:"0px",top:"0px",left:"100%","z-index":1e3,position:"fixed"}),console.log("preloading ",a.link)}})}},h.testCtrl=function(){j?(console.log("double click ctrl"),b.showSearch?(b.openSearch("close"),analytics.gaEvent("search","double-ctrl","close")):(b.openSearch("open"),analytics.gaEvent("search","double-ctrl","open"),setTimeout(function(){$("#queryinput").focus()},100))):(j=!0,e(function(){j=!1},300))},$(window).keyup(function(a){return 191!=a.which||b.showSearch||(b.openSearch("open"),analytics.gaEvent("search","slash hit","open"),setTimeout(function(){$("#queryinput").focus()},100)),17!=a.which?!0:void h.testCtrl()}),b.showSearch=!1,a.searchFocus=!1,b.openSearch=function(c){"open"===c?(analytics.gaEvent("search","open","open"),b.showSearch=!0,e(function(){angular.element("#queryinput").focus()},0),a.searchFocus=!0):"close"===c&&(analytics.gaEvent("search","open","close"),a.searchFocus=!1,b.showSearch=!1)};var k=function(){function a(a){var b=$("body").hasClass("rtl");return""===a?b:a.match(d)?!0:a.match(e)?b:!1}var b="؀-ۿ";b+="ݐ-ݿ",b+="ﭐ-﷿",b+="ﹰ-﻿",b+="֑-״";var c="\\.,-\\/#!$%\\^&\\*;:{}=\\-_`~()",d=new RegExp("^["+c+"]*["+b+"]"),e=new RegExp("^["+c+"]*$"),f=function(){var b=$("#queryinput").val(),c=a(b),d=$("#queryinput");c?d.addClass("rtl"):d.removeClass("rtl")};$("#queryinput").keypress(f),$("#queryinput").keyup(f)};k(),a.navigateTo=function(a){return"widget"==b.searchType?(console.log("url ",a),analytics.gaVirtualPageView(-1==a.indexOf("//")?"virtualpageview/search-widget/clickW":"virtualpageview/search-widget/clickG"),document.cookie="wikiwand.agent.fromSearchWidget=true; path=/",void(serverData&&serverData.search&&"_blank"==serverData.search.target?window.open(a,"_blank"):window.top.location.href=a)):void(window.location.search.indexOf("in_iframe")>-1?window.top.location.href=a:window.location.href=a)};var l=["en"];a.resultClicked=function(c,d){var e=-2;return c.preventDefault(),_.each(a.search.results,function(b,c){b.linkEncoded==d?(a.search.results[c].selected=!0,a.search.results[c].c="loading",a.search.selectedIndex=c,e=c):a.search.results[c].selected=!1}),-2==e?void console.log("id is null"):(b.searchFocus=!0,a.noSelection=!1,void a.navigateTo(d))},a.testKeyboard=function(c){c&&17==c.which&&h.testCtrl();var d=!1;if(c&&(c.preventDefault(),c.stopPropagation()),c&&27==c.which&&b.openSearch("close"),!c||33!=c.which&&36!=c.which||(a.search.selectedIndex=0,$(".results-container").scrollTop(0),d=!0),!c||34!=c.which&&35!=c.which||($(".results-container").scrollTop(1e3),a.search.selectedIndex=a.search.results.length-1,d=!0),c&&38==c.which&&("widget"==b.searchType&&0==a.search.selectedIndex&&(a.search.selectedIndex=1),-1!=a.search.selectedIndex&&(a.search.selectedIndex=a.search.selectedIndex-1),d=!0),c&&40==c.which&&("widget"==b.searchType&&a.search.selectedIndex==a.search.results.length-1&&(a.search.selectedIndex=a.search.selectedIndex-1),a.search.selectedIndex!=a.search.results.length&&(a.search.selectedIndex=a.search.selectedIndex+1),d=!0),c&&13==c.which){if(1==a.fullSearch){var e="/"+articleData.langCodeUrl+"/"+a.search.query+"?fullSearch=true";return a.navigateTo(e),void(a.waiting=!0)}if(-1==a.search.selectedIndex){var e="/"+articleData.langCodeUrl+"/"+a.search.query;return"widget"==b.searchType&&(e="true"==serverData.search.cse?"/google-search?q="+a.search.query:"//www.google.com/search?q="+a.search.query,"bing"==serverData.search.provider&&(e="//www.bing.com/search?q="+a.search.query)),void a.navigateTo(e)}var f=(a.search.results[a.search.selectedIndex],a.search.selectedIndex);return b.searchFocus=!0,a.search.results[a.search.selectedIndex].c="loading",void a.navigateTo(a.search.results[f].link)}if(d){_.each(a.search.results,function(b,c){a.search.results[c].selected=c==a.search.selectedIndex?!0:!1}),a.noSelection=-1==a.search.selectedIndex?!0:!1,a.fullSearch=a.search.selectedIndex==a.search.results.length?!0:!1;var g=$("#result_"+a.search.selectedIndex);$("#search_description").fadeOut(200),h.setHoverCard(g),g.position()&&console.log("element scrolll top ",g.position().top);{var i=$(".results-container");i.scrollTop()}if(g.position()){var j=g.position().top;SEARCH_RESULTS_LINE_HEIGHT>j&&(console.log("element over top of container"),i.scrollTop(i.scrollTop()-SEARCH_RESULTS_LINE_HEIGHT)),j>i.height()-2*SEARCH_RESULTS_LINE_HEIGHT&&(console.log("element over bottom of container"),i.scrollTop(i.scrollTop()+2*SEARCH_RESULTS_LINE_HEIGHT))}}},a.initSearch=function(c){a.noResults=!1,c&&(b.searchType=c,serverData.search&&"true"==serverData.search.autoFocus&&$("#queryinput").focus()),l="undefined"!=typeof articleData&&articleData.langCodeUrl?d.getTopNLangs(3,articleData.langCodeUrl):d.getTopNLangs(3,null),"widget"==b.searchType&&(MAX_RESULTS_PER_LANG=5,l=["en"]),a.waiting=!1,a.search={},a.noSelection=!0,a.search.selectedIndex=-1,a.search.results=[],a.testKeyboard();if(articleData.searchTranslation&&$("#queryinput").attr("placeholder",articleData.searchTranslation),a.$watch("search.query",function(){""==a.search.query&&(a.search.results=[]),e.cancel(a.searchTriggerTimeoutPromise),e.cancel(a.preloadTimeoutPromise),a.search.selectedIndex=-1,a.noSelection=!0,a.fullSearch=!1,$(".results-container").scrollTop(0),a.searchTriggerTimeoutPromise=e(h.triggerSearch,200),"widget"==b.searchType&&("bing"==serverData.search.provider?h.issueBingRequest(a.search.query):h.issueGoogleRequest(a.search.query),!a.madeQuery&&a.search.query&&""!=a.search.query&&(analytics.gaVirtualPageView("virtualpageview/search-widget/used-search"),a.madeQuery=!0))},!0),"widget"==b.searchType){a.$watch(function(a){return a.search&&a.search.results?a.search.results:!1},function(){e(function(){var a;if(a=serverData.search.key&&"newTabWiki"==serverData.search.key?$(".results-container").height():$("#wikiwand_search").height(),parent.postMessage({height:a,width:$("#wikiwand_search").width()},"*"),serverData.search.key&&"newTabWiki"==serverData.search.key){var b=document.getElementById("articleSearch");Ps.update(b)}},10)}),serverData.search.key&&"newTabWiki"==serverData.search.key&&($("#queryinput").on("focus",function(){$("#articleSearch").css("opacity",1),e(function(){console.log("widget height is  ",$("#wikiwand_search").height()),parent.postMessage({height:$(".results-container").height(),width:$("#wikiwand_search").width()},"*");var a=document.getElementById("articleSearch");Ps.update(a)},10)}),$("#queryinput").on("blur",function(){$("#articleSearch").css("opacity",0)}));var f=0;a.$watch(function(a){return a.search&&a.search.query?a.search.query:!1},function(){f++,""==a.search.query&&(a.search.results=[])})}},h.triggerSearch=function(){"undefined"!=typeof a.search.query&&""!=a.search.query&&_.each(l,function(c){a.waiting=!0,h.issueSearchRequest(c,a.search.query,!1),"widget"!=b.searchType&&h.issueSearchRequest(c,a.search.query,!0)})},h.issueGoogleRequest=function(b){if("undefined"!=typeof b){var c="//suggestqueries.google.com/complete/search?client=chrome&hl=en&q="+b+"&callback=JSON_CALLBACK";f.jsonp(c).success(function(b){if(""!=a.search.query){b&&b[1]&&b[1].length>0&&(b.results=b[1].slice(0,5)),a.noResults=!1,a.search.selectedIndex=-1,a.search.results=_.reject(a.search.results,function(a){return"google-suggest"==a.lang});var c=0;_.each(b.results,function(b){if(0!=b.indexOf("http://")&&0!=b.indexOf("https://")){var d={};0==c&&(d.firstInlang=!0,d.langtag="from google"),d.lang="google-suggest",d.rtl=!1,d.T=b,d.desc=null,d.link="true"==serverData.search.cse?"/google-search?q="+b:"//www.google.com/search?q="+b,d.backgroundImageSring="url(/img/google_search_icon.png)",d.linkEncoded=encodeURI(d.link),a.search.results.push(d),c++}}),a.search.results=_.sortBy(a.search.results,function(a){return _.indexOf(l,a.lang)}),a.noResults=0==a.search.results.length}}).error(function(b,c){if(console.log("error receiving response from google api ",c),0==h.doesConnectionExist()){var d={};d.lang="google-suggest",d.rtl=!1,d.T="No internet conenction",a.search.results=_.reject(a.search.results,function(a){return"google-suggest"==a.lang}),a.search.results.push(d)}})}},h.issueBingRequest=function(b){if(console.log("issue bing request"),"undefined"!=typeof b){var c="http://api.bing.com/osjson.aspx?query="+b+"&market=en_us&JsonType=callback&JsonCallback=JSON_CALLBACK";f.jsonp(c).success(function(b){if(""!=a.search.query){console.log("data from bing ",b),b&&b[1]&&b[1].length>0&&(b.results=b[1].slice(0,5)),a.noResults=!1,a.search.selectedIndex=-1,a.search.results=_.reject(a.search.results,function(a){return"bing-suggest"==a.lang});var c=0;_.each(b.results,function(b){if(0!=b.indexOf("http://")&&0!=b.indexOf("https://")){var d={};0==c&&(d.firstInlang=!0,d.langtag="from bing"),d.lang="bing-suggest",d.rtl=!1,d.T=b,d.desc=null,d.link="//www.bing.com/search?q="+b,d.backgroundImageSring="url(/img/bing_search_icon.png)",d.langtag="from bing",d.linkEncoded=encodeURI(d.link),a.search.results.push(d),c++}}),a.search.results=_.sortBy(a.search.results,function(a){return _.indexOf(l,a.lang)}),a.noResults=0==a.search.results.length}}).error(function(b,c){if(console.log("error receiving response from bing api ",c),0==h.doesConnectionExist()){var d={};d.lang="google-suggest",d.rtl=!1,d.T="No internet conenction",a.search.results=_.reject(a.search.results,function(a){return"google-suggest"==a.lang}),a.search.results.push(d)}})}},h.issueSearchRequest=function(c,d,e){var g=BASE_URL_API+"/api/search/"+c+"/"+d;1==e&&(g=BASE_URL_API+"/api/searchwiki/"+c+"/"+d),f({method:"GET",url:g}).success(function(f){if(""!=a.search.query&&(0==e&&(i["/"+c+"/"+d]=!0),1!=e||!i["/"+c+"/"+d])){a.noResults=!1,a.search.selectedIndex=-1,a.testKeyboard(),a.waiting=!1,a.search.results=_.reject(a.search.results,function(a){return a.lang==f.lang});var g=0;_.each(f.results,function(c){g>MAX_RESULTS_PER_LANG-1||(0==g&&(c.firstInlang=!0,"widget"==b.searchType&&(c.langtag="from wikipedia",serverData.search.key&&"newTabWiki"==serverData.search.key&&(c.langtag="from Wikiwand"))),c.lang=f.lang,c.rtl=-1!=_.indexOf(RTL_LANGS,f.lang),c.link="/"+f.lang+"/"+c.t.split(" ").join("_"),c.linkEncoded=encodeURI(c.link),c.backgroundImageSring=null==c.u?"url(//s3.amazonaws.com/assets.wikiwand.com/img/search_placeholder.png)":"url('"+c.u+"')",c.desc=null==c.u?"<p>"+c.d+"</p>":null==c.d?"":"<img src='"+c.u+"' alt='wikiwand'/><p>"+c.d+"</p>","ww-c-disambig"==c.c&&(c.desc=""),a.search.results.push(c),g++)}),a.search.results=_.sortBy(a.search.results,function(a){return _.indexOf(l,a.lang)}),a.noResults=0==a.search.results.length?!0:!1}}).error(function(){})},h.setHoverCard=function(a){var b=a,c=b.offset(),d=b.attr("desc-attr");d&&(""!=d&&d.length>20&&$("#search_description").stop().fadeIn(100).html(d).css({top:c.top-$(window).scrollTop(),left:c.left-$("#search_description").width()-32}),b.hasClass("rtl")?$("#search_description").addClass("rtl"):$("#search_description").removeClass("rtl"))},angular.element(document).ready(function(){g.isTouchDevice()||($("body").on("mouseenter",".searchResult",function(){h.setHoverCard($(this))}),$("body").on("mouseleave",".searchResult, .results-container",function(){$("#search_description").fadeOut(200),$(".searchResult").removeClass("selectedResult")}))});navigator.userAgent.toLowerCase()}]);var app=angular.module("wikiwand");app.controller("ToolbarController",["$scope","$log","Utilities","ipCookie","$timeout","$rootScope","userPreferences","$route",function(a,b,c,d,e,f,g){function h(){try{$("#main_menu .menu-tooltip").tooltipster("disable"),$("#main_menu .menu-tooltip").tooltipster("hide")}catch(a){console.log("tooltipster not ready")}$("#header").addClass("foldfix")}$(document).keydown(function(a){if(191===a.keyCode){var b=$("#queryinput");return b.is(":focus")?!0:(b.focus(),!1)}}),a.langAbbreviation=articleData.langCodeUrl.slice(0,2).toUpperCase(),a.toggleWikiwandMenu=function(b){1!=a.showWikiwandMenu?(a.closeAllMenus(),a.showWikiwandMenu=!0,h()):a.closeAllMenus(),b.stopPropagation()},a.toggleLanguageMenu=function(b){1!=a.showLanguageMenu?(a.closeAllMenus(),a.showLanguageMenu=!0,f.$broadcast("openLanguagesDropdown"),h()):a.closeAllMenus(),b.stopPropagation()},a.togglePerMenu=function(b){1!=a.showPerMenu?(a.closeAllMenus(),a.showPerMenu=!0,h(),analytics.gaEvent("preferences","popup","opened")):(a.closeAllMenus(),g.setPref("prefAttention","true")),b.stopPropagation()},a.hidePerMenu=function(b){$(".menu_per").fadeOut(),setTimeout(function(){a.showPerMenu=!1},1e3),g.setPref("prefAttention","true"),b.stopPropagation()},e(function(){if("true"!=g.getPref("prefAttention")||serverData.callToPersonalize){if(!f.activation)return;var b=f.activation.vetek>1;(f.inFrame||serverData.callToInstallExtension||serverData.callToPersonalize)&&(b=!0,serverData.callToPersonalize&&(analytics.gaVirtualPageView("/virtualpageview/article-promo-pers/impression"),f.callToPersonalize=!0)),"homepage"==d("wikiwand.activation.first_impression")&&(b=!0),$("body").hasClass("rtl")&&(b=!1),c.isTouchDevice()&&(b=!1),b&&(a.showPerMenu=!0,h(),f.prefsTouched="true"==g.getPref("prefsTouched"),"true"!=g.getPref("prefAttention")&&e(function(){$(".per_serif").addClass("new_pref")},0),g.setPref("prefAttention","true"))}},2e3),a.showUserVoice=!1,a.showCoverReport=!1;var i=function(){return UserVoice?void UserVoice.push(["embed","#user_voice_wrapper",{trigger_style:"icon",accent_color:"#3392af",trigger_color:"white",trigger_background_color:"rgba(46, 49, 51, 0.6)",locale:"en",contact_title:"Report a Bug (English please)",smartvote_title:"What should we add next?"}]):(f.loadUserVoice(),void setTimeout(i,50))};a.openUserVoiceDialog=function(){i()},a.toggleFeedbackMenu=function(b){"undefined"==typeof UserVoice&&f.loadUserVoice(),1!=a.showFeedbackMenu?(a.showUserVoice=!1,a.showCoverReport=!1,f.showReportCoverImageText1=!0,f.showReportCoverImageText2=!1,a.closeAllMenus(),a.showFeedbackMenu=!0,h()):a.closeAllMenus(),b.stopPropagation()},a.toggleShareMenu=function(b){if(1!=a.showShareMenu){a.closeAllMenus(),a.showShareMenu=!0;var c=encodeURIComponent(window.location.href);$(".share-facebook a").attr("href","https://www.facebook.com/sharer/sharer.php?u="+c),$(".share-twitter a").attr("href","https://twitter.com/home?status="+c),$(".share-gplus a").attr("href","https://plus.google.com/share?url="+c),$(".share-reddit a").attr("href","https://.com/share?url="+c),f.articleData.pageIsArticle&&!f.articleData.pageIsComparison?$(".share-gmail a").attr("href","http://mail.google.com/mail/?view=cm&fs=1&tf=1&to=&su="+encodeURIComponent(f.articleData.title)+" - From Wikipedia&body=Check this out%0A%0A"+c):$(".share-gmail a").attr("href","http://mail.google.com/mail/?view=cm&fs=1&tf=1&to=&su="+encodeURIComponent(document.title)+"&body=Check this out%0A%0A"+c),h()}else a.closeAllMenus();b.stopPropagation()},a.today=(new Date).getDate(),a.closeAllMenus=function(){a.showWikiwandMenu=!1,a.showLanguageMenu=!1,f.callToPersonalize||(a.showPerMenu=!1),a.showFeedbackMenu=!1,a.showShareMenu=!1,$("#header").removeClass("foldfix")},a.clickedInside=function(a){a.stopPropagation()},a.$on("closePopups",function(){a.closeAllMenus()}),angular.element(document).ready(function(){c.isTouchDevice()||($(window).on("scroll",function(){var a=$(this).scrollTop();a>250?($("#header").addClass("fold").removeClass("hovered"),$(".new_visitor").addClass("display_after_scroll"),$('.wikipedia_tooltip:not(".new_visitor")').removeClass("active"),$("#main_menu").addClass("navbar_opaque")):(f.articleData.mainImage&&("cover"==f.articleData.mainImage.mode||"new_cover"==f.articleData.mainImage.mode&&$("#cover_image_wrapper").length>0)&&$("#main_menu").removeClass("navbar_opaque"),$("#header").removeClass("fold"),$('.wikipedia_tooltip:not(".new_visitor")').addClass("active"))}),$("body").on("mouseenter","#header.fold",function(){$(this).addClass("hovered")}))})}]);var app=angular.module("wikiwand");app.controller("TableOfContentsController",["$scope","$rootScope","$log","Utilities","$timeout","userPreferences",function(a,b,c,d,e,f){if(1!=precache_from_extension){var g=this;g.$scrollableElement=$(document),g.$headerElement=$("#header"),a.button={},a.activeButton=null;var h,i;$(window).resize(function(){e.cancel(i),i=e(function(){j=$(window).width(),j>920?(b.tocShow=f.getPref("TOC_folded")===!0?!1:!0,b.mobileRes=!1):(b.tocShow=!1,b.mobileRes=!0)},100)}),$(document).keydown(function(a){$("#gallery").is(":visible")||1!=b.searchFocus&&(a.shiftKey||a.altKey||a.ctrlKey||a.metaKey||(37===a.keyCode&&g.scrollToNextOrPrevSection(-1),39===a.keyCode&&g.scrollToNextOrPrevSection(1)))}),b.tocFold=function(c){console.log("toc fold"),c&&(b.tocShow=a.rtl?"swipeRight"===c:"swipeLeft"===c),"mobile"!==c&&(b.tocShow=!b.tocShow,b.tocShow===!1?f.setPref("TOC_folded",!0):b.tocShow===!0&&f.setPref("TOC_folded",!1))},b.tocMobileFold=function(){b.mobileRes===!0&&(b.tocShow=!1)},b.tocGenerate=function(){var b=["SUP"],c=function(a){for(var b=a,c=a.childNodes.length-1;c>=0;c--){var d=a.removeChild(a.childNodes[c]);a.parentNode.insertBefore(d,b),b=d}a.parentNode.removeChild(a)},f=function(a){for(var d=Array.prototype.slice.apply(a.getElementsByTagName("*"),[0]),e=0;e<d.length;e++)-1==b.indexOf(d[e].nodeName)&&c(d[e])},h=function(a){if(a.text&&a.text.indexOf("<")>-1){var b=document.createElement("div");b.innerHTML=a.text,f(b),a.sanitizedText=b.innerHTML}else a.sanitizedText=a.text;if(a.children)for(var c in a.children){var d=a.children[c];d&&h(d)}};e(function(){a.articleTitle=articleData.title,articleData.TOC&&(h(articleData.TOC),a.level2=articleData.TOC.children)},0),e(function(){if(!d.isTouchDevice()){var a=window.location.hash,b="";if(a&&(b=a.substr("#/"===a.substr(0,2)?2:1)),""!=b){var c="toc_btn_"+b.split("%20").join("_").split(" ").join("_"),e="#"+g.escapeStringForSelector(c);try{var f=angular.element(e).children("a").eq(0)}catch(h){console.log("problem parsing hashtag")}if(f&&f.length>0){$("nav#header").addClass("fold"),g.clickTocButton(f,!0);var i=0,j=setInterval(function(){g.clickTocButton(f,!0),i=0},1e3),k=function(){j&&(clearInterval(j),j=null)};$(document).scroll(function(){i++>1&&k()}),setTimeout(function(){k()},8e3)}else console.log("error finding selector children: ",e)}else g.updateTocActiveButton()}g.$scrollableElement.scroll(function(){return g.updateTocActiveButton()})},200)},g.updateTocActiveButton=function(){var a=$("#article_content_wrapper"),b=a.find("#overview"),c=this.$scrollableElement.scrollTop(),d=0,f=0;g.$headerElement&&(f=g.$headerElement.height());var i=$(window).height()-f;a.find("h2 .mw-headline, h3 .mw-headline").each(function(){var a=$(this),e=.3,f=Math.min(i,d)*e,h=g.getElementOffset(a)-f;return d=a.outerHeight(),c>=h?(b=$(this),!0):!1}),e.cancel(h),h=e(function(){$(".toc_list > li, .toc_list > li a").removeClass("active"),b&&g.activateTocButtonBySection(b)},100)},this.scrollToNextOrPrevSection=function(b){var c=a.activeButton;if(c){var d=$("#wikiwand_toc").find("li"),e=d.index(c),f=e+b;if(!(0>f||f>=d.length)){var h=d.eq(f),i=h.find("a").eq(0);i&&1===i.length&&g.clickTocButton(i)}}},g.activateTocButtonBySection=function(a){var b="#toc_btn_"+g.escapeStringForSelector(a.attr("id")),c=$(b);0!==c.length&&this.activateTocButton(c)},g.activateTocButton=function(b){a.activeButton=b;var c=b.parent("ol").length>0?!0:!1,d=b;c&&(d=b.parent().parent(),d.addClass("active").children("a").addClass("active"));var e=d.position().top,f=d.outerHeight(),g=$("#wikiwand_toc").height(),h=Math.round(e-(g-f)/2);0>h&&(h=0),h>g&&(h=g);var i=200;$("#wikiwand_toc").stop().animate({scrollTop:h},{duration:i}),b.addClass("active").children("a").addClass("active")},g.getElementOffset=function(a){var b=10,c=a.offset().top,d=0;g.$headerElement&&(d=g.$headerElement.height());var e=Math.floor(c-d-b);return e},g.scrollToElement=function(a,b){if(0===a.length)return void console.warn("ScrollToElement(): element not found:",a);if(a.length>1)return void console.warn("ScrollToElement(): more than one element found: ",a);var c=g.getElementOffset(a),e=Math.abs(g.$scrollableElement.scrollTop()-c)/10,f=200,h=400;f>e&&(e=f),e>h&&(e=h),b&&(e=0),d.isTouchDevice()||b?$("html,body").scrollTop(c):$("html,body").stop().animate({scrollTop:c},{duration:e})},$("body").on("click","#toc_btn > span",function(){$("html,body").animate({scrollTop:0},200),window.location.hash=""}),b.scrollToArticleSection=function(a){var b=angular.element("#"+g.escapeStringForSelector(a));g.scrollToElement(b)},g.escapeStringForSelector=function(a){return a?a.replace(/([ #;?&,.+*~\':"!^$[\]()=>|\/@])/g,"\\$1"):a},g.clickTocButton=function(a,b){if(a&&1==a.length){var c=a.attr("href").substr(1),d="#"+g.escapeStringForSelector(c),e=angular.element(d),f=e.parents("div.collapse_title, div.collapse");if(f.length>0){var h=f.parent();h.children("div.collapse_title").addClass("active"),h.children("div.collapse").show()}g.scrollToElement(e,b),$("#content h2 span, #content h3 span").removeClass("active"),e.addClass("active")}},a.button.doClick=function(a){var b=a.currentTarget,c=angular.element(b);g.clickTocButton(c)};var j=$(window).width();920>j&&(b.tocShow=!1,b.mobileRes=!0),b.tocGenerate()}}]);var app=angular.module("wikiwand");app.service("LanguagePreferences",["$rootScope","$http",function(a,b){function c(){try{if(localStorage.wikiwand_languages||g(),localStorage.wikiwand_languages_rev2)return;var a=angular.fromJson(localStorage.wikiwand_languages);console.log("old language pref ",a),b.get("/js/wikipedia-lang-infos-client-dictionary.js").success(function(b){var c=b;_.each(c,function(b,d){a[c[d].CodeURL]&&(console.log("found match ",c[d].CodeURL),a[c[d].CodeURL].fav=!0,a[c[d].CodeURL].lang=c[d].CodeURL,a[c[d].CodeURL].NameEnglish=b.NameEnglish,a[c[d].CodeURL].fav=!0,a[c[d].CodeURL].count>3&&(e[c[d].CodeURL]=a[c[d].CodeURL]))}),f()})}catch(c){console.log("migration of old languages storage failed",c)}}function d(){if(c(),h(),"undefined"!=typeof articleData&&articleData.langCodeUrl){var a=articleData.langCodeUrl;e[a]&&(e[a].count=e[a].count+1,f())}}var e={},f=function(){localStorage.wikiwand_languages_rev2||(localStorage.wikiwand_languages_rev2={}),localStorage.wikiwand_languages_rev2=angular.toJson(e)},g=function(){try{if(serverData&&serverData.agent&&serverData.agent.clientLanguages){var a={en:{count:4}},b=serverData.agent.clientLanguages.split(","),c=!1;console.log("array ",b),_.each(b,function(b){var d=b.split(";")[0].split("-")[0];console.log("lang",d),"en"==d||c||(a[d]={count:4},c=!0)}),localStorage.wikiwand_languages=angular.toJson(a)}else e={en:{count:1,fav:!0,lang:"en",NameEnglish:"English"},fr:{count:1,fav:!0,lang:"fr",NameEnglish:"French"}},f()}catch(d){e={en:{count:1,fav:!0,lang:"en",NameEnglish:"English"},fr:{count:1,fav:!0,lang:"fr",NameEnglish:"French"}},f()}},h=function(){localStorage.wikiwand_languages_rev2&&(e=angular.fromJson(localStorage.wikiwand_languages_rev2))};return d(),{getTopNLangs:function(a,b){h();for(var c in e)e[c].lang=c,""===c&&delete e[c];var d=_.toArray(e),f=_.sortBy(d,function(a){var b=a.count;return a.fav&&(b+=50),b}).reverse(),g=[];b&&g.push(b);for(var i in f)f[i].lang!==b&&1==f[i].fav&&g.push(f[i].lang);return g=_.first(g,a)},getLangPrefs:function(){return e},toggleLangFave:function(a,b){e[a]?(e[a].fav=1==e[a].fav?!1:!0,e[a].NameEnglish=b):e[a]={count:1,fav:!0,lang:a,NameEnglish:b},console.log("toggled fav for ",a,"new value is ",e[a].fav),f(),localStorage.wikiwand_last_save=(new Date).getTime()},removeLangsLowerThanCount:function(a){_.each(e,function(b){b.count<a&&delete e[b.lang]}),f()}}}]);var app=angular.module("wikiwand");app.service("userPreferences",["$rootScope","Utilities","$window",function(a,b,c){a.prefsTouched=!1;var d={},e=function(){localStorage.wikiwand_user_prefs||(localStorage.wikiwand_user_prefs={}),localStorage.wikiwand_user_prefs=angular.toJson(d),localStorage.wikiwand_last_save=(new Date).getTime()},f=function(){if(localStorage.wikiwand_user_prefs)try{d=angular.fromJson(localStorage.wikiwand_user_prefs)}catch(b){c.trackJs&&(trackJsInfo(c,"preferences json string is "+localStorage.wikiwand_user_prefs),c.trackJs.track("problem parsing user prefs",b.message))}return a.isHttps="https:"==location.http,d},g=function(e){if(a.articleData&&!a.articleData.pageIsArticle){if("/news"!=window.location.pathname.toLowerCase())return void console.log("not article page, not loading styling");console.log("news page")}trackJsInfo(c,"updatePageStyle "+e),d=f(),a.tocShow=1==d.TOC_folded?!1:!0;
var g=[];b.isTouchDevice()&&g.push("touch"),b.isItInternetExplorer()&&g.push("ie");var h=!1;if(serverData.agent&&"Chrome"==serverData.agent.family&&a.activation){var i=a.activation.joined,j=new Date("Thu, 11 Jun 2015 13:30:00 GMT"),k=new Date("Sun, 28 Jun 2015 12:00:00 GMT");i>j&&k>i&&(h=!0)}"wikiwand"==serverData.layout?a.fontStyle=d.fontStyle?d.fontStyle:h?"sansSerif":"serif":(a.fontStyle="sansSerif",document.querySelector("body").classList.add(serverData.publisherHostCode)),a.themeStyle=d.themeStyle?d.themeStyle:"light",a.txtSize=d.txtSize?d.txtSize:h?"smallTxt":"mediumTxt",a.columnWidth=d.columnWidth?d.columnWidth:h?"full":"narrow",a.justifyTxt=d.justify&&"true"==d.justify?!0:!1,a.minimalStyle=d.minimalStyle?"true"==d.minimalStyle?!0:!1:h?!0:!1,"smallTxt"==a.txtSize&&g.push("small_txt"),"mediumTxt"==a.txtSize&&g.push("medium_txt"),"largeTxt"==a.txtSize&&g.push("large_txt"),"serif"==a.fontStyle&&g.push("serif"),"sansSerif"==a.fontStyle&&g.push("sans_serif"),"light"==a.themeStyle&&g.push("light"),"dark"==a.themeStyle&&g.push("dark"),"narrow"==a.columnWidth&&g.push("narrow_column"),"wide"==a.columnWidth&&g.push("wide_column"),"full"==a.columnWidth&&g.push("full_column"),1==a.justifyTxt&&g.push("justify"),1==a.minimalStyle&&g.push("minimal"),a.userBodyStyle="[ "+g.join(" ")+" ]"},h=function(){if("production"==serverData.config.environment){var a=["fontStyle","themeStyle","txtSize","justify","minimalStyle","columnWidth","TOC_folded"],b=Math.floor(Math.random()*a.length);for(var c in a){var e=a[c];if(c==b){var f=d[e],g="virtualpageview/preferences/"+e+"/"+f;analytics.gaVirtualPageView(g)}}}};return f(),h(),{getPref:function(a){return f(),d[a]?d[a]:null},setPref:function(a,b){d[a]=b,e(),g("update")},updatePageStyle:g}}]);var app=angular.module("wikiwand");app.controller("UserPrefsController",["$scope","$rootScope","$window","Utilities","userPreferences","$timeout",function(a,b,c,d,e,f){var g=this;g.initPreferencesSliders=function(){e.updatePageStyle("update"),1===$(".per_btn").length&&($(".toggle_slider").noUiSlider({start:[0],step:1,range:{min:[0],max:[1]}}),$(".step_slider").noUiSlider({start:[0],step:1,range:{min:[0],max:[2]}}),a.Math=window.Math,a.fontStyleSlider=0,a.fontStyleSlider="serif"===b.fontStyle?0:1,$("#font_style_slider").val(a.fontStyleSlider),$("#font_style_slider").on({slide:function(){var a=Math.floor($(this).val());b.fontStyleHandler(a,!1),b.$apply()}}),a.themeSlider=0,a.themeSlider="light"===b.themeStyle?0:1,$("#theme_slider").val(a.themeSlider),$("#theme_slider").on({slide:function(){var a=Math.floor($(this).val());b.themesHandler(a,!1),b.$apply()}}),a.fontSizeSlider=1,"smallTxt"===b.txtSize?a.fontSizeSlider=0:"mediumTxt"===b.txtSize?a.fontSizeSlider=1:"largeTxt"===b.txtSize&&(a.fontSizeSlider=2),$("#font_size_slider").val(a.fontSizeSlider),$("#font_size_slider").on({slide:function(){var a=Math.floor($(this).val());b.txtSizeHandler(a,!1),b.$apply()}}),a.columnWidthSlider=0,"narrow"===b.columnWidth?a.columnWidthSlider=0:"wide"===b.columnWidth?a.columnWidthSlider=1:"full"===b.columnWidth&&(a.columnWidthSlider=2),$("#column_slider").val(a.columnWidthSlider),$("#column_slider").on({slide:function(){var a=Math.floor($(this).val());b.columnWidthHandler(a,!1),b.$apply()}}),b.justifyTxt="true"==e.getPref("justify"))},g.prefsTouchedAnalyticsSent=!1,g.prefsTouchedHandler=function(a){console.log("Preference touched: ",a),e.setPref("prefsTouched","true"),b.prefsTouched="true"==e.getPref("prefsTouched"),g.prefsTouchedAnalyticsSent||(analytics.gaVirtualPageView("/virtualpageview/article-promo-pers/personalized"),g.prefsTouchedAnalyticsSent=!0)},1==articleData.pageIsArticle&&(b.initPrefsController=function(){g.initPreferencesSliders(),a.preMenuReady=!0},b.fontStyleHandler=function(a,c){g.prefsTouchedHandler("fontStyle"),$(".per_serif").removeClass("new_pref"),0===a?(b.fontStyle="serif",e.setPref("fontStyle","serif")):1===a&&(b.fontStyle="sansSerif",e.setPref("fontStyle","sansSerif")),c===!0&&$("#font_style_slider").val(a)},b.themesHandler=function(a,c){g.prefsTouchedHandler("themeStyle"),$(".per_serif").removeClass("new_pref"),0===a?(b.themeStyle="light",e.setPref("themeStyle","light")):1===a&&(b.themeStyle="dark",e.setPref("themeStyle","dark")),c===!0&&$("#theme_slider").val(a)},b.txtSizeHandler=function(a,c){g.prefsTouchedHandler("txtSize"),$(".per_serif").removeClass("new_pref"),0===a?(b.txtSize="smallTxt",e.setPref("txtSize","smallTxt")):1===a?(b.txtSize="mediumTxt",e.setPref("txtSize","mediumTxt")):2===a&&(b.txtSize="largeTxt",e.setPref("txtSize","largeTxt")),c===!0&&$("#font_size_slider").val(a)},b.justifyHandler=function(a){g.prefsTouchedHandler("justify"),$(".per_serif").removeClass("new_pref"),1==a?(b.justifyTxt=!0,e.setPref("justify","true")):(b.justifyTxt=!1,e.setPref("justify","false"))},b.layoutHandler=function(a){g.prefsTouchedHandler("minimalStyle"),$(".per_serif").removeClass("new_pref"),"minimal"===a?(e.setPref("minimalStyle","true"),b.minimalStyle=!0,b.resetMinimal()):"rich"===a&&(e.setPref("minimalStyle","false"),b.minimalStyle=!1,b.resetRich())},a.prefClick=function(){e.setPref("prefAttention","true")},b.columnWidthHandler=function(a,c){g.prefsTouchedHandler("columnWidth"),$(".per_serif").removeClass("new_pref"),0===a?(b.columnWidth="narrow",e.setPref("columnWidth","narrow")):1===a?(b.columnWidth="wide",e.setPref("columnWidth","wide")):2===a&&(b.columnWidth="full",e.setPref("columnWidth","full")),c===!0&&$("#column_slider").val(a),$(".tables_wrapper").length>=1&&f(function(){b.$broadcast("runTablesOverflow",[])},100)},b.resetRich=function(){b.fontStyleHandler(0,!0),b.themesHandler(0,!0),b.txtSizeHandler(1,!0),b.columnWidthHandler(0,!0),b.justifyHandler(!1),analytics.gaEvent("preferences","popup","Rich style reset")},b.resetMinimal=function(){b.fontStyleHandler(1,!0),b.themesHandler(0,!0),b.txtSizeHandler(0,!0),b.columnWidthHandler(2,!0),b.justifyHandler(!1),analytics.gaEvent("preferences","popup","Minimal style reset")})}]);var app=angular.module("wikiwand");app.controller("WalkthroughController",["$scope","$rootScope","$window","Utilities","$timeout",function(a,b){a.init=function(c,d){if(b.activation){var e=window.location.search.indexOf("debug_walkthrough=1")>-1,f=function(){Array.prototype.unshift.call(arguments,"---> "+c+":"),e&&console.info.apply(console,arguments)};f("Initializing walkthrough. Will trigger upon ",d),b.walkthroughs||(b.walkthroughs=[]),b.walkthroughs[c]=a;var g=!1;"number"==typeof d.pagesViewed&&(b.activation.viewedPages>=d.pagesViewed?(f("Enough pageviews for walkthrough - showing it: ",b.activation.viewedPages,">=",d.pagesViewed),g=!0):f("Not enough pageviews for walkthrough",b.activation.viewedPages,"<",d.pagesViewed)),"number"==typeof d.daysSinceJoined&&(b.activation.vetek>=d.daysSinceJoined?(f("Enough vetek for walkthrough - showing it: ",b.activation.vetek,">=",d.daysSinceJoined),g=!0):f("Not enough vetek for walkthrough",b.activation.vetek,"<",d.daysSinceJoined));var h="wikiwand_walkthrough_seen_"+c;"true"==localStorage[h]&&(f("Walkthrough already seen by user, will not show"),g=!1);var i=-10;if(localStorage.wikiwand_walkthrough_last_pageview_seen)try{i=parseInt(localStorage.wikiwand_walkthrough_last_pageview_seen)}catch(j){i=b.activation.viewedPages,localStorage.wikiwand_walkthrough_last_pageview_seen=b.activation.viewedPages.toString()}var k=b.activation.viewedPages-i;f("Pageviews since last seen '"+c+"':",k),3>k&&(f("Not enough pageviews since last walkthough, will not show"),g=!1),g?(f("[V] Showing walkthough"),localStorage.wikiwand_walkthrough_last_pageview_seen=b.activation.viewedPages.toString(),localStorage[h]="true",a.showWalkthrough=!0):f("[X] Not showing walkthough")}}}]);var app=angular.module("wikiwand"),backClicked=function(){console.log("back clicked");var a=$("body").scope();a.backClicked()};app.controller("ArticleContentController",["$rootScope","$scope","Utilities","$timeout","$compile","$window","$http","IPAService","ipCookie",function(a,b,c,d,e,f,g,h,i){function j(a){var b=document.getElementById("collapseButton"+a),c=document.getElementById("collapsibleTable"+a);if(!c||!b)return!1;var d,e=c.rows;if(b.firstChild.data===t){for(d=1;d<e.length;d++)e[d].style.display="none";b.firstChild.data=u}else{for(d=1;d<e.length;d++)e[d].style.display=e[0].style.display;b.firstChild.data=t}}function k(a){return function(b){b.preventDefault(),j(a)}}function l(a){var b,c={},d=a.find("table");for(d.each(function(a,b){if($(b).hasClass("collapsible")){var d=b.getElementsByTagName("tr")[0];if(!d)return;var e=b.getElementsByTagName("th")[0];if(!e)return;c[v]=b,b.setAttribute("id","collapsibleTable"+v);var f=document.createElement("span"),g=document.createElement("a"),h=document.createTextNode(t);f.className="collapseButton",g.style.color=e.style.color,g.setAttribute("id","collapseButton"+v),g.setAttribute("href","#"),$(g).on("click",k(v)),g.appendChild(h),f.appendChild(document.createTextNode("[")),f.appendChild(g),f.appendChild(document.createTextNode("]")),e.insertBefore(f,e.firstChild),v++}}),b=0;v>b;b++)if($(c[b]).hasClass("collapsed")||v>=s&&$(c[b]).hasClass("autocollapse"))j(b);else if($(c[b]).hasClass("innercollapse"))for(var e=c[b];e=e.parentNode;)if($(e).hasClass("outercollapse")){j(b);break}}b.showReadMore=0,console.log("init ArticleContentController");var m=this,n=!1,o=!1,p="none",q="wikiwand"==serverData.layout||"newTabWiki"==serverData.publisherHostCode;a&&a.cohorts&&a.cohorts.mon_ocd&&(p=a.cohorts.mon_ocd||"none"),b.showDiscoverMore=0,"en"==articleData.langCodeUrl&&(b.showTextEnglish=!0);var r;m.tablesOverflow=function(){var a=$("#article_content_wrapper").width();$(".tables_wrapper > table").each(function(){var b=$(this).width();b>a+5?$(this).parent().addClass("scroll"):$(this).parent().removeClass("scroll")})},c.isTouchDevice()||$("body").on("mousemove",".panoramic",function(a){var b=$(this),c=b.offset().left,d=b.width(),e=b.find("img").width();if(!(d>=e)){var f=a.pageX,g=(f-c)/d;g-=.5;var h=0>g;g=Math.abs(g),g=Math.pow(g,.7),h&&(g*=-1),g+=.5,0>g&&(g=0),g>1&&(g=1);var i=e-d,j=i*g;b.find(".img_container").scrollLeft(j)}}),m.disqusHandler=function(){if(articleData&&articleData.pageIsArticle&&a.activation&&"undefined"!=typeof a.activation.vetek){var b="en"==articleData.langCodeUrl&&a.activation.vetek<14;if(b){analytics.gaVirtualPageView("virtualpageview/comments/impression");var c="wikiwand";d(function(){!function(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="//"+c+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}()},500)}else $("#disqus_thread").hide()}},m.readMoreHandler=function(){function a(a){for(var b=[],c=0;c<a.length;c++){var d=a.eq(c).attr("href");-1!==d.indexOf(":")||-1!==d.indexOf("#")||$(a.eq(c)).parent("small").length||b.push(d)}return b}function c(a){var b=$("#fullContent").text().toLowerCase(),c={};return console.time("sort"),_.each(a,function(a){var d,e="/"+articleData.langCodeUrl+"/",d=a.split(e).join("").split("_").join(" ");d=decodeURIComponent(d),c[a]={link:a,title:d,value:0};var f=b.split(d.toLowerCase());f.length&&(c[a].value=f.length)}),console.timeEnd("sort"),_.sortBy(c,"value").reverse()}function e(){if(f=f.concat(a($("#overview p.first-paragraph").find(".int-link"))).slice(),f.length<10&&(f=f.concat(a($("#overview").find(".int-link"))).slice()),f.length<10&&(f=f.concat(a($("#fullContent").find(".int-link"))).slice()),f.length<3)b.showReadMore=0;else{f=c(f);var d=0;if(f.length>10?(b.readMoreArticles=f.slice(3,6),d=6):(b.readMoreArticles=f.slice(0,3),d=3),f.length>d+3){if(b.showReadMore=1,b.discoverMoreArticles=[],!i("wikiwand.extension.installed")&&Math.random()>.7)return;h(d+1)}}}var f=[];b.readMoreArticles=[],b.discoverMoreArticles=[];var h=function(a){if(!(a>=f.length)){var c=f[a].link,d="/api/snippet"+c+"?callback=JSON_CALLBACK";g.jsonp(d).success(function(d){if(console.log("got result ",d),d.thumbnail&&b.discoverMoreArticles.length<3){var e={thumb:d.thumbnail.source,txt:d.text,title:d.title,link:c};e.txt.length>400&&(e.txt=e.txt.slice(0,400).split(" "),e.txt.pop(),e.txt=e.txt.join(" ")+"..."),b.discoverMoreArticles.push(e),b.discoverMoreArticles.length>2?(b.showDiscoverMore=1,analytics.gaVirtualPageView("virtualpageview/discover/impression")):h(a+1)}else h(a+1)})}};d(e,500)},b.reportReadMore=function(a){analytics.gaEvent("discovery","readmore",a)},b.reportDiscoverMore=function(a){analytics.gaEvent("discovery","discover more",a),analytics.gaVirtualPageView("virtualpageview/discover/"+a)},b.reportComments=function(a){b["reported_comments_"+a]||(b["reported_comments_"+a]=!0,analytics.gaEvent("comments","comments box",a),analytics.gaVirtualPageView("virtualpageview/comments/"+a))},m.articleArrowsHandler=function(){function b(){i("sessionStack",JSON.stringify(j),{path:"/"})}function c(a,b,c){var d;try{var d=a.split("/")[1]}catch(e){d=articleData.langCodeUrl}b=b.substr(d.length+2),b=decodeURIComponent(b),console.log("arrow content ",a,b),console.log("api domain ",d,d.substr(0,3)),"zh-"===d.substr(0,3)&&$.inArray(d,["zh-tw","zh-hk","zh-mo","zh-sg","zh-cn","zh-hant","zh-hans"])>=0&&(d="zh");var f="https://"+d+".wikipedia.org/w/api.php";return $.ajax({dataType:"jsonp",url:f,data:{action:"query",format:"json",prop:"extracts|pageimages|revisions|info",redirects:!0,exintro:!0,exchars:100,explaintext:!0,piprop:"thumbnail",pithumbsize:160,rvprop:"timestamp",inprop:"watched",indexpageids:!0,titles:b},success:function(b){var d,e;if(e='<div class="ocd-content"></div>',null!=b.error)return console.log("OCD: got error",b),hideAll();var f=b.query.pageids[0],g=b.query.pages[f];d=a,e="";var h;null!=g.thumbnail&&(h="with_img"),e+=".article_arrow.next"==c?'<a href="'+a+'" class="'+h+'">':'<a onClick="backClicked()" class="'+h+'">',null!=g.title&&(e+="<span class='title'>"+m.escapeHtml(g.title)+"</span>"),null!=g.thumbnail&&(e+="<span class='img' style='background-image: url("+m.escapeHtml(g.thumbnail.source)+")'' onerror='this.style.display=\"none\"' ></span>"),null!=g.extract&&(e+="<span class='txt'>"+m.escapeHtml(g.extract)+"</span>"),e+="</a>",$(c+" .arrow_content").html(e);var i="prev - hover";".article_arrow.next"==c&&(i="next - hover"),analytics.gaEvent("discovery","articleArrow",i)},error:function(){return hideAll()}})}function d(){var a=j.length-2;try{c(j[a],j[a],".article_arrow.prev")}catch(b){console.log("no back")}}function e(a){for(var b=[],c=0;c<a.length;c++){var d=a.eq(c).attr("href");-1!==d.indexOf(":")||-1!==d.indexOf("#")||$.inArray(d,j)>-1||$(a.eq(c)).parent("small").length||b.push(d)}return b}function f(){var a=e($("#section_See_also li .int-link"));if(a.length||(a=e($("#overview p.first-paragraph").find(".int-link"))),a.length||(a=e($("#overview").find(".int-link"))),a.length||(a=e($("#fullContent").find(".int-link"))),!a.length)return void $(".article_arrow.next").hide();var b=o(h)%a.length;n=a[b]}function g(){n?c(n,n,".article_arrow.next"):console.log("could not resolve next link")}if(!articleData.pageIsArticle)return void console.log("not article");var h="/"+articleData.langCodeUrl+"/"+articleData.rawArticlePath,j=[];try{var k=i("sessionStack");k&&"null"!=k&&(j=k.slice())}catch(l){j=[],console.log("problem reading stack cookie")}-1==$.inArray(h,j)?(j.push(h),b()):console.log("already exits"),j.length<2&&$(".article_arrow.prev").hide(),!articleData.mainImage||"cover"!=articleData.mainImage.mode&&"new_cover"!=articleData.mainImage.mode?$(".article_arrow").addClass("active"):window.addEventListener("scroll",function(){var a=window.pageYOffset||document.documentElement.scrollTop;a>200?$(".article_arrow").addClass("active"):$(".article_arrow").removeClass("active")}),a.touchDevices?$(".article_arrow .icon").on("click",function(){var a=$(this).parent();0==a.find("a").length&&(a.hasClass("next")?g():d()),a.hasClass("clicked")?a.removeClass("clicked"):a.addClass("clicked")}):$(".article_arrow").on("mouseenter",function(){0==$(this).find("a").length&&($(this).hasClass("next")?g():d())}),$(".article_arrow").on("click",function(){var a="prev - click";$(this).hasClass("next")&&(a="next - click"),analytics.gaEvent("discovery","articleArrow",a)}),a.backClicked=function(){j.pop(),b(),j.length>0&&(window.location=j[j.length-1])};var n,o=function(a){var b=0;if(0==a.length)return b;for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);b=(b<<5)-b+d,b&=b,b=Math.abs(b)}return b};f()},m.galleryCarousel=function(){$(".ww-photo-group ul").slick({dots:!1,infinite:!1,centerMode:!1,variableWidth:!0,swipeToSlide:!0,speed:150})},m.handleTables=function(){l($("#fullContent")),trackJsInfo(f,"handleTables"),$("table tr").each(function(){var a=getComputedStyle($(this)[0]);if(a){var b=a["line-height"];"11px"==b&&$(this).css("line-height","22px")}}),$(".linked_img_wrapper").each(function(){if($(this).parent("div").length>0){var a=$(this).parent("div"),b=a.attr("style");if(void 0==typeof b)return;$(this).hasClass("duplicateImage")||$(this).css("display","block"),void 0!=typeof b&&$(this).parent("div").find("br").hide()}}),$("table.sortable").tablesorter();var a=$("#article_content_wrapper").width(),b=".infobox, .infobox_v2, .infobox_v3, .sinottico, .toccolours .section_info, .collapse_title, .ambox, .vertical-navbox, .mbox-small";$(".article_content:not(#overview) > table:not("+b+"), .article_content center table:not("+b+")").each(function(){var b=$(this).width();b>a&&($(this).wrap('<div class="tables_wrapper"/>'),c.isTouchDevice()||$(".tables_wrapper").niceScroll({touchbehavior:!0,grabcursorenabled:!1,enablemousewheel:!1}).hide())}),m.tablesOverflow(),$("table.standard, .tracklist").addClass("wikitable")},m.initPortraitImage=function(){trackJsInfo(f,"initPortraitImage");var a=$(".portrait_img").first();if(a){var c=angular.element(a);e(c)(b)}},m.articleTop=function(){if(trackJsInfo(f,"articleTop"),b.articleMarginTop="noCover",articleData.mainImage&&("new_cover"===articleData.mainImage.mode||"cover"===articleData.mainImage.mode)){if(!articleData.mainImage.thumb)return;var a=articleData.mainImage.thumb.width,c=articleData.mainImage.thumb.height,d=a/c,e=c/a*100;$("#cover_image_wrapper").length>0&&(document.getElementById("cover_image_wrapper").style.paddingBottom=""+e+"%"),1.6>=d?b.articleMarginTop="low":d>1.6&&1.8>d?b.articleMarginTop="middle":d>=1.8&&(b.articleMarginTop="high")}},m.bindEvents=function(){trackJsInfo(f,"bindEvents"),$("body").on("click",".NavHead",function(){var a=$(this);a.parent().hasClass("collapsed")?a.parent().removeClass("collapsed"):a.parent().addClass("collapsed")}),$("body").on("click","sup > a",function(){var a=$(this).attr("href"),b=$(this).attr("class"),c=$(this).children("span").data("title"),d="";return"anch-link"===b&&$(a).length>0?d=$(a).html():c&&(d=c),d&&($(this).hasClass("active")?($(this).removeClass("active"),$(".sup_pop").remove()):($(".sup_pop").remove(),$(this).addClass("active"),$(this).parent().append('<div class="sup_pop">'+d+'<div class="ex"></div></div>'))),!1}),$("body").on("click touchstart",function(){$("sup a.anch-link").removeClass("active"),$(".sup_pop").remove()}),$("body").on("click","sup",function(a){a.stopPropagation()}),$("body").on("click",".sup_pop .ex",function(a){$("sup a.anch-link").removeClass("active"),$(".sup_pop").remove(),a.stopPropagation()}),"wikiwand"!=serverData.layout&&$("body").on("click",".int-link",function(a){if(a.stopPropagation(),a.returnValue=!1,a.preventDefault(),a.target.href){console.log("event target ",a.target.href);var b=a.target.href.split("#");window.location.href=b.length>1?b[0]+window.location.search+"#"+b[1]:b[0]+window.location.search}}),$("body").on("mouseenter",".int-link",function(){var a=$(this);a.attr("title",""),a.hasClass("no_hovercard")||q&&m.loadHoverCard(a)}),$("body").on("mouseleave",".int-link",function(){var a=$(this);a.data("ocd-mouse-inside",!1)}),$("body").on("click",".collapse_title",function(){trackJsInfo(f,"collapse_title click event");var a=$(this).parent().find("div.collapse");$(this).hasClass("active")?($(this).removeClass("active"),a.hide()):($(this).addClass("active"),a.show())}),$("body").on("click",".wiki_alert",function(){trackJsInfo(f,"wiki_alert click event"),$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active")}),$("body").on("click",".img_container",function(b){trackJsInfo(f,"openGallery event"),a.galleryOpen(b)}),$("body").on("error",".img_container img",function(a){trackJsInfo(f,"image load error, reverting to full url");var b=$(a.target).attr("src"),c=new RegExp("(.*)\\/thumb(\\/[a-zA-Z0-9]\\/[a-zA-Z0-9]{2,2}\\/[^\\/]*)","i"),d=b.match(c);if(d&&3==d.length){var e=d[1]+d[2];$(a.target).attr("src",e)}}),c.isItInternetExplorer()===!1&&(c.isTouchDevice()||($("body").on("click",".audio_wrapper",function(){var a=$(this).parent().attr("data-audio");$("#audio_player div").html(a),setTimeout(function(){var a=document.getElementById("audio_player");a.getElementsByTagName("audio")[0].play()},10),$("#audio_player").addClass("active open").find("div").fadeIn(300),setTimeout(function(){$("#audio_player").removeClass("open")},1500)}),$("body").on("click","#audio_player .listen",function(){$("#audio_player div").html($("#section_SpokenWikipedia").find(".mediaContainer").attr("data-audio")),setTimeout(function(){var a=document.getElementById("audio_player");a.getElementsByTagName("audio")[0].play()},10)}),$("body").on("click","#audio_player:not(.audio_article) > i",function(){$("#audio_player").removeClass("active").find("div").fadeOut(300,function(){$(this).empty()})}))),$(window).resize(function(){clearTimeout(r),r=setTimeout(function(){m.tablesOverflow()},100)}),angular.element(window).bind("load",function(){m.tablesOverflow()}),$("body").on("click",".drop_down_arrow",function(){$(this).hasClass("active")?$(this).removeClass("active").siblings(".vs_drop_down").slideUp(300):$(this).addClass("active").siblings(".vs_drop_down").slideDown(300)}),c.isTouchDevice()||$(function(){FastClick.attach(document.body)})},m.forceLoadImages=function(a){trackJsInfo(f,"forceLoadImages");var b=0;a.each(function(){b++;var a=$(this);setTimeout(function(){var b=a.attr("data-original");a.attr("src",b),a.loaded=!0},0*b)}),a.removeClass("lazy")},m.removeDuplicatePortrait=function(){if(console.log("removeDuplicatePortrait"),trackJsInfo(f,"remove duplicate image"),articleData.mainImage&&"none"!=articleData.mainImage.mode&&articleData.mainImage.full){var a=decodeURIComponent(articleData.mainImage.full.originalUrl.split("/").pop());$("#overview .image_wrapper:not(.portrait_img) .img_container  img").each(function(){if("final_image"!=$(this).attr("id")){var b=decodeURIComponent($(this).attr("data-href").split(":").pop());b==a&&$(this).parent().parent().addClass("duplicateImage")}})}},m.initAnchorLinks=function(){trackJsInfo(f,"initAnchorLinks"),$("sup a.anch-link").each(function(){var a=$(this).attr("href");a&&$(this).attr("href","#"+a.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"-"))}),$(".references li").each(function(){var a=$(this).attr("id");a&&$(this).attr("id",a.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"-"))})},m.audioScrape=function(){if(c.isItInternetExplorer()===!1&&!c.isTouchDevice()){trackJsInfo(f,"audioScrape");var a="false";$("#section_SpokenWikipedia audio").length>0&&(a="true",$("#audio_player").addClass("open"));var b="<div class='audio_wrapper'><p>Play audio file</p></div>";$(".mediaContainer").each(function(){if(1===$(this).find("audio").length){var a=$(this).find("audio").parent().html();$(this).attr("data-audio",a).html(b)}}),"true"===a&&setTimeout(function(){$("#audio_player div").html($("#section_SpokenWikipedia .mediaContainer").attr("data-audio")).parent().addClass("active audio_article").find(".listen").show()},1e3),$('a[href$=".ogg"]').each(function(){-1==this.href.indexOf("//upload")&&$(this).attr("target","_blank").attr("title","Audio Info").addClass("tooltip_top ").find("img").css("vertical-align","middle")}),$('a[href$=".ogg"]').on("click",function(a){if(-1!=this.href.indexOf("//upload")){var b=$(this).attr("href");$("#audio_player div").html('<audio controls><source src="'+b+'" type="audio/ogg"></audio>'),setTimeout(function(){var a=document.getElementById("audio_player");a.getElementsByTagName("audio")[0].play()},10),$("#audio_player").addClass("active open").find("div").fadeIn(300),setTimeout(function(){$("#audio_player").removeClass("open")},1500),a.preventDefault()}})}},m.clearBreaks=function(){trackJsInfo(f,"clear breaks"),$($(".article_content > div, .article_content > p > br")).each(function(){var a="clear:both;"===$(this).attr("style")||"clear: both;"===$(this).attr("style");"undefined"!=typeof a&&a!==!1&&""===$.trim($(this).html())&&$(this).hide()})},m.prepareTooltipster=function(){trackJsInfo(f,"prepareTooltipster"),$(".tooltip_top").tooltipster({minWidth:!0,position:"top",trigger:"hover",animation:"fade",theme:".toolbar-tooltip",speed:100});var a="hover";c.isTouchDevice()&&(a="click"),$(".disambig-wrapper").length>0&&$(".disambig-wrapper").tooltipster({content:articleData.disambiguations.join("<br/>"),contentAsHTML:!0,minWidth:!0,maxWidth:320,trigger:a,animation:"fade",theme:".disamb-tooltip",delay:100,speed:100,interactive:!0})},m.syntaxHighlighting=function(){trackJsInfo(f,"syntaxHighlighting");var a=$("#article_content_wrapper .mw-code pre, #article_content_wrapper .mw-highlight pre"),b=function(){a.each(function(a,b){hljs.highlightBlock(b)})};a.length>0&&(o?b():$.getScript("//d3isfnyiuldmfu.cloudfront.net/s3lib/highlight.pack.gzip.js").done(function(){o=!0,b()}).fail(function(){console.error("Request for highlight.pack.js failed")}))},m.initContentsJQueryProcess=function(){console.log("initContentsJQueryProcess"),trackJsInfo(f,"initContentsJQueryProcess"),d(function(){if($("table.ambox, table.noprint:not(.navbox), .bandeau-niveau-modere").each(function(){var a=$(this).text();$(this).replaceWith('<div class="wiki_alert">'+a+"</div>")}),m.initAnchorLinks(),m.removeDuplicatePortrait(),setTimeout(function(){m.forceLoadImages($("img.lazy"))},500),m.clearBreaks(),m.handleTables(),m.audioScrape(),m.galleryCarousel(),m.syntaxHighlighting(),m.prepareTooltipster(),"sidePanel"==serverData.layout&&!c.isTouchDevice()){var a="#323232";"mail_ru"==serverData.publisherHostCode?a="#168de2":"google"==serverData.publisherHostCode?a="#db4437":"yahoo"==serverData.publisherHostCode?a="#400191":"yandex"==serverData.publisherHostCode?a="#ffcc00":"bing"==serverData.publisherHostCode?a="#ffb900":"duckduckgo"==serverData.publisherHostCode&&(a="#e04e27"),$("body").niceScroll({cursorcolor:a,background:"#f0f0f0",autohidemode:!1,horizrailenabled:!1,cursoropacitymax:1,cursorwidth:10,cursorborderradius:2,railpadding:{top:3,right:3,left:3,bottom:3},cursorborder:"none"})}c.isTouchDevice()||$("#wikiwand_toc").niceScroll($("body").hasClass("rtl")?{cursoropacitymax:.3,cursorwidth:3,cursorborderradius:4,railpadding:{top:2,right:2,left:2,bottom:2},cursorborder:"none",railalign:"right"}:{cursoropacitymax:.3,cursorwidth:3,cursorborderradius:4,railpadding:{top:2,right:2,left:2,bottom:2},cursorborder:"none",railalign:"left"}),m.articleArrowsHandler(),m.readMoreHandler(),m.disqusHandler()},0)},m.loadLocalContent=function(){return 1!=precache_from_extension?0==loadedFromCache?(console.log("loaded from cache false"),trackJsInfo(f,"loadedFromCache==false (new rendering"),void angular.element(document).ready(function(){a.$broadcast("articleContentReadyFromShell",[]),a.showArticleContents=!0})):void("undefined"==typeof localContentHtml||n?n||d(m.loadLocalContent,10):(trackJsInfo(f,"loading content into wrapper"),n=!0,$("#fullContent").html(localContentHtml),articleData.mainImage&&"portrait"==articleData.mainImage.mode&&m.initPortraitImage(),a.showArticleContents=!0,console.timeEnd("test"),m.removeDuplicatePortrait(),d(function(){trackJsInfo(f,"broadcast articlecontent ready"),a.$broadcast("articleContentReadyFromShell",[])},0))):void 0},b.disambigHandler=function(b){trackJsInfo(f,"disambigHandler"),a.showDis=!a.showDis,b.stopPropagation()},m.escapeHtml=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},m.getArticleHrefForHovercard=function(a){var b,c;if(b=a.attr("href"),!b)return null;if("/"==!b.charAt[0])return null;b=b.substr(1);var d=b.indexOf("/");if(-1==d)return null;var e=b.substr(0,d),f=b.substr(d+1);return e!==articleData.langCodeUrl?null:(c=decodeURIComponent(f),c=c.split("#")[0],-1!==c.indexOf(":")?null:"vs"===c?null:c)},m.showHoverCard=function(a,b){trackJsInfo(f,"showHoverCard");var c,d,e,g,h=700;return a.data("ocd-mouse-inside")?(e=a.data("ocd-hover-time"),g=(new Date).getTime(),d=g-e,c=Math.max(0,h-d),setTimeout(function(){var c;if(a.data("ocd-mouse-inside")){c=!1;var d={content:b,contentAsHTML:!0,theme:".tooltipster-ocd",maxWidth:480,interactive:!0,autoClose:!0,interactiveTolerance:500,animation:"fade",delay:0,speed:100,updateAnimation:!1,functionBefore:function(a,b){return b()},functionReady:function(){},functionAfter:function(){}};return"none"!=p&&(d.arrowColor=$("body").hasClass("dark")?"#3a3538":"#eeeeee"),a.tooltipster(d),a.tooltipster("show")}},c)):void 0},m.loadHoverCard=function(a){var b,c,d,e,f;if(b=a,c=m.getArticleHrefForHovercard(b)){if(b.data("ocd-mouse-inside",!0),b.data("ocd-hover-time",(new Date).getTime()),e=function(){b.tooltipster("hide")},d=b.data("ocd-cache"))return m.showHoverCard(b,d);var g=articleData.langCodeUrl;return"zh-"===g.substr(0,3)&&$.inArray(g,["zh-tw","zh-hk","zh-mo","zh-sg","zh-cn","zh-hant","zh-hans"])>=0&&(g="zh"),f="https://"+g+".wikipedia.org/w/api.php",$.ajax({dataType:"jsonp",url:f,data:{action:"query",format:"json",prop:"extracts|pageimages|revisions|info",redirects:!0,exintro:!0,exsentences:2,explaintext:!0,piprop:"thumbnail",pithumbsize:300,rvprop:"timestamp",inprop:"watched",indexpageids:!0,titles:c},success:function(a){var c,d;if(d='<div class="ocd-content"></div>',null!=a.error)return console.log("OCD: got error",a),e();var f=a.query.pageids[0],g=a.query.pages[f];c=b.attr("href"),d="",d+='<div class="ocd-content">',null!=g.thumbnail&&(d+="<div class='image'><img src='"+m.escapeHtml(g.thumbnail.source)+"' onerror='this.style.display=\"none\"' /></div>"),null!=g.title&&(d+="<div class='title'>"+m.escapeHtml(g.title)+"</div>"),null!=g.extract&&(d+="<div class='text'>"+m.escapeHtml(g.extract)+"</div>"),d+="<div class='read-full-article'><a href='"+c+"' target='_blank'></a></div>",d+="</div>",b.data("ocd-cache",d),m.showHoverCard(b,d)},error:function(){return e()}})}},b.$on("articleContentReadyFromShell",function(){if(angular.element(document).ready(m.initContentsJQueryProcess),serverData.config.features&&serverData.config.features.classification&&articleData.classification&&articleData.classification.topics){var c=articleData.classification.topics,e=[];b.tags=[];var f=articleData.classification.topics.length;_.each(c,function(a){if(a.reliable="weak",5>f?(a.prob>10&&(a.reliable="med"),a.prob>30&&(a.reliable="strong")):(a.prob>2&&(a.reliable="med"),a.prob>10&&(a.reliable="strong")),"weak"==a.reliable);else{var b=a;b.class="strong"==a.reliable?"predicted":"predicted med",e.push(b)}}),b.tags=_.sortBy(e,function(){}),a.showInterestTags=!0,console.log("tagging time :"+articleData.classification.computeTime)}d(h.initIPA,0)}),b.$on("runTablesOverflow",function(){angular.element(document).ready(m.tablesOverflow)}),a.showArticleContents=!1,m.articleTop(),m.loadLocalContent(),m.bindEvents();var s=2,t="hide",u="show",v=0}]);var app=angular.module("wikiwand");app.service("MapHelper",["$http","$log","$rootScope","$window","$timeout",function(a,b,c,d,e){var f={};return f.getMapImage=function(){if(console.log("get map image"),trackJsInfo(d,"getMapImage"),articleData&&articleData.freebaseInfo&&articleData.freebaseInfo.geo&&articleData.freebaseInfo.geo.lat&&articleData.freebaseInfo.geo){c.freebaseData={},c.freebaseData.geolocation={longitude:articleData.freebaseInfo.geo.lon,latitude:articleData.freebaseInfo.geo.lat};var a=f.getMapZoom();c.mapImageUrl="https://maps.googleapis.com/maps/api/staticmap?center="+c.freebaseData.geolocation.latitude+","+c.freebaseData.geolocation.longitude+"&zoom="+(a+3)+"&size=800x400";
var b="<div id='miniMap' onClick='loadGoogleMaps();'><img class='map' src='"+c.mapImageUrl+"'/><img class='center'  src='/img/location.png'/><img style='margin-top:"+f.pseudoRand(articleData.freebaseInfo.geo.lat,173)+"px; margin-left:-"+f.pseudoRand(articleData.freebaseInfo.geo.lat,9)+"px;' src='/img/sub_location.png'/><img style='margin-top:-"+f.pseudoRand(articleData.freebaseInfo.geo.lat,3)+"px; margin-left:"+f.pseudoRand(articleData.freebaseInfo.geo.lat,829)+"px;' src='/img/sub_location.png'/><img style='margin-top:"+f.pseudoRand(articleData.freebaseInfo.geo.lat,631)+"px; margin-left:-"+f.pseudoRand(articleData.freebaseInfo.geo.lat,313)+"px;' src='/img/sub_location.png'/><img style='margin-top:-"+f.pseudoRand(articleData.freebaseInfo.geo.lat,11)+"px; margin-left:"+f.pseudoRand(articleData.freebaseInfo.geo.lat,2)+"px;' src='/img/sub_location.png'/></div>";0==$("#fullContent").html().length?c.$on("articleContentReadyFromShell",function(){f.displayMiniMap(b)}):f.displayMiniMap(b)}},f.displayMiniMap=function(a){console.log("display mini map"),e(function(){$(".ww_ib_1").length>0?$(".ww_ib_1").prepend('<tr><td colspan="12">'+a+"</td></tr>"):0==$(".ww_ib_1").length&&$("#fullContent .portrait_img").length>0?($("#fullContent .portrait_img").after(a),$("#miniMap").addClass("float")):($(".title_wrapper").after(a),$("#miniMap").addClass("float"))},10)},f.getMapZoom=function(){var a=1;if(articleData.freebaseInfo.geo.dimension){var b=articleData.freebaseInfo.geo.dimension;b>0&&(a=13),b>5&&(a=10),b>10&&(a=9),b>50&&(a=6),b>100&&(a=4),b>500&&(a=3),b>2e3&&(a=0)}return a},f.pseudoRand=function(a,b){return 70*(Math.round(3466732*a/b)%71/71)},f}]);var infoWindowLatch2=!1,maps_script;if("undefined"!=typeof serverData)var DEBUG_GEO=serverData&&serverData.config&&"development"===serverData.config.environment;var fetchResultsDelay=500,app=angular.module("wikiwand");app.controller("MapController",["$rootScope","$scope","Utilities","WikipediaApi","$timeout","$http","$window","MapHelper",function(a,b,c,d,e,f,g,h){var i,j,k=this;c.isTouchDevice()?(i="click",j=""):(i="mouseover",j="mouseout"),a.mapOut=function(){angular.element("#miniMap").removeClass("loading"),trackJsInfo(g,"mapOut")},b.testCloseInfoWindow=function(){e(function(){b.infowindowLatch1===!1&&infoWindowLatch2===!1&&b.infowindow.close()},500)},b.initializeMapController=function(){trackJsInfo(g,"initializeMapController"),e(function(){a.map={},a.map.exists=articleData.geo?!0:!1,1==a.map.exists,a.map.showMap=!1,b.infowindowLatch1=!1,infoWindowLatch2=!1,a.initMap=function(){e(function(){if(trackJsInfo(g,"initMap"),articleData&&articleData.freebaseInfo&&articleData.freebaseInfo.geo){a.map={},analytics.gaEvent("rich-map","opened"),angular.element("#miniMap").addClass("loading"),b.entries={};var c=new google.maps.LatLng(articleData.freebaseInfo.geo.lat,articleData.freebaseInfo.geo.lon),d=google.maps.MapTypeId.ROADMAP,e=h.getMapZoom()+2,f={zoom:e,center:c,mapTypeId:d,scrollwheel:!0},l=document.getElementById("map_canvas");l||(console.log("no map canvas"),trackJsInfo(g,"could not find map canvas")),b.map=new google.maps.Map(l,f),b.mainInfoWindow=new google.maps.InfoWindow({content:'<div class="main-map-infobox">'+articleData.title+"</div>",disableAutoPan:!0,zIndex:1e4});var m=new google.maps.Marker({position:c,map:b.map,title:"",name:articleData.title,icon:"//d3isfnyiuldmfu.cloudfront.net/img/location.png",zIndex:1e3,url:articleData.cache.key,draggable:!1});b.infowindow=new google.maps.InfoWindow({content:"infobox",disableAutoPan:!0,maxWidth:300,zIndex:10001}),google.maps.event.addListener(m,"click",function(){b.map.panTo(m.getPosition())}),google.maps.event.addListener(m,i,function(){infoWindowMouseOut(),b.mainInfoWindow.open(b.map,m)}),google.maps.event.addListener(m,j,function(){b.mainInfoWindow.close()}),google.maps.event.addListener(b.map,"center_changed",function(){k.mapChangeEvent()}),google.maps.event.addListener(b.map,"zoom_changed",function(){k.mapChangeEvent()}),a.map.showMap=!0,k.loadMarkersIntoMap()}},200)}},0)},k.escapeHtml=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},k.showMapInfobox=function(a,b){var c=articleData.langCodeUrl;"zh-"===c.substr(0,3)&&$.inArray(c,["zh-tw","zh-hk","zh-mo","zh-sg","zh-cn","zh-hant","zh-hans"])>=0&&(c="zh");var d="https://"+c+".wikipedia.org/w/api.php";$.ajax({dataType:"jsonp",url:d,data:{action:"query",format:"json",prop:"extracts|pageimages|revisions|info",redirects:!0,exintro:!0,exsentences:2,explaintext:!0,piprop:"thumbnail",pithumbsize:300,rvprop:"timestamp",inprop:"watched",indexpageids:!0,titles:a.name},success:function(c){var d,e;if(null!=c.error)return b(null);var f=c.query.pageids[0],g=c.query.pages[f];return d=a.url,e="",e+='<div onMouseOver="infoWindowMouseIn();"  onMouseOut="infoWindowMouseOut();"   class="map-ocd unselectable"><div class="tooltipster-content"><div class="ocd-content">',null!=g.thumbnail&&(e+="<div class='image'><img src='"+k.escapeHtml(g.thumbnail.source)+"' onerror='this.style.display=\"none\"' /></div>"),null!=g.title&&(e+="<div class='title'>"+k.escapeHtml(g.title)+"</div>"),e+=null!=g.extract?g.length>500?"<div class='text'>"+k.escapeHtml(g.extract)+"</div>":"<div class='text'>There are multiple articles with this name. Click to see disambiguation.</div>":"<div class='text'>There isn't an article for this place. Click to search Wikiwand.</div>",e+="<div class='read-full-article'><a href='"+a.url+"'  target='_blank'></a></div>",e+="</div></div></div>",b(e)},error:function(){return b(null)}})},k.mapChangeEvent=function(){var a=(new Date).getTime();b.lastEventTime=a,e(k.testLastEvent,fetchResultsDelay+50)},k.testLastEvent=function(){if(b.lastEventTime){var a=(new Date).getTime(),c=a-b.lastEventTime;c>fetchResultsDelay?(b.infowindow.close(),k.loadMarkersIntoMap(),b.lastEventTime=null):e(k.testLastEvent,fetchResultsDelay+50)}},k.loadMarkersIntoMap=function(){var a=b.map.getCenter(),c=a.B;if(c||(c=a.D),c||(c=a.F),c||(c=a.K),c||(c=a.L),!c)return g.trackJs&&g.trackJs.track("Cannot find latitude from Google Maps data"),void console.error("Cannot find latitude from Google Maps data"+JSON.stringify(a));var d=a.k;if(d||(d=a.A),d||(d=a.G),d||(d=a.H),!d)return g.trackJs&&g.trackJs.track("Cannot find longitude from Google Maps data"),void console.error("Cannot find longitude from Google Maps data"+JSON.stringify(a));var e=d.toString(),h=c.toString(),l=b.map.getZoom(),m=Math.round(Math.max(Math.pow(16-l,3),1)),n=b.map.getBounds();try{var o=Math.abs(n.Da.j-n.Da.k);m=Math.round(60*o)}catch(p){}var q="https://www.googleapis.com/freebase/v1/search?filter=(all%20type:location%20(within%20radius:"+m+"km%20%20lat:"+e+"%20lon:"+h+"))&output=(key:/wikipedia/"+articleData.langCodeUrl+" geocode)&limit=50&callback=JSON_CALLBACK&key=AIzaSyCq8C5nVYPyUUgo70QtIkh-egbB182D2as";f.jsonp(q).success(function(a){if(a.result){var c=[];a.result.forEach(function(a,d){var e={};try{var f=a.output.geocode["/location/location/geolocation"][0];e.lat=parseFloat(f.latitude),e.lon=parseFloat(f.longitude)}catch(g){}var h=null;try{h=a.output["key:/wikipedia/"+articleData.langCodeUrl]["/type/object/key"][0],h=h.replace("/wikipedia","");var l=/\$([0-9A-Z]{4})/gi;h=h.replace(l,function(a,b){return String.fromCharCode(parseInt(b,16))}),a.name=h.split("/").pop()}catch(g){}return null==h?!1:b.entries[h]?!1:e.lat&&e.lon?(b.entries[h]=!0,c[d]=new google.maps.Marker({position:new google.maps.LatLng(e.lat,e.lon),map:b.map,title:"",name:a.name,icon:"//d3isfnyiuldmfu.cloudfront.net/img/sub_location.png",url:h,draggable:!1}),void function(a){google.maps.event.addListener(c[a],i,function(){k.showMapInfobox(c[a],function(d){return d?(b.infowindow.setContent(d),b.infowindow.open(b.map,c[a]),void(b.infowindowLatch1=!0)):void console.log("no html")})}),google.maps.event.addListener(c[a],j,function(){b.infowindowLatch1=!1,b.testCloseInfoWindow()})}(d)):!1})}}).error(function(){console.log("no response from freebase")})}}]);var app=angular.module("wikiwand");app.controller("VideoController",["$rootScope","$scope","Utilities","$timeout","$http","$window","$sce",function(a,b,c,d,e,f){a.showVidReport=!1;var g={};b.eventOnce=function(a,b,c){var d=a+"~"+b+"~"+c;g[d]||(g[d]=1,analytics.gaEvent(a,b,c))},b.initializeVideoController=function(){if(trackJsInfo(f,"initializeVideoController"),!articleData.videos||!articleData.videos.videos)return void console.log("no videos");b.showVideo=!1,b.render=!0,analytics.gaSetDimension(4,"rich-trailer");var a=articleData.videos.videos;_.each(a,function(){});var c=a[0],d="https://www.youtube-nocookie.com/embed/"+c.id+"?rel=0&controls=1&autoplay=1&showinfo=0&iv_load_policy=3&modestbranding=1&rel=0";c.src=d,b.mainVideo=c,console.log("first video ",c)},b.showVideoFunction=function(a){b.showVideo=a,a===!0?(d(function(){$(".video_title .tooltip").tooltipster({minWidth:!0,theme:".toolbar-tooltip",speed:100})},0),analytics.gaSetDimension(3,"rich-trailer-played"),b.eventOnce("rich-trailer","play")):b.eventOnce("rich-trailer","close")}}]);var app=angular.module("wikiwand"),pageVisible=!1;String.prototype.hashCode=function(){var a=0;if(0===this.length)return a;for(var b=0;b<this.length;b++)a+=this.charCodeAt(b)*b;return a},app.service("IPAService",["$rootScope","$http",function(a,b){var c={},d={},e="",f={hashCode:function(a){return a?a.split("").reduce(function(a,b){return a=(a<<5)-a+b.charCodeAt(0),a&a},0):""},getActiveLine:function(a){console.log("getactiveline");var b,d=document.querySelectorAll(":hover");$(d).filter(".IPAline").each(function(d,f){b=$(f).attr("id");var g=a;console.log("saving weight ",a),e==b&&(c[b]&&(g+=c[b]),c[b]=g),e=b}),console.log("active line ",b),console.log("presence dict ",c)},readHeatmap:function(a){var c=b({method:"get",url:"/api/getHeatmap"});c.success(function(b){if(console.log("success ",b),b&&Object.keys(b).length>0){console.log("got it");var c=b.slice(0,10);_.each(c,function(a){a.value>3&&(d[a.key]=a.value)})}return a()}).error(function(){return console.log("fail"),a()})},sendAnonymous:function(){if(0==Object.keys(c).length)return void console.log("no values");var a={heatmap:c},d=JSON.stringify(a),e=b({method:"post",url:"/api/hoverReport",data:d});e.success(function(){console.log("success"),c={}}).error(function(){console.log("fail")})},mouseMove:function(){pageVisible||(pageVisible=!0,setTimeout(function(){pageVisible=!1},1e4))},initIPA:function(){if(serverData.settings&&articleData.cache){var a=serverData.settings.whitelist;if(!_.contains(a,decodeURIComponent(articleData.cache.key)))return void console.log("page not in IPA whitelist ");console.log("page in whitelist"),"true"==localStorage.IPAshow?f.readHeatmap(f.initIPAStep2):f.initIPAStep2()}},initIPAStep2:function(){document.addEventListener("mousemove",f.mouseMove,!1),document.addEventListener("mousedown",function(){f.getActiveLine(3)},!1),console.log("init IPA part 2");(new Date).getTime();$("section").each(function(){var a=$(this).attr("id");if(a){var b=a.hashCode();$(this).children().each(function(a){var c=$(this).html(),e=c.split(". "),f=[],g=b+"_"+a;e.forEach(function(a,b){var c=g+"_"+b;if("true"==localStorage.IPAshow&&d[c]){var e;e=d[c]>5?"c_hi":"c_low",f.push("<span id='"+c+"' class='IPAline "+e+"'>"+a+"</span>")}else f.push("<span id='"+c+"' class='IPAline'>"+a+"</span>")}),$(this).html(f.join(". ")),$(this).attr("id",g),$(this).addClass("IPApar")})}});(new Date).getTime();setInterval(function(){pageVisible&&f.getActiveLine(1)},1e3),setInterval(f.sendAnonymous,1e4)}};return a.findString=function(a,b){f.findString(a,b)},a.navigateToResult=function(a,b){f.navigateToResult(a,b)},f}]);var app=angular.module("wikiwand");app.service("ActivationServiceRev2",["$http","$rootScope","$timeout","$injector","ipCookie","Utilities",function(a,b,c,d,e,f){function g(){for(var a="",b="ABCDEFGHIJKLMNOPQRSTUVWXYZ",c=0;8>c;c++)a+=b.charAt(Math.floor(Math.random()*b.length));return a}var h=function(){if("/extension/thank-you"==location.pathname)return analytics.gaVirtualPageView("/virtualpageview/landing/referrer/installed/"+e("wikiwand_first_landing_referrer")),void analytics.gaVirtualPageView("/virtualpageview/landing/page/installed/"+e("wikiwand_first_landing_page"));if(!e("wikiwand_first_landing_referrer")){var a=document.referrer.toLowerCase(),b="referral";(-1!=a.indexOf("google")||-1!=a.indexOf("yahoo")||-1!=a.indexOf("yandex"))&&(b="search"),""==a&&(b="direct"),e("wikiwand.extension.installed")&&(b="extension");var c="article_page";"/"==location.pathname&&(c="home_page"),e("wikiwand_first_landing_referrer",b,{path:"/",expires:30}),analytics.gaVirtualPageView("/virtualpageview/landing/referrer/impression/"+b),analytics.gaVirtualPageView("/virtualpageview/landing/page/impression/"+c),e("wikiwand_first_landing_page",c,{path:"/",expires:30})}};h();var i,j={loadState:function(){if(b.walkthrough={},b.activation={},localStorage.wikiwand_activation)try{b.activation=angular.fromJson(localStorage.wikiwand_activation)}catch(a){$window.trackJs&&(trackJsInfo($window,"activation json string is "+localStorage.wikiwand_activation),$window.trackJs.track("problem parsing activation",exception.message))}if(localStorage.wikiwand_walkthrough)try{b.walkthrough=angular.fromJson(localStorage.wikiwand_walkthrough)}catch(a){$window.trackJs&&(trackJsInfo($window,"wikiwand_walkthrough json string is "+localStorage.wikiwand_walkthrough),$window.trackJs.track("problem parsing wikiwand_walkthrough",exception.message))}b.activation.showShare=!1,b.activation.instructions=!1,b.lightboxOpened=!1,b.extPopShow=!1,b.extPopAnim=!1,0!=b.walkthrough.new_visitor&&(b.walkthrough.new_visitor=1!=b.activation.extensionInstalled),b.activation.showSwitchToWikipedia=b.activation.extensionInstalled&&"Chrome"==serverData.agent.family&&-1==document.location.search.indexOf("in_iframe")?!0:!1;var f=document.location.search.indexOf("debug_fast=1")>-1?3:15;serverData.callToInstallExtension&&$(document).one("mousemove",function(){c(function(){var a=-1!==document.cookie.indexOf("wikiwand.extension.installed"),c=-1!==document.cookie.indexOf("wikiwand.extension.popupAlreadyShown");a||c||(console.log("showing popup"),e("wikiwand.extension.popupAlreadyShown","true",{path:"/",expires:5}),b.extPopShow||b.lightboxOpened||(b.extPopShow=!0,b.lightboxOpened=!0,b.extPopAnim=!0))},1e3*f)}),serverData.callToPersonalize;var g=function(a){e("wikiwand.activation.first_impression")||(e("wikiwand.activation.first_impression",a,{path:"/",expires:1}),analytics.gaVirtualPageView("/virtualpageview/article-promo/impression/"+a))},h=function(){return e("wikiwand.activation.first_impression")||"external-source"};if("/extension/thank-you"==location.pathname)analytics.gaVirtualPageView("/virtualpageview/article-promo/install-complete/"+h());else if("/"==location.pathname)g("homepage");else if(articleData&&articleData.rawArticlePath){var i=e("wikiwand.activation.article_promo_name")||"unknown";g("promo_"+i)}else g("other-page");j.normalizeData();try{var k=d.get("userPreferences");k.updatePageStyle("update")}catch(l){}},normalizeData:function(){if(b.activation||(b.activation={}),e("wikiwand.extension.installed")?(b.activation.extensionInstalled||(b.activation.installTime=(new Date).getTime()),b.activation.extensionInstalled=!0):b.activation.extensionInstalled=!1,e("wikiwand.userReferer")&&(b.activation.userReferer=e("wikiwand.userReferer")),!b.activation.userID){console.log("creating new user ID");var a=g();b.activation.userID=a,0==b.activation.extensionInstalled&&("/"==window.location.pathname?(console.log("new user homepage"),analytics.gaVirtualPageView("virtualpageview/landing/homepage")):(console.log("new user article page"),analytics.gaVirtualPageView("virtualpageview/landing/article-page")))}if(e("wikiwand.userID",b.activation.userID,{path:"/",expires:1e5}),b.refString="%3Fref%3D"+b.activation.userID,b.activation.userReferer&&1!=b.activation.userReferralCredited&&b.activation.userReferer!=b.activation.userID){var c=0;if(b.activation.installTime){var d=(new Date).getTime();c=(d-b.activation.installTime)/1e3,console.log("since install ",c)}1==b.activation.extensionInstalled&&c>30||1!=b.activation.userFollowCredited&&(analytics.gaVirtualPageView("virtualpageview/invites/followed"),b.activation.userFollowCredited=!0)}b.activation.browser=serverData.agent.family?serverData.agent.family:"Other",serverData.agent.string.indexOf("OPR")>-1&&(b.activation.browser="Opera"),b.activation.windows=serverData.agent.os.family.indexOf("Windows")>-1,b.activation.touch=f.isTouchDevice()?!0:!1,b.activation.viewedPages?-1==document.location.search.indexOf("in_iframe")&&b.activation.viewedPages++:b.activation.viewedPages=1,null==b.activation.joined&&(b.activation.joined=(new Date).getTime());var d=(new Date).getTime();if(b.activation.vetek=Math.round((d-b.activation.joined)/864e5,1),b.activation.vetek>=1&&(localStorage.wikiwand_last_save=(new Date).getTime()),null==b.activation.installextension&&(b.activation.installextension={},b.activation.installextension.random=Math.round(10*Math.random(),1),b.activation.installextension.randomText=Math.round(100*Math.random(),1),b.activation.installextension.finished=!1),b.activation.ABRateShare||(b.activation.ABRateShare=Math.round(10*Math.random(),1)),null==b.activation.rateextension&&(b.activation.rateextension={},b.activation.rateextension.finished=!1),b.activation.nextAction||(b.activation.nextAction="activation_install"),1==b.activation.extensionInstalled&&(b.activation.nextAction=b.activation.ABRateShare>0&&b.activation.vetek<10&&"activation_share"!=b.activation.nextAction?"activation_share":"activation_share"),0==b.activation.extensionInstalled&&(b.activation.nextAction="activation_install"),"Other"==b.activation.browser&&(b.activation.nextAction="activation_share"),1==b.activation.touch&&(b.activation.nextAction="activation_share"),b.inFrame=document.location.search.indexOf("in_iframe")>-1,b.inFrame&&(b.activation.nextAction=""),b.activation.ratedText="","Chrome"==b.activation.browser&&(b.activation.ratedText="Rated <span>&#9733;&#9733;&#9733;&#9733;&#9733;</span> on the Chrome Web Store"),"Firefox"==b.activation.browser&&(b.activation.ratedText="Rated <span>&#9733;&#9733;&#9733;&#9733;&#9733;</span> on Mozilla Add-ons"),"Safari"==b.activation.browser&&(b.activation.ratedText="Featured on the Safari extensions gallery"),"activation_install"==b.activation.nextAction){switch(b.activation.installextension.randomText%3+1){case 1:b.activation.text="Upgrade Wikipedia";break;case 2:b.activation.text="Install Wikiwand";break;case 3:b.activation.text="Get Wikiwand";break;default:b.activation.text="Upgrade Wikipedia"}b.activation.tooltip="Click to install Wikiwand",b.activation.installextension.popupHeadline="Install our extension to set Wikiwand as your default Wikipedia interface",articleData.title&&analytics.gaVirtualPageView("virtualpageview/install-impression/"+b.activation.text.split(" ").join("-"))}"activation_rate"==b.activation.nextAction&&(b.activation.tooltip="Click to rate",b.activation.text="Rate us",b.activation.nextAction="activation_share"),"activation_share"===b.activation.nextAction&&(b.activation.tooltip="Tell a friend",b.activation.text="Tell a friend",b.activation.toolbarText=""),j.saveState()},saveState:function(){localStorage.wikiwand_activation=angular.toJson(b.activation),localStorage.wikiwand_walkthrough=angular.toJson(b.walkthrough)},extensionPopup:function(a){"activation_install"===b.activation.nextAction&&("enter"===a&&(i=c(function(){b.extPopShow=!0,b.lightboxOpened=!0,c(function(){b.extPopAnim=!0},10),analytics.gaVirtualPageView("virtualpageview/install-popup/"+b.activation.text.split(" ").join("-"))},500)),"leave"===a&&c.cancel(i),"click"===a&&(serverData.callToInstallExtension?analytics.gaVirtualPageView("/virtualpageview/article-promo-lightbox/install-click"):serverData.callToPersonalize&&analytics.gaVirtualPageView("/virtualpageview/article-promo-pers/install-click"),1==b.activation.instructions&&(b.extPopShow=!0,b.lightboxOpened=!0,i=c(function(){b.extPopAnim=!0},10)))),"clickClose"===a&&(c.cancel(i),b.extPopAnim=!1,c(function(){b.extPopShow=!1,b.activation.instructions=!1},500))},activationButtonClicked:function(a){var d=null;console.log(a),a&&""!=a&&(d=a);var e,f;if("activation_share"==b.activation.nextAction&&(analytics.gaEvent("activation","share-click",b.activation.browser),analytics.gaVirtualPageView("virtualpageview/share-click"),analytics.gaVirtualPageView("virtualpageview/invites/clicked"),b.activation.showShare=!0,c(function(){b.activation.animShare=!0},100)),"activation_rate"==b.activation.nextAction&&("Chrome"==b.activation.browser&&(e="https://chrome.google.com/webstore/detail/wikiwand-wikipedia-modern/emffkefkbkpkgpdeeooapgaicgmcbolj/reviews"),"Firefox"==b.activation.browser&&(e="https://addons.mozilla.org/en-US/firefox/addon/wikiwand-wikipedia-modernized/reviews/add"),analytics.gaEvent("activation","rate-click",serverData.agent.family),analytics.gaVirtualPageView("virtualpageview/rate-click"),f&&f.close(),f=window.open(e,"_blank"),b.activation.rateextension.finished=!0,b.activation.nextAction="activation_share"),"activation_install"==b.activation.nextAction){if(analytics.gaEvent("activation","install-click",b.activation.vetek),analytics.gaVirtualPageView("virtualpageview/install-click/"+b.activation.text.split(" ").join("-")),"Opera"==b.activation.browser&&(f&&f.close(),e="/extension/install-wikiwand-on-opera",f=window.open(e,"_blank"),analytics.gaVirtualPageView("virtualpageview/install-chrome-opera")),"Chrome"==b.activation.browser){b.activation.instructions=!0,b.extensionPopup("click");chrome.webstore.install("https://chrome.google.com/webstore/detail/emffkefkbkpkgpdeeooapgaicgmcbolj",function(){analytics.gaVirtualPageView("virtualpageview/install-chrome-inline"),b.activation.nextAction="activation_share",b.activation.installextension.finished=!0},function(a){console.error("could not install inline",a),"User cancelled install"!=a&&(b.activation.installextension.finished=!1,analytics.gaVirtualPageView("virtualpageview/install-chrome-cancelled"),f&&f.close(),b.activation.nextAction="activation_share",analytics.gaVirtualPageView("virtualpageview/install-chrome-store"),b.activation.installextension.finished=!0,"development"!=serverData.config.environment&&setTimeout(function(){window.location="https://chrome.google.com/webstore/detail/wikiwand-wikipedia-modern/emffkefkbkpkgpdeeooapgaicgmcbolj"},500))})}"Firefox"==b.activation.browser&&b.activation.installextension.random>5&&!b.callToPersonalize&&(f&&f.close(),e="https://addons.mozilla.org/en-US/firefox/addon/wikiwand-wikipedia-modernized/",f=window.open(e,"_blank"),b.activation.nextAction="activation_share",b.activation.installextension.finished=!0,analytics.gaVirtualPageView("virtualpageview/install-firefox-store")),"Safari"==b.activation.browser&&(b.activation.instructions=!0,b.extensionPopup("click"),analytics.gaVirtualPageView("virtualpageview/install-safari-inline"),e="https://s3.amazonaws.com/assets.wikiwand.com/extension/safari/wikiwand.safariextz",f&&f.close(),setTimeout(function(){f=window.open(e,"_self")},2e3),b.activation.installextension.finished=!0,b.activation.nextAction="activation_share")}else b.extPopShow=!1;j.normalizeData()},new_visitor_fold_clicked:function(){b.walkthrough.new_visitor=!1,j.normalizeData()}};return j}]);var app=angular.module("wikiwand");app.service("TestingService",["$http","$rootScope","$timeout","ipCookie","Utilities",function(a,b){var c={initializeTests:function(){var a=window.location.search.indexOf("debug_tests=1")>-1,c={};if(b.cohorts={mon_footer:"none",mon_footer_b:"none",mon_bottom:"none",mon_ocd:"none"},serverData.settings&&serverData.settings.tests){a&&jQuery.isEmptyObject(serverData.settings.tests)&&console.warn("Tests settings not loaded from database yet, please retry in a few seconds");for(var d in serverData.settings.tests){var e=serverData.settings.tests[d],f=0,g={name:d,options:[]};for(var h in e){var i=e[h],j=f,k=Math.min(j+i,100);f=k,g.options.push({min:j,max:k,val:h})}100>f&&g.options.push({min:f,max:100,val:"none"}),c[g.name]=g}a&&console.info("Tests:",c);for(var l in c){var g=c[l],m="wikiwand_test_"+g.name;localStorage[m]||(localStorage[m]=Math.floor(100*Math.random()));var n=localStorage[m];for(var l in g.options){var o=g.options[l];if(o.min!=o.max&&n>=o.min&&n<o.max){b.cohorts[g.name]=o.val;break}}}a&&console.info("User Cohorts:",b.cohorts)}}};return c}]);var app=angular.module("wikiwand");app.service("MonService",["$http","$rootScope","$timeout","ipCookie","Utilities",function(){return{initMonService:function(){}}}]);var app=angular.module("wikiwand");app.service("Utilities",function(){function a(){var a=document.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))}var b=navigator.userAgent.toLowerCase(),c=b.match(/(iphone|ipod|ipad)/)||b.match(/(android)/)||b.match(/(iemobile)/)||b.match(/iphone/i)||b.match(/ipad/i)||b.match(/ipod/i)||b.match(/blackberry/i)||b.match(/bada/i),d=!1;return document.documentMode&&(d=!0),{isItInternetExplorer:function(){return d},isCanvasSupported:a,isTouchDevice:function(){return c},agent:serverData.agent}});
//# sourceMappingURL=wikiwand.early.min.map